import { Modal, Button, Spinner, Badge, Input, Dropmenu, Option, Icon, Spacing, Select, Text, Tooltip, Separator, Tag, StageSelector, Radio, Checkbox, ButtonGroup, Textarea, Dialog, Pill } from '@pipedrive/convention-ui-react';
import { isString, isNil, isNumber, isEmpty as isEmpty$1, trim as trim$3, isUndefined, replace, isNaN as isNaN$1, trimStart, range, flatMap, omit, defer as defer$1, noop, capitalize, isArray as isArray$6, find as find$4, debounce, isEqual, differenceWith, isObject as isObject$d, filter as filter$3, toString as toString$3, isNull, findIndex, isFunction, sortBy } from 'lodash';
import React, { useContext, useState, useRef, useMemo, useEffect, forwardRef, useCallback } from 'react';
import Formatter from '@pipedrive/formatter';
import getTranslator from '@pipedrive/translator-client/fe';
import awesomeDebouncePromise from 'awesome-debounce-promise';
import classNames from 'classnames';
import Downshift from 'downshift';
import moment$1 from 'moment';
import validate from 'validate.js';
import { get as get$1, put } from '@pipedrive/fetch';
import ReactDOM from 'react-dom';
import { extendMoment } from 'moment-range';
import Calendar from 'react-datepicker';
import TagsInput from 'react-tagsinput';
import Linkify from 'react-linkify';

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];

  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;

  var _s, _e;

  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

var check = function (it) {
  return it && it.Math == Math && it;
}; // https://github.com/zloirock/core-js/issues/86#issuecomment-115759028


var global$i = // eslint-disable-next-line es/no-global-this -- safe
check(typeof globalThis == 'object' && globalThis) || check(typeof window == 'object' && window) || // eslint-disable-next-line no-restricted-globals -- safe
check(typeof self == 'object' && self) || check(typeof commonjsGlobal == 'object' && commonjsGlobal) || // eslint-disable-next-line no-new-func -- fallback
function () {
  return this;
}() || Function('return this')();

var objectGetOwnPropertyDescriptor = {};

var fails$f = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};

var fails$e = fails$f; // Detect IE8's incomplete defineProperty implementation


var descriptors = !fails$e(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty({}, 1, {
    get: function () {
      return 7;
    }
  })[1] != 7;
});

var objectPropertyIsEnumerable = {};

var $propertyIsEnumerable$1 = {}.propertyIsEnumerable; // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe

var getOwnPropertyDescriptor$5 = Object.getOwnPropertyDescriptor; // Nashorn ~ JDK8 bug

var NASHORN_BUG = getOwnPropertyDescriptor$5 && !$propertyIsEnumerable$1.call({
  1: 2
}, 1); // `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable

objectPropertyIsEnumerable.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor$5(this, V);
  return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable$1;

var createPropertyDescriptor$6 = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};

var toString$2 = {}.toString;

var classofRaw$1 = function (it) {
  return toString$2.call(it).slice(8, -1);
};

var fails$d = fails$f;

var classof$8 = classofRaw$1;

var split = ''.split; // fallback for non-array-like ES3 and non-enumerable old V8 strings

var indexedObject = fails$d(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins -- safe
  return !Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof$8(it) == 'String' ? split.call(it, '') : Object(it);
} : Object;

// `RequireObjectCoercible` abstract operation
// https://tc39.es/ecma262/#sec-requireobjectcoercible
var requireObjectCoercible$8 = function (it) {
  if (it == undefined) throw TypeError("Can't call method on " + it);
  return it;
};

// toObject with fallback for non-array-like ES3 strings
var IndexedObject$1 = indexedObject;

var requireObjectCoercible$7 = requireObjectCoercible$8;

var toIndexedObject$9 = function (it) {
  return IndexedObject$1(requireObjectCoercible$7(it));
};

var isObject$c = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};

var isObject$b = isObject$c; // `ToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-toprimitive
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string


var toPrimitive$4 = function (input, PREFERRED_STRING) {
  if (!isObject$b(input)) return input;
  var fn, val;
  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject$b(val = fn.call(input))) return val;
  if (typeof (fn = input.valueOf) == 'function' && !isObject$b(val = fn.call(input))) return val;
  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject$b(val = fn.call(input))) return val;
  throw TypeError("Can't convert object to primitive value");
};

var requireObjectCoercible$6 = requireObjectCoercible$8; // `ToObject` abstract operation
// https://tc39.es/ecma262/#sec-toobject


var toObject$a = function (argument) {
  return Object(requireObjectCoercible$6(argument));
};

var toObject$9 = toObject$a;

var hasOwnProperty = {}.hasOwnProperty;

var has$a = Object.hasOwn || function hasOwn(it, key) {
  return hasOwnProperty.call(toObject$9(it), key);
};

var global$h = global$i;

var isObject$a = isObject$c;

var document$3 = global$h.document; // typeof document.createElement is 'object' in old IE

var EXISTS = isObject$a(document$3) && isObject$a(document$3.createElement);

var documentCreateElement$1 = function (it) {
  return EXISTS ? document$3.createElement(it) : {};
};

var DESCRIPTORS$8 = descriptors;

var fails$c = fails$f;

var createElement$1 = documentCreateElement$1; // Thank's IE8 for his funny defineProperty


var ie8DomDefine = !DESCRIPTORS$8 && !fails$c(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- requied for testing
  return Object.defineProperty(createElement$1('div'), 'a', {
    get: function () {
      return 7;
    }
  }).a != 7;
});

var DESCRIPTORS$7 = descriptors;

var propertyIsEnumerableModule$1 = objectPropertyIsEnumerable;

var createPropertyDescriptor$5 = createPropertyDescriptor$6;

var toIndexedObject$8 = toIndexedObject$9;

var toPrimitive$3 = toPrimitive$4;

var has$9 = has$a;

var IE8_DOM_DEFINE$1 = ie8DomDefine; // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe


var $getOwnPropertyDescriptor$1 = Object.getOwnPropertyDescriptor; // `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor

objectGetOwnPropertyDescriptor.f = DESCRIPTORS$7 ? $getOwnPropertyDescriptor$1 : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject$8(O);
  P = toPrimitive$3(P, true);
  if (IE8_DOM_DEFINE$1) try {
    return $getOwnPropertyDescriptor$1(O, P);
  } catch (error) {
    /* empty */
  }
  if (has$9(O, P)) return createPropertyDescriptor$5(!propertyIsEnumerableModule$1.f.call(O, P), O[P]);
};

var fails$b = fails$f;

var replacement = /#|\.prototype\./;

var isForced$2 = function (feature, detection) {
  var value = data[normalize(feature)];
  return value == POLYFILL ? true : value == NATIVE ? false : typeof detection == 'function' ? fails$b(detection) : !!detection;
};

var normalize = isForced$2.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced$2.data = {};
var NATIVE = isForced$2.NATIVE = 'N';
var POLYFILL = isForced$2.POLYFILL = 'P';
var isForced_1 = isForced$2;

var path$a = {};

var aFunction$7 = function (it) {
  if (typeof it != 'function') {
    throw TypeError(String(it) + ' is not a function');
  }

  return it;
};

var aFunction$6 = aFunction$7; // optional / simple context binding


var functionBindContext = function (fn, that, length) {
  aFunction$6(fn);
  if (that === undefined) return fn;

  switch (length) {
    case 0:
      return function () {
        return fn.call(that);
      };

    case 1:
      return function (a) {
        return fn.call(that, a);
      };

    case 2:
      return function (a, b) {
        return fn.call(that, a, b);
      };

    case 3:
      return function (a, b, c) {
        return fn.call(that, a, b, c);
      };
  }

  return function ()
  /* ...args */
  {
    return fn.apply(that, arguments);
  };
};

var objectDefineProperty = {};

var isObject$9 = isObject$c;

var anObject$b = function (it) {
  if (!isObject$9(it)) {
    throw TypeError(String(it) + ' is not an object');
  }

  return it;
};

var DESCRIPTORS$6 = descriptors;

var IE8_DOM_DEFINE = ie8DomDefine;

var anObject$a = anObject$b;

var toPrimitive$2 = toPrimitive$4; // eslint-disable-next-line es/no-object-defineproperty -- safe


var $defineProperty$1 = Object.defineProperty; // `Object.defineProperty` method
// https://tc39.es/ecma262/#sec-object.defineproperty

objectDefineProperty.f = DESCRIPTORS$6 ? $defineProperty$1 : function defineProperty(O, P, Attributes) {
  anObject$a(O);
  P = toPrimitive$2(P, true);
  anObject$a(Attributes);
  if (IE8_DOM_DEFINE) try {
    return $defineProperty$1(O, P, Attributes);
  } catch (error) {
    /* empty */
  }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};

var DESCRIPTORS$5 = descriptors;

var definePropertyModule$4 = objectDefineProperty;

var createPropertyDescriptor$4 = createPropertyDescriptor$6;

var createNonEnumerableProperty$a = DESCRIPTORS$5 ? function (object, key, value) {
  return definePropertyModule$4.f(object, key, createPropertyDescriptor$4(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};

var global$g = global$i;

var getOwnPropertyDescriptor$4 = objectGetOwnPropertyDescriptor.f;

var isForced$1 = isForced_1;

var path$9 = path$a;

var bind$6 = functionBindContext;

var createNonEnumerableProperty$9 = createNonEnumerableProperty$a;

var has$8 = has$a;

var wrapConstructor = function (NativeConstructor) {
  var Wrapper = function (a, b, c) {
    if (this instanceof NativeConstructor) {
      switch (arguments.length) {
        case 0:
          return new NativeConstructor();

        case 1:
          return new NativeConstructor(a);

        case 2:
          return new NativeConstructor(a, b);
      }

      return new NativeConstructor(a, b, c);
    }

    return NativeConstructor.apply(this, arguments);
  };

  Wrapper.prototype = NativeConstructor.prototype;
  return Wrapper;
};
/*
  options.target      - name of the target object
  options.global      - target is the global object
  options.stat        - export as static methods of target
  options.proto       - export as prototype methods of target
  options.real        - real prototype method for the `pure` version
  options.forced      - export even if the native feature is available
  options.bind        - bind methods to the target, required for the `pure` version
  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe      - use the simple assignment of property instead of delete + defineProperty
  options.sham        - add a flag to not completely full polyfills
  options.enumerable  - export as enumerable property
  options.noTargetGet - prevent calling a getter on target
*/


var _export = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var PROTO = options.proto;
  var nativeSource = GLOBAL ? global$g : STATIC ? global$g[TARGET] : (global$g[TARGET] || {}).prototype;
  var target = GLOBAL ? path$9 : path$9[TARGET] || (path$9[TARGET] = {});
  var targetPrototype = target.prototype;
  var FORCED, USE_NATIVE, VIRTUAL_PROTOTYPE;
  var key, sourceProperty, targetProperty, nativeProperty, resultProperty, descriptor;

  for (key in source) {
    FORCED = isForced$1(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced); // contains in native

    USE_NATIVE = !FORCED && nativeSource && has$8(nativeSource, key);
    targetProperty = target[key];
    if (USE_NATIVE) if (options.noTargetGet) {
      descriptor = getOwnPropertyDescriptor$4(nativeSource, key);
      nativeProperty = descriptor && descriptor.value;
    } else nativeProperty = nativeSource[key]; // export native or implementation

    sourceProperty = USE_NATIVE && nativeProperty ? nativeProperty : source[key];
    if (USE_NATIVE && typeof targetProperty === typeof sourceProperty) continue; // bind timers to global for call from export context

    if (options.bind && USE_NATIVE) resultProperty = bind$6(sourceProperty, global$g); // wrap global constructors for prevent changs in this version
    else if (options.wrap && USE_NATIVE) resultProperty = wrapConstructor(sourceProperty); // make static versions for prototype methods
      else if (PROTO && typeof sourceProperty == 'function') resultProperty = bind$6(Function.call, sourceProperty); // default case
        else resultProperty = sourceProperty; // add a flag to not completely full polyfills

    if (options.sham || sourceProperty && sourceProperty.sham || targetProperty && targetProperty.sham) {
      createNonEnumerableProperty$9(resultProperty, 'sham', true);
    }

    target[key] = resultProperty;

    if (PROTO) {
      VIRTUAL_PROTOTYPE = TARGET + 'Prototype';

      if (!has$8(path$9, VIRTUAL_PROTOTYPE)) {
        createNonEnumerableProperty$9(path$9, VIRTUAL_PROTOTYPE, {});
      } // export virtual prototype methods


      path$9[VIRTUAL_PROTOTYPE][key] = sourceProperty; // export real prototype methods

      if (options.real && targetPrototype && !targetPrototype[key]) {
        createNonEnumerableProperty$9(targetPrototype, key, sourceProperty);
      }
    }
  }
};

var ceil$1 = Math.ceil;
var floor = Math.floor; // `ToInteger` abstract operation
// https://tc39.es/ecma262/#sec-tointeger

var toInteger$6 = function (argument) {
  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil$1)(argument);
};

var toInteger$5 = toInteger$6;

var min$3 = Math.min; // `ToLength` abstract operation
// https://tc39.es/ecma262/#sec-tolength

var toLength$c = function (argument) {
  return argument > 0 ? min$3(toInteger$5(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};

var classof$7 = classofRaw$1; // `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe


var isArray$5 = Array.isArray || function isArray(arg) {
  return classof$7(arg) == 'Array';
};

var shared$4 = {exports: {}};

var isPure = true;

var global$f = global$i;

var createNonEnumerableProperty$8 = createNonEnumerableProperty$a;

var setGlobal$1 = function (key, value) {
  try {
    createNonEnumerableProperty$8(global$f, key, value);
  } catch (error) {
    global$f[key] = value;
  }

  return value;
};

var global$e = global$i;

var setGlobal = setGlobal$1;

var SHARED = '__core-js_shared__';
var store$3 = global$e[SHARED] || setGlobal(SHARED, {});
var sharedStore = store$3;

var store$2 = sharedStore;

(shared$4.exports = function (key, value) {
  return store$2[key] || (store$2[key] = value !== undefined ? value : {});
})('versions', []).push({
  version: '3.14.0',
  mode: 'pure' ,
  copyright: '© 2021 Denis Pushkarev (zloirock.ru)'
});

var id = 0;
var postfix = Math.random();

var uid$3 = function (key) {
  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);
};

var path$8 = path$a;

var global$d = global$i;

var aFunction$5 = function (variable) {
  return typeof variable == 'function' ? variable : undefined;
};

var getBuiltIn$8 = function (namespace, method) {
  return arguments.length < 2 ? aFunction$5(path$8[namespace]) || aFunction$5(global$d[namespace]) : path$8[namespace] && path$8[namespace][method] || global$d[namespace] && global$d[namespace][method];
};

var getBuiltIn$7 = getBuiltIn$8;

var engineUserAgent = getBuiltIn$7('navigator', 'userAgent') || '';

var global$c = global$i;

var userAgent$3 = engineUserAgent;

var process$3 = global$c.process;
var versions = process$3 && process$3.versions;
var v8 = versions && versions.v8;
var match, version;

if (v8) {
  match = v8.split('.');
  version = match[0] < 4 ? 1 : match[0] + match[1];
} else if (userAgent$3) {
  match = userAgent$3.match(/Edge\/(\d+)/);

  if (!match || match[1] >= 74) {
    match = userAgent$3.match(/Chrome\/(\d+)/);
    if (match) version = match[1];
  }
}

var engineV8Version = version && +version;

/* eslint-disable es/no-symbol -- required for testing */

var V8_VERSION$3 = engineV8Version;

var fails$a = fails$f; // eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing


var nativeSymbol = !!Object.getOwnPropertySymbols && !fails$a(function () {
  var symbol = Symbol(); // Chrome 38 Symbol has incorrect toString conversion
  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances

  return !String(symbol) || !(Object(symbol) instanceof Symbol) || // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
  !Symbol.sham && V8_VERSION$3 && V8_VERSION$3 < 41;
});

/* eslint-disable es/no-symbol -- required for testing */

var NATIVE_SYMBOL$2 = nativeSymbol;

var useSymbolAsUid = NATIVE_SYMBOL$2 && !Symbol.sham && typeof Symbol.iterator == 'symbol';

var global$b = global$i;

var shared$3 = shared$4.exports;

var has$7 = has$a;

var uid$2 = uid$3;

var NATIVE_SYMBOL$1 = nativeSymbol;

var USE_SYMBOL_AS_UID$1 = useSymbolAsUid;

var WellKnownSymbolsStore$1 = shared$3('wks');
var Symbol$1 = global$b.Symbol;
var createWellKnownSymbol = USE_SYMBOL_AS_UID$1 ? Symbol$1 : Symbol$1 && Symbol$1.withoutSetter || uid$2;

var wellKnownSymbol$k = function (name) {
  if (!has$7(WellKnownSymbolsStore$1, name) || !(NATIVE_SYMBOL$1 || typeof WellKnownSymbolsStore$1[name] == 'string')) {
    if (NATIVE_SYMBOL$1 && has$7(Symbol$1, name)) {
      WellKnownSymbolsStore$1[name] = Symbol$1[name];
    } else {
      WellKnownSymbolsStore$1[name] = createWellKnownSymbol('Symbol.' + name);
    }
  }

  return WellKnownSymbolsStore$1[name];
};

var isObject$8 = isObject$c;

var isArray$4 = isArray$5;

var wellKnownSymbol$j = wellKnownSymbol$k;

var SPECIES$5 = wellKnownSymbol$j('species'); // `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate

var arraySpeciesCreate$4 = function (originalArray, length) {
  var C;

  if (isArray$4(originalArray)) {
    C = originalArray.constructor; // cross-realm fallback

    if (typeof C == 'function' && (C === Array || isArray$4(C.prototype))) C = undefined;else if (isObject$8(C)) {
      C = C[SPECIES$5];
      if (C === null) C = undefined;
    }
  }

  return new (C === undefined ? Array : C)(length === 0 ? 0 : length);
};

var bind$5 = functionBindContext;

var IndexedObject = indexedObject;

var toObject$8 = toObject$a;

var toLength$b = toLength$c;

var arraySpeciesCreate$3 = arraySpeciesCreate$4;

var push = [].push; // `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation

var createMethod$4 = function (TYPE) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var IS_FILTER_OUT = TYPE == 7;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject$8($this);
    var self = IndexedObject(O);
    var boundFunction = bind$5(callbackfn, that, 3);
    var length = toLength$b(self.length);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate$3;
    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;
    var value, result;

    for (; length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);

      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
            case 3:
              return true;
            // some

            case 5:
              return value;
            // find

            case 6:
              return index;
            // findIndex

            case 2:
              push.call(target, value);
            // filter
          } else switch (TYPE) {
            case 4:
              return false;
            // every

            case 7:
              push.call(target, value);
            // filterOut
          }
      }
    }

    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

var arrayIteration = {
  // `Array.prototype.forEach` method
  // https://tc39.es/ecma262/#sec-array.prototype.foreach
  forEach: createMethod$4(0),
  // `Array.prototype.map` method
  // https://tc39.es/ecma262/#sec-array.prototype.map
  map: createMethod$4(1),
  // `Array.prototype.filter` method
  // https://tc39.es/ecma262/#sec-array.prototype.filter
  filter: createMethod$4(2),
  // `Array.prototype.some` method
  // https://tc39.es/ecma262/#sec-array.prototype.some
  some: createMethod$4(3),
  // `Array.prototype.every` method
  // https://tc39.es/ecma262/#sec-array.prototype.every
  every: createMethod$4(4),
  // `Array.prototype.find` method
  // https://tc39.es/ecma262/#sec-array.prototype.find
  find: createMethod$4(5),
  // `Array.prototype.findIndex` method
  // https://tc39.es/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod$4(6),
  // `Array.prototype.filterOut` method
  // https://github.com/tc39/proposal-array-filtering
  filterOut: createMethod$4(7)
};

var fails$9 = fails$f;

var wellKnownSymbol$i = wellKnownSymbol$k;

var V8_VERSION$2 = engineV8Version;

var SPECIES$4 = wellKnownSymbol$i('species');

var arrayMethodHasSpeciesSupport$5 = function (METHOD_NAME) {
  // We can't use this feature detection in V8 since it causes
  // deoptimization and serious performance degradation
  // https://github.com/zloirock/core-js/issues/677
  return V8_VERSION$2 >= 51 || !fails$9(function () {
    var array = [];
    var constructor = array.constructor = {};

    constructor[SPECIES$4] = function () {
      return {
        foo: 1
      };
    };

    return array[METHOD_NAME](Boolean).foo !== 1;
  });
};

var $$n = _export;

var $map = arrayIteration.map;

var arrayMethodHasSpeciesSupport$4 = arrayMethodHasSpeciesSupport$5;

var HAS_SPECIES_SUPPORT$3 = arrayMethodHasSpeciesSupport$4('map'); // `Array.prototype.map` method
// https://tc39.es/ecma262/#sec-array.prototype.map
// with adding support of @@species

$$n({
  target: 'Array',
  proto: true,
  forced: !HAS_SPECIES_SUPPORT$3
}, {
  map: function map(callbackfn
  /* , thisArg */
  ) {
    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});

var path$7 = path$a;

var entryVirtual$e = function (CONSTRUCTOR) {
  return path$7[CONSTRUCTOR + 'Prototype'];
};

var entryVirtual$d = entryVirtual$e;

var map$2 = entryVirtual$d('Array').map;

var map$1 = map$2;

var ArrayPrototype$a = Array.prototype;

var map_1 = function (it) {
  var own = it.map;
  return it === ArrayPrototype$a || it instanceof Array && own === ArrayPrototype$a.map ? map$1 : own;
};

var parent$i = map_1;

var map = parent$i;

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var Op = Object.prototype;
var hasOwn = Op.hasOwnProperty;
var undefined$1; // More compressible than void 0.

var $Symbol$1 = typeof Symbol === "function" ? Symbol : {};
var iteratorSymbol = $Symbol$1.iterator || "@@iterator";
var asyncIteratorSymbol = $Symbol$1.asyncIterator || "@@asyncIterator";
var toStringTagSymbol = $Symbol$1.toStringTag || "@@toStringTag";

function wrap$1(innerFn, outerFn, self, tryLocsList) {
  // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
  var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
  var generator = Object.create(protoGenerator.prototype);
  var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,
  // .throw, and .return methods.

  generator._invoke = makeInvokeMethod(innerFn, self, context);
  return generator;
} // Try/catch helper to minimize deoptimizations. Returns a completion
// record like context.tryEntries[i].completion. This interface could
// have been (and was previously) designed to take a closure to be
// invoked without arguments, but in all the cases we care about we
// already have an existing method we want to call, so there's no need
// to create a new function object. We can even get away with assuming
// the method takes exactly one argument, since that happens to be true
// in every case, so we don't have to touch the arguments object. The
// only additional allocation required is the completion record, which
// has a stable shape and so hopefully should be cheap to allocate.


function tryCatch(fn, obj, arg) {
  try {
    return {
      type: "normal",
      arg: fn.call(obj, arg)
    };
  } catch (err) {
    return {
      type: "throw",
      arg: err
    };
  }
}

var GenStateSuspendedStart = "suspendedStart";
var GenStateSuspendedYield = "suspendedYield";
var GenStateExecuting = "executing";
var GenStateCompleted = "completed"; // Returning this object from the innerFn has the same effect as
// breaking out of the dispatch switch statement.

var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and
// .constructor.prototype properties for functions that return Generator
// objects. For full spec compliance, you may wish to configure your
// minifier not to mangle the names of these two functions.

function Generator() {}

function GeneratorFunction() {}

function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that
// don't natively support it.


var IteratorPrototype$3 = {};

IteratorPrototype$3[iteratorSymbol] = function () {
  return this;
};

var getProto = Object.getPrototypeOf;
var NativeIteratorPrototype = getProto && getProto(getProto(values$3([])));

if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
  // This environment has a native %IteratorPrototype%; use it instead
  // of the polyfill.
  IteratorPrototype$3 = NativeIteratorPrototype;
}

var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype$3);
GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
GeneratorFunctionPrototype.constructor = GeneratorFunction;
GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = "GeneratorFunction"; // Helper for defining the .next, .throw, and .return methods of the
// Iterator interface in terms of a single ._invoke method.

function defineIteratorMethods(prototype) {
  ["next", "throw", "return"].forEach(function (method) {
    prototype[method] = function (arg) {
      return this._invoke(method, arg);
    };
  });
}

function isGeneratorFunction(genFun) {
  var ctor = typeof genFun === "function" && genFun.constructor;
  return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can
  // do is to check its .name property.
  (ctor.displayName || ctor.name) === "GeneratorFunction" : false;
}

function mark(genFun) {
  if (Object.setPrototypeOf) {
    Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
  } else {
    genFun.__proto__ = GeneratorFunctionPrototype;

    if (!(toStringTagSymbol in genFun)) {
      genFun[toStringTagSymbol] = "GeneratorFunction";
    }
  }

  genFun.prototype = Object.create(Gp);
  return genFun;
}
// `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
// `hasOwn.call(value, "__await")` to determine if the yielded value is
// meant to be awaited.

function awrap(arg) {
  return {
    __await: arg
  };
}

function AsyncIterator(generator, PromiseImpl) {
  function invoke(method, arg, resolve, reject) {
    var record = tryCatch(generator[method], generator, arg);

    if (record.type === "throw") {
      reject(record.arg);
    } else {
      var result = record.arg;
      var value = result.value;

      if (value && typeof value === "object" && hasOwn.call(value, "__await")) {
        return PromiseImpl.resolve(value.__await).then(function (value) {
          invoke("next", value, resolve, reject);
        }, function (err) {
          invoke("throw", err, resolve, reject);
        });
      }

      return PromiseImpl.resolve(value).then(function (unwrapped) {
        // When a yielded Promise is resolved, its final value becomes
        // the .value of the Promise<{value,done}> result for the
        // current iteration.
        result.value = unwrapped;
        resolve(result);
      }, function (error) {
        // If a rejected Promise was yielded, throw the rejection back
        // into the async generator function so it can be handled there.
        return invoke("throw", error, resolve, reject);
      });
    }
  }

  var previousPromise;

  function enqueue(method, arg) {
    function callInvokeWithMethodAndArg() {
      return new PromiseImpl(function (resolve, reject) {
        invoke(method, arg, resolve, reject);
      });
    }

    return previousPromise = // If enqueue has been called before, then we want to wait until
    // all previous Promises have been resolved before calling invoke,
    // so that results are always delivered in the correct order. If
    // enqueue has not been called before, then it is important to
    // call invoke immediately, without waiting on a callback to fire,
    // so that the async generator function has the opportunity to do
    // any necessary setup in a predictable way. This predictability
    // is why the Promise constructor synchronously invokes its
    // executor callback, and why async functions synchronously
    // execute code before the first await. Since we implement simple
    // async functions in terms of async generators, it is especially
    // important to get this right, even though it requires care.
    previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later
    // invocations of the iterator.
    callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
  } // Define the unified helper method that is used to implement .next,
  // .throw, and .return (see defineIteratorMethods).


  this._invoke = enqueue;
}

defineIteratorMethods(AsyncIterator.prototype);

AsyncIterator.prototype[asyncIteratorSymbol] = function () {
  return this;
}; // Note that simple async functions are implemented on top of
// AsyncIterator objects; they just return a Promise for the value of
// the final result produced by the iterator.


function async(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
  if (PromiseImpl === void 0) PromiseImpl = Promise;
  var iter = new AsyncIterator(wrap$1(innerFn, outerFn, self, tryLocsList), PromiseImpl);
  return isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.
  : iter.next().then(function (result) {
    return result.done ? result.value : iter.next();
  });
}

function makeInvokeMethod(innerFn, self, context) {
  var state = GenStateSuspendedStart;
  return function invoke(method, arg) {
    if (state === GenStateExecuting) {
      throw new Error("Generator is already running");
    }

    if (state === GenStateCompleted) {
      if (method === "throw") {
        throw arg;
      } // Be forgiving, per 25.3.3.3.3 of the spec:
      // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume


      return doneResult();
    }

    context.method = method;
    context.arg = arg;

    while (true) {
      var delegate = context.delegate;

      if (delegate) {
        var delegateResult = maybeInvokeDelegate(delegate, context);

        if (delegateResult) {
          if (delegateResult === ContinueSentinel) continue;
          return delegateResult;
        }
      }

      if (context.method === "next") {
        // Setting context._sent for legacy support of Babel's
        // function.sent implementation.
        context.sent = context._sent = context.arg;
      } else if (context.method === "throw") {
        if (state === GenStateSuspendedStart) {
          state = GenStateCompleted;
          throw context.arg;
        }

        context.dispatchException(context.arg);
      } else if (context.method === "return") {
        context.abrupt("return", context.arg);
      }

      state = GenStateExecuting;
      var record = tryCatch(innerFn, self, context);

      if (record.type === "normal") {
        // If an exception is thrown from innerFn, we leave state ===
        // GenStateExecuting and loop back for another invocation.
        state = context.done ? GenStateCompleted : GenStateSuspendedYield;

        if (record.arg === ContinueSentinel) {
          continue;
        }

        return {
          value: record.arg,
          done: context.done
        };
      } else if (record.type === "throw") {
        state = GenStateCompleted; // Dispatch the exception by looping back around to the
        // context.dispatchException(context.arg) call above.

        context.method = "throw";
        context.arg = record.arg;
      }
    }
  };
} // Call delegate.iterator[context.method](context.arg) and handle the
// result, either by returning a { value, done } result from the
// delegate iterator, or by modifying context.method and context.arg,
// setting context.delegate to null, and returning the ContinueSentinel.


function maybeInvokeDelegate(delegate, context) {
  var method = delegate.iterator[context.method];

  if (method === undefined$1) {
    // A .throw or .return when the delegate iterator has no .throw
    // method always terminates the yield* loop.
    context.delegate = null;

    if (context.method === "throw") {
      // Note: ["return"] must be used for ES3 parsing compatibility.
      if (delegate.iterator["return"]) {
        // If the delegate iterator has a return method, give it a
        // chance to clean up.
        context.method = "return";
        context.arg = undefined$1;
        maybeInvokeDelegate(delegate, context);

        if (context.method === "throw") {
          // If maybeInvokeDelegate(context) changed context.method from
          // "return" to "throw", let that override the TypeError below.
          return ContinueSentinel;
        }
      }

      context.method = "throw";
      context.arg = new TypeError("The iterator does not provide a 'throw' method");
    }

    return ContinueSentinel;
  }

  var record = tryCatch(method, delegate.iterator, context.arg);

  if (record.type === "throw") {
    context.method = "throw";
    context.arg = record.arg;
    context.delegate = null;
    return ContinueSentinel;
  }

  var info = record.arg;

  if (!info) {
    context.method = "throw";
    context.arg = new TypeError("iterator result is not an object");
    context.delegate = null;
    return ContinueSentinel;
  }

  if (info.done) {
    // Assign the result of the finished delegate to the temporary
    // variable specified by delegate.resultName (see delegateYield).
    context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).

    context.next = delegate.nextLoc; // If context.method was "throw" but the delegate handled the
    // exception, let the outer generator proceed normally. If
    // context.method was "next", forget context.arg since it has been
    // "consumed" by the delegate iterator. If context.method was
    // "return", allow the original .return call to continue in the
    // outer generator.

    if (context.method !== "return") {
      context.method = "next";
      context.arg = undefined$1;
    }
  } else {
    // Re-yield the result returned by the delegate method.
    return info;
  } // The delegate iterator is finished, so forget it and continue with
  // the outer generator.


  context.delegate = null;
  return ContinueSentinel;
} // Define Generator.prototype.{next,throw,return} in terms of the
// unified ._invoke helper method.


defineIteratorMethods(Gp);
Gp[toStringTagSymbol] = "Generator"; // A Generator should always return itself as the iterator object when the
// @@iterator function is called on it. Some browsers' implementations of the
// iterator prototype chain incorrectly implement this, causing the Generator
// object to not be returned from this call. This ensures that doesn't happen.
// See https://github.com/facebook/regenerator/issues/274 for more details.

Gp[iteratorSymbol] = function () {
  return this;
};

Gp.toString = function () {
  return "[object Generator]";
};

function pushTryEntry(locs) {
  var entry = {
    tryLoc: locs[0]
  };

  if (1 in locs) {
    entry.catchLoc = locs[1];
  }

  if (2 in locs) {
    entry.finallyLoc = locs[2];
    entry.afterLoc = locs[3];
  }

  this.tryEntries.push(entry);
}

function resetTryEntry(entry) {
  var record = entry.completion || {};
  record.type = "normal";
  delete record.arg;
  entry.completion = record;
}

function Context(tryLocsList) {
  // The root entry object (effectively a try statement without a catch
  // or a finally block) gives us a place to store values thrown from
  // locations where there is no enclosing try statement.
  this.tryEntries = [{
    tryLoc: "root"
  }];
  tryLocsList.forEach(pushTryEntry, this);
  this.reset(true);
}

function keys$3(object) {
  var keys = [];

  for (var key in object) {
    keys.push(key);
  }

  keys.reverse(); // Rather than returning an object with a next method, we keep
  // things simple and return the next function itself.

  return function next() {
    while (keys.length) {
      var key = keys.pop();

      if (key in object) {
        next.value = key;
        next.done = false;
        return next;
      }
    } // To avoid creating an additional object, we just hang the .value
    // and .done properties off the next function object itself. This
    // also ensures that the minifier will not anonymize the function.


    next.done = true;
    return next;
  };
}

function values$3(iterable) {
  if (iterable) {
    var iteratorMethod = iterable[iteratorSymbol];

    if (iteratorMethod) {
      return iteratorMethod.call(iterable);
    }

    if (typeof iterable.next === "function") {
      return iterable;
    }

    if (!isNaN(iterable.length)) {
      var i = -1,
          next = function next() {
        while (++i < iterable.length) {
          if (hasOwn.call(iterable, i)) {
            next.value = iterable[i];
            next.done = false;
            return next;
          }
        }

        next.value = undefined$1;
        next.done = true;
        return next;
      };

      return next.next = next;
    }
  } // Return an iterator with no values.


  return {
    next: doneResult
  };
}

function doneResult() {
  return {
    value: undefined$1,
    done: true
  };
}

Context.prototype = {
  constructor: Context,
  reset: function (skipTempReset) {
    this.prev = 0;
    this.next = 0; // Resetting context._sent for legacy support of Babel's
    // function.sent implementation.

    this.sent = this._sent = undefined$1;
    this.done = false;
    this.delegate = null;
    this.method = "next";
    this.arg = undefined$1;
    this.tryEntries.forEach(resetTryEntry);

    if (!skipTempReset) {
      for (var name in this) {
        // Not sure about the optimal order of these conditions:
        if (name.charAt(0) === "t" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {
          this[name] = undefined$1;
        }
      }
    }
  },
  stop: function () {
    this.done = true;
    var rootEntry = this.tryEntries[0];
    var rootRecord = rootEntry.completion;

    if (rootRecord.type === "throw") {
      throw rootRecord.arg;
    }

    return this.rval;
  },
  dispatchException: function (exception) {
    if (this.done) {
      throw exception;
    }

    var context = this;

    function handle(loc, caught) {
      record.type = "throw";
      record.arg = exception;
      context.next = loc;

      if (caught) {
        // If the dispatched exception was caught by a catch block,
        // then let that catch block handle the exception normally.
        context.method = "next";
        context.arg = undefined$1;
      }

      return !!caught;
    }

    for (var i = this.tryEntries.length - 1; i >= 0; --i) {
      var entry = this.tryEntries[i];
      var record = entry.completion;

      if (entry.tryLoc === "root") {
        // Exception thrown outside of any try block that could handle
        // it, so set the completion value of the entire function to
        // throw the exception.
        return handle("end");
      }

      if (entry.tryLoc <= this.prev) {
        var hasCatch = hasOwn.call(entry, "catchLoc");
        var hasFinally = hasOwn.call(entry, "finallyLoc");

        if (hasCatch && hasFinally) {
          if (this.prev < entry.catchLoc) {
            return handle(entry.catchLoc, true);
          } else if (this.prev < entry.finallyLoc) {
            return handle(entry.finallyLoc);
          }
        } else if (hasCatch) {
          if (this.prev < entry.catchLoc) {
            return handle(entry.catchLoc, true);
          }
        } else if (hasFinally) {
          if (this.prev < entry.finallyLoc) {
            return handle(entry.finallyLoc);
          }
        } else {
          throw new Error("try statement without catch or finally");
        }
      }
    }
  },
  abrupt: function (type, arg) {
    for (var i = this.tryEntries.length - 1; i >= 0; --i) {
      var entry = this.tryEntries[i];

      if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) {
        var finallyEntry = entry;
        break;
      }
    }

    if (finallyEntry && (type === "break" || type === "continue") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {
      // Ignore the finally entry if control is not jumping to a
      // location outside the try/catch block.
      finallyEntry = null;
    }

    var record = finallyEntry ? finallyEntry.completion : {};
    record.type = type;
    record.arg = arg;

    if (finallyEntry) {
      this.method = "next";
      this.next = finallyEntry.finallyLoc;
      return ContinueSentinel;
    }

    return this.complete(record);
  },
  complete: function (record, afterLoc) {
    if (record.type === "throw") {
      throw record.arg;
    }

    if (record.type === "break" || record.type === "continue") {
      this.next = record.arg;
    } else if (record.type === "return") {
      this.rval = this.arg = record.arg;
      this.method = "return";
      this.next = "end";
    } else if (record.type === "normal" && afterLoc) {
      this.next = afterLoc;
    }

    return ContinueSentinel;
  },
  finish: function (finallyLoc) {
    for (var i = this.tryEntries.length - 1; i >= 0; --i) {
      var entry = this.tryEntries[i];

      if (entry.finallyLoc === finallyLoc) {
        this.complete(entry.completion, entry.afterLoc);
        resetTryEntry(entry);
        return ContinueSentinel;
      }
    }
  },
  "catch": function (tryLoc) {
    for (var i = this.tryEntries.length - 1; i >= 0; --i) {
      var entry = this.tryEntries[i];

      if (entry.tryLoc === tryLoc) {
        var record = entry.completion;

        if (record.type === "throw") {
          var thrown = record.arg;
          resetTryEntry(entry);
        }

        return thrown;
      }
    } // The context.catch method must only be called with a location
    // argument that corresponds to a known catch block.


    throw new Error("illegal catch attempt");
  },
  delegateYield: function (iterable, resultName, nextLoc) {
    this.delegate = {
      iterator: values$3(iterable),
      resultName: resultName,
      nextLoc: nextLoc
    };

    if (this.method === "next") {
      // Deliberately forget the last sent value so that we don't
      // accidentally pass it on to the delegate.
      this.arg = undefined$1;
    }

    return ContinueSentinel;
  }
}; // Export a default namespace that plays well with Rollup

var _regeneratorRuntime = {
  wrap: wrap$1,
  isGeneratorFunction,
  AsyncIterator,
  mark,
  awrap,
  async,
  keys: keys$3,
  values: values$3
};

var FormFieldsContext = /*#__PURE__*/React.createContext({
  translator: {
    getLanguage: function getLanguage() {
      return 'en';
    },
    gettext: function gettext(f) {
      return f;
    },
    pgettext: function pgettext(context, text, replace) {
      return text.replace('%s', replace);
    }
  },
  currencies: [],
  users: [],
  defaultCurrency: 'EUR',
  languageCode: 'en',
  locale: 'en-US',
  formatter: new Formatter()
});

var toInteger$4 = toInteger$6;

var max$2 = Math.max;
var min$2 = Math.min; // Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).

var toAbsoluteIndex$4 = function (index, length) {
  var integer = toInteger$4(index);
  return integer < 0 ? max$2(integer + length, 0) : min$2(integer, length);
};

var toIndexedObject$7 = toIndexedObject$9;

var toLength$a = toLength$c;

var toAbsoluteIndex$3 = toAbsoluteIndex$4; // `Array.prototype.{ indexOf, includes }` methods implementation


var createMethod$3 = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject$7($this);
    var length = toLength$a(O.length);
    var index = toAbsoluteIndex$3(fromIndex, length);
    var value; // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare -- NaN check

    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++]; // eslint-disable-next-line no-self-compare -- NaN check

      if (value != value) return true; // Array#indexOf ignores holes, Array#includes - not
    } else for (; length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    }
    return !IS_INCLUDES && -1;
  };
};

var arrayIncludes$1 = {
  // `Array.prototype.includes` method
  // https://tc39.es/ecma262/#sec-array.prototype.includes
  includes: createMethod$3(true),
  // `Array.prototype.indexOf` method
  // https://tc39.es/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod$3(false)
};

var hiddenKeys$5 = {};

var has$6 = has$a;

var toIndexedObject$6 = toIndexedObject$9;

var indexOf = arrayIncludes$1.indexOf;

var hiddenKeys$4 = hiddenKeys$5;

var objectKeysInternal = function (object, names) {
  var O = toIndexedObject$6(object);
  var i = 0;
  var result = [];
  var key;

  for (key in O) !has$6(hiddenKeys$4, key) && has$6(O, key) && result.push(key); // Don't enum bug & hidden keys


  while (names.length > i) if (has$6(O, key = names[i++])) {
    ~indexOf(result, key) || result.push(key);
  }

  return result;
};

// IE8- don't enum bug keys
var enumBugKeys$3 = ['constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'toLocaleString', 'toString', 'valueOf'];

var internalObjectKeys$1 = objectKeysInternal;

var enumBugKeys$2 = enumBugKeys$3; // `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe


var objectKeys$2 = Object.keys || function keys(O) {
  return internalObjectKeys$1(O, enumBugKeys$2);
};

var $$m = _export;

var toObject$7 = toObject$a;

var nativeKeys = objectKeys$2;

var fails$8 = fails$f;

var FAILS_ON_PRIMITIVES$1 = fails$8(function () {
  nativeKeys(1);
}); // `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys

$$m({
  target: 'Object',
  stat: true,
  forced: FAILS_ON_PRIMITIVES$1
}, {
  keys: function keys(it) {
    return nativeKeys(toObject$7(it));
  }
});

var path$6 = path$a;

var keys$2 = path$6.Object.keys;

var parent$h = keys$2;

var keys$1 = parent$h;

var DESCRIPTORS$4 = descriptors;

var definePropertyModule$3 = objectDefineProperty;

var anObject$9 = anObject$b;

var objectKeys$1 = objectKeys$2; // `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe


var objectDefineProperties = DESCRIPTORS$4 ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject$9(O);
  var keys = objectKeys$1(Properties);
  var length = keys.length;
  var index = 0;
  var key;

  while (length > index) definePropertyModule$3.f(O, key = keys[index++], Properties[key]);

  return O;
};

var getBuiltIn$6 = getBuiltIn$8;

var html$2 = getBuiltIn$6('document', 'documentElement');

var shared$2 = shared$4.exports;

var uid$1 = uid$3;

var keys = shared$2('keys');

var sharedKey$4 = function (key) {
  return keys[key] || (keys[key] = uid$1(key));
};

var anObject$8 = anObject$b;

var defineProperties = objectDefineProperties;

var enumBugKeys$1 = enumBugKeys$3;

var hiddenKeys$3 = hiddenKeys$5;

var html$1 = html$2;

var documentCreateElement = documentCreateElement$1;

var sharedKey$3 = sharedKey$4;

var GT = '>';
var LT = '<';
var PROTOTYPE$1 = 'prototype';
var SCRIPT = 'script';
var IE_PROTO$1 = sharedKey$3('IE_PROTO');

var EmptyConstructor = function () {
  /* empty */
};

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
}; // Create object with fake `null` prototype: use ActiveX Object with cleared prototype


var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  activeXDocument = null; // avoid memory leak

  return temp;
}; // Create object with fake `null` prototype: use iframe Object with cleared prototype


var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html$1.appendChild(iframe); // https://github.com/zloirock/core-js/issues/475

  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
}; // Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug


var activeXDocument;

var NullProtoObject = function () {
  try {
    /* global ActiveXObject -- old IE */
    activeXDocument = document.domain && new ActiveXObject('htmlfile');
  } catch (error) {
    /* ignore */
  }

  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();
  var length = enumBugKeys$1.length;

  while (length--) delete NullProtoObject[PROTOTYPE$1][enumBugKeys$1[length]];

  return NullProtoObject();
};

hiddenKeys$3[IE_PROTO$1] = true; // `Object.create` method
// https://tc39.es/ecma262/#sec-object.create

var objectCreate = Object.create || function create(O, Properties) {
  var result;

  if (O !== null) {
    EmptyConstructor[PROTOTYPE$1] = anObject$8(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE$1] = null; // add "__proto__" for Object.getPrototypeOf polyfill

    result[IE_PROTO$1] = O;
  } else result = NullProtoObject();

  return Properties === undefined ? result : defineProperties(result, Properties);
};

var objectGetOwnPropertyNames = {};

var internalObjectKeys = objectKeysInternal;

var enumBugKeys = enumBugKeys$3;

var hiddenKeys$2 = enumBugKeys.concat('length', 'prototype'); // `Object.getOwnPropertyNames` method
// https://tc39.es/ecma262/#sec-object.getownpropertynames
// eslint-disable-next-line es/no-object-getownpropertynames -- safe

objectGetOwnPropertyNames.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys$2);
};

var objectGetOwnPropertyNamesExternal = {};

/* eslint-disable es/no-object-getownpropertynames -- safe */

var toIndexedObject$5 = toIndexedObject$9;

var $getOwnPropertyNames$1 = objectGetOwnPropertyNames.f;

var toString$1 = {}.toString;
var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return $getOwnPropertyNames$1(it);
  } catch (error) {
    return windowNames.slice();
  }
}; // fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window


objectGetOwnPropertyNamesExternal.f = function getOwnPropertyNames(it) {
  return windowNames && toString$1.call(it) == '[object Window]' ? getWindowNames(it) : $getOwnPropertyNames$1(toIndexedObject$5(it));
};

var objectGetOwnPropertySymbols = {};

// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe
objectGetOwnPropertySymbols.f = Object.getOwnPropertySymbols;

var createNonEnumerableProperty$7 = createNonEnumerableProperty$a;

var redefine$3 = function (target, key, value, options) {
  if (options && options.enumerable) target[key] = value;else createNonEnumerableProperty$7(target, key, value);
};

var wellKnownSymbolWrapped = {};

var wellKnownSymbol$h = wellKnownSymbol$k;

wellKnownSymbolWrapped.f = wellKnownSymbol$h;

var path$5 = path$a;

var has$5 = has$a;

var wrappedWellKnownSymbolModule$1 = wellKnownSymbolWrapped;

var defineProperty$1 = objectDefineProperty.f;

var defineWellKnownSymbol$1 = function (NAME) {
  var Symbol = path$5.Symbol || (path$5.Symbol = {});
  if (!has$5(Symbol, NAME)) defineProperty$1(Symbol, NAME, {
    value: wrappedWellKnownSymbolModule$1.f(NAME)
  });
};

var wellKnownSymbol$g = wellKnownSymbol$k;

var TO_STRING_TAG$3 = wellKnownSymbol$g('toStringTag');
var test = {};
test[TO_STRING_TAG$3] = 'z';
var toStringTagSupport = String(test) === '[object z]';

var TO_STRING_TAG_SUPPORT$2 = toStringTagSupport;

var classofRaw = classofRaw$1;

var wellKnownSymbol$f = wellKnownSymbol$k;

var TO_STRING_TAG$2 = wellKnownSymbol$f('toStringTag'); // ES3 wrong here

var CORRECT_ARGUMENTS = classofRaw(function () {
  return arguments;
}()) == 'Arguments'; // fallback for IE11 Script Access Denied error

var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) {
    /* empty */
  }
}; // getting tag from ES6+ `Object.prototype.toString`


var classof$6 = TO_STRING_TAG_SUPPORT$2 ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null' // @@toStringTag case
  : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG$2)) == 'string' ? tag // builtinTag case
  : CORRECT_ARGUMENTS ? classofRaw(O) // ES3 arguments fallback
  : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;
};

var TO_STRING_TAG_SUPPORT$1 = toStringTagSupport;

var classof$5 = classof$6; // `Object.prototype.toString` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.tostring


var objectToString = TO_STRING_TAG_SUPPORT$1 ? {}.toString : function toString() {
  return '[object ' + classof$5(this) + ']';
};

var TO_STRING_TAG_SUPPORT = toStringTagSupport;

var defineProperty = objectDefineProperty.f;

var createNonEnumerableProperty$6 = createNonEnumerableProperty$a;

var has$4 = has$a;

var toString = objectToString;

var wellKnownSymbol$e = wellKnownSymbol$k;

var TO_STRING_TAG$1 = wellKnownSymbol$e('toStringTag');

var setToStringTag$4 = function (it, TAG, STATIC, SET_METHOD) {
  if (it) {
    var target = STATIC ? it : it.prototype;

    if (!has$4(target, TO_STRING_TAG$1)) {
      defineProperty(target, TO_STRING_TAG$1, {
        configurable: true,
        value: TAG
      });
    }

    if (SET_METHOD && !TO_STRING_TAG_SUPPORT) {
      createNonEnumerableProperty$6(target, 'toString', toString);
    }
  }
};

var store$1 = sharedStore;

var functionToString = Function.toString; // this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper

if (typeof store$1.inspectSource != 'function') {
  store$1.inspectSource = function (it) {
    return functionToString.call(it);
  };
}

var inspectSource$2 = store$1.inspectSource;

var global$a = global$i;

var inspectSource$1 = inspectSource$2;

var WeakMap$1 = global$a.WeakMap;
var nativeWeakMap = typeof WeakMap$1 === 'function' && /native code/.test(inspectSource$1(WeakMap$1));

var NATIVE_WEAK_MAP = nativeWeakMap;

var global$9 = global$i;

var isObject$7 = isObject$c;

var createNonEnumerableProperty$5 = createNonEnumerableProperty$a;

var objectHas = has$a;

var shared$1 = sharedStore;

var sharedKey$2 = sharedKey$4;

var hiddenKeys$1 = hiddenKeys$5;

var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var WeakMap = global$9.WeakMap;
var set$1, get, has$3;

var enforce = function (it) {
  return has$3(it) ? get(it) : set$1(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;

    if (!isObject$7(it) || (state = get(it)).type !== TYPE) {
      throw TypeError('Incompatible receiver, ' + TYPE + ' required');
    }

    return state;
  };
};

if (NATIVE_WEAK_MAP || shared$1.state) {
  var store = shared$1.state || (shared$1.state = new WeakMap());
  var wmget = store.get;
  var wmhas = store.has;
  var wmset = store.set;

  set$1 = function (it, metadata) {
    if (wmhas.call(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    wmset.call(store, it, metadata);
    return metadata;
  };

  get = function (it) {
    return wmget.call(store, it) || {};
  };

  has$3 = function (it) {
    return wmhas.call(store, it);
  };
} else {
  var STATE = sharedKey$2('state');
  hiddenKeys$1[STATE] = true;

  set$1 = function (it, metadata) {
    if (objectHas(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    createNonEnumerableProperty$5(it, STATE, metadata);
    return metadata;
  };

  get = function (it) {
    return objectHas(it, STATE) ? it[STATE] : {};
  };

  has$3 = function (it) {
    return objectHas(it, STATE);
  };
}

var internalState = {
  set: set$1,
  get: get,
  has: has$3,
  enforce: enforce,
  getterFor: getterFor
};

var $$l = _export;

var global$8 = global$i;

var getBuiltIn$5 = getBuiltIn$8;

var DESCRIPTORS$3 = descriptors;

var NATIVE_SYMBOL = nativeSymbol;

var USE_SYMBOL_AS_UID = useSymbolAsUid;

var fails$7 = fails$f;

var has$2 = has$a;

var isArray$3 = isArray$5;

var isObject$6 = isObject$c;

var anObject$7 = anObject$b;

var toObject$6 = toObject$a;

var toIndexedObject$4 = toIndexedObject$9;

var toPrimitive$1 = toPrimitive$4;

var createPropertyDescriptor$3 = createPropertyDescriptor$6;

var nativeObjectCreate = objectCreate;

var objectKeys = objectKeys$2;

var getOwnPropertyNamesModule$1 = objectGetOwnPropertyNames;

var getOwnPropertyNamesExternal = objectGetOwnPropertyNamesExternal;

var getOwnPropertySymbolsModule$1 = objectGetOwnPropertySymbols;

var getOwnPropertyDescriptorModule$1 = objectGetOwnPropertyDescriptor;

var definePropertyModule$2 = objectDefineProperty;

var propertyIsEnumerableModule = objectPropertyIsEnumerable;

var createNonEnumerableProperty$4 = createNonEnumerableProperty$a;

var redefine$2 = redefine$3;

var shared = shared$4.exports;

var sharedKey$1 = sharedKey$4;

var hiddenKeys = hiddenKeys$5;

var uid = uid$3;

var wellKnownSymbol$d = wellKnownSymbol$k;

var wrappedWellKnownSymbolModule = wellKnownSymbolWrapped;

var defineWellKnownSymbol = defineWellKnownSymbol$1;

var setToStringTag$3 = setToStringTag$4;

var InternalStateModule$3 = internalState;

var $forEach = arrayIteration.forEach;

var HIDDEN = sharedKey$1('hidden');
var SYMBOL = 'Symbol';
var PROTOTYPE = 'prototype';
var TO_PRIMITIVE = wellKnownSymbol$d('toPrimitive');
var setInternalState$3 = InternalStateModule$3.set;
var getInternalState$3 = InternalStateModule$3.getterFor(SYMBOL);
var ObjectPrototype$1 = Object[PROTOTYPE];
var $Symbol = global$8.Symbol;
var $stringify = getBuiltIn$5('JSON', 'stringify');
var nativeGetOwnPropertyDescriptor$1 = getOwnPropertyDescriptorModule$1.f;
var nativeDefineProperty = definePropertyModule$2.f;
var nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;
var nativePropertyIsEnumerable = propertyIsEnumerableModule.f;
var AllSymbols = shared('symbols');
var ObjectPrototypeSymbols = shared('op-symbols');
var StringToSymbolRegistry = shared('string-to-symbol-registry');
var SymbolToStringRegistry = shared('symbol-to-string-registry');
var WellKnownSymbolsStore = shared('wks');
var QObject = global$8.QObject; // Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173

var USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild; // fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687

var setSymbolDescriptor = DESCRIPTORS$3 && fails$7(function () {
  return nativeObjectCreate(nativeDefineProperty({}, 'a', {
    get: function () {
      return nativeDefineProperty(this, 'a', {
        value: 7
      }).a;
    }
  })).a != 7;
}) ? function (O, P, Attributes) {
  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor$1(ObjectPrototype$1, P);
  if (ObjectPrototypeDescriptor) delete ObjectPrototype$1[P];
  nativeDefineProperty(O, P, Attributes);

  if (ObjectPrototypeDescriptor && O !== ObjectPrototype$1) {
    nativeDefineProperty(ObjectPrototype$1, P, ObjectPrototypeDescriptor);
  }
} : nativeDefineProperty;

var wrap = function (tag, description) {
  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);
  setInternalState$3(symbol, {
    type: SYMBOL,
    tag: tag,
    description: description
  });
  if (!DESCRIPTORS$3) symbol.description = description;
  return symbol;
};

var isSymbol = USE_SYMBOL_AS_UID ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  return Object(it) instanceof $Symbol;
};

var $defineProperty = function defineProperty(O, P, Attributes) {
  if (O === ObjectPrototype$1) $defineProperty(ObjectPrototypeSymbols, P, Attributes);
  anObject$7(O);
  var key = toPrimitive$1(P, true);
  anObject$7(Attributes);

  if (has$2(AllSymbols, key)) {
    if (!Attributes.enumerable) {
      if (!has$2(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor$3(1, {}));
      O[HIDDEN][key] = true;
    } else {
      if (has$2(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;
      Attributes = nativeObjectCreate(Attributes, {
        enumerable: createPropertyDescriptor$3(0, false)
      });
    }

    return setSymbolDescriptor(O, key, Attributes);
  }

  return nativeDefineProperty(O, key, Attributes);
};

var $defineProperties = function defineProperties(O, Properties) {
  anObject$7(O);
  var properties = toIndexedObject$4(Properties);
  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));
  $forEach(keys, function (key) {
    if (!DESCRIPTORS$3 || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);
  });
  return O;
};

var $create = function create(O, Properties) {
  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);
};

var $propertyIsEnumerable = function propertyIsEnumerable(V) {
  var P = toPrimitive$1(V, true);
  var enumerable = nativePropertyIsEnumerable.call(this, P);
  if (this === ObjectPrototype$1 && has$2(AllSymbols, P) && !has$2(ObjectPrototypeSymbols, P)) return false;
  return enumerable || !has$2(this, P) || !has$2(AllSymbols, P) || has$2(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;
};

var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {
  var it = toIndexedObject$4(O);
  var key = toPrimitive$1(P, true);
  if (it === ObjectPrototype$1 && has$2(AllSymbols, key) && !has$2(ObjectPrototypeSymbols, key)) return;
  var descriptor = nativeGetOwnPropertyDescriptor$1(it, key);

  if (descriptor && has$2(AllSymbols, key) && !(has$2(it, HIDDEN) && it[HIDDEN][key])) {
    descriptor.enumerable = true;
  }

  return descriptor;
};

var $getOwnPropertyNames = function getOwnPropertyNames(O) {
  var names = nativeGetOwnPropertyNames(toIndexedObject$4(O));
  var result = [];
  $forEach(names, function (key) {
    if (!has$2(AllSymbols, key) && !has$2(hiddenKeys, key)) result.push(key);
  });
  return result;
};

var $getOwnPropertySymbols = function getOwnPropertySymbols(O) {
  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype$1;
  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject$4(O));
  var result = [];
  $forEach(names, function (key) {
    if (has$2(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has$2(ObjectPrototype$1, key))) {
      result.push(AllSymbols[key]);
    }
  });
  return result;
}; // `Symbol` constructor
// https://tc39.es/ecma262/#sec-symbol-constructor


if (!NATIVE_SYMBOL) {
  $Symbol = function Symbol() {
    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');
    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);
    var tag = uid(description);

    var setter = function (value) {
      if (this === ObjectPrototype$1) setter.call(ObjectPrototypeSymbols, value);
      if (has$2(this, HIDDEN) && has$2(this[HIDDEN], tag)) this[HIDDEN][tag] = false;
      setSymbolDescriptor(this, tag, createPropertyDescriptor$3(1, value));
    };

    if (DESCRIPTORS$3 && USE_SETTER) setSymbolDescriptor(ObjectPrototype$1, tag, {
      configurable: true,
      set: setter
    });
    return wrap(tag, description);
  };

  redefine$2($Symbol[PROTOTYPE], 'toString', function toString() {
    return getInternalState$3(this).tag;
  });
  redefine$2($Symbol, 'withoutSetter', function (description) {
    return wrap(uid(description), description);
  });
  propertyIsEnumerableModule.f = $propertyIsEnumerable;
  definePropertyModule$2.f = $defineProperty;
  getOwnPropertyDescriptorModule$1.f = $getOwnPropertyDescriptor;
  getOwnPropertyNamesModule$1.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;
  getOwnPropertySymbolsModule$1.f = $getOwnPropertySymbols;

  wrappedWellKnownSymbolModule.f = function (name) {
    return wrap(wellKnownSymbol$d(name), name);
  };

  if (DESCRIPTORS$3) {
    // https://github.com/tc39/proposal-Symbol-description
    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {
      configurable: true,
      get: function description() {
        return getInternalState$3(this).description;
      }
    });
  }
}

$$l({
  global: true,
  wrap: true,
  forced: !NATIVE_SYMBOL,
  sham: !NATIVE_SYMBOL
}, {
  Symbol: $Symbol
});
$forEach(objectKeys(WellKnownSymbolsStore), function (name) {
  defineWellKnownSymbol(name);
});
$$l({
  target: SYMBOL,
  stat: true,
  forced: !NATIVE_SYMBOL
}, {
  // `Symbol.for` method
  // https://tc39.es/ecma262/#sec-symbol.for
  'for': function (key) {
    var string = String(key);
    if (has$2(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];
    var symbol = $Symbol(string);
    StringToSymbolRegistry[string] = symbol;
    SymbolToStringRegistry[symbol] = string;
    return symbol;
  },
  // `Symbol.keyFor` method
  // https://tc39.es/ecma262/#sec-symbol.keyfor
  keyFor: function keyFor(sym) {
    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');
    if (has$2(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];
  },
  useSetter: function () {
    USE_SETTER = true;
  },
  useSimple: function () {
    USE_SETTER = false;
  }
});
$$l({
  target: 'Object',
  stat: true,
  forced: !NATIVE_SYMBOL,
  sham: !DESCRIPTORS$3
}, {
  // `Object.create` method
  // https://tc39.es/ecma262/#sec-object.create
  create: $create,
  // `Object.defineProperty` method
  // https://tc39.es/ecma262/#sec-object.defineproperty
  defineProperty: $defineProperty,
  // `Object.defineProperties` method
  // https://tc39.es/ecma262/#sec-object.defineproperties
  defineProperties: $defineProperties,
  // `Object.getOwnPropertyDescriptor` method
  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor
});
$$l({
  target: 'Object',
  stat: true,
  forced: !NATIVE_SYMBOL
}, {
  // `Object.getOwnPropertyNames` method
  // https://tc39.es/ecma262/#sec-object.getownpropertynames
  getOwnPropertyNames: $getOwnPropertyNames,
  // `Object.getOwnPropertySymbols` method
  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols
  getOwnPropertySymbols: $getOwnPropertySymbols
}); // Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives
// https://bugs.chromium.org/p/v8/issues/detail?id=3443

$$l({
  target: 'Object',
  stat: true,
  forced: fails$7(function () {
    getOwnPropertySymbolsModule$1.f(1);
  })
}, {
  getOwnPropertySymbols: function getOwnPropertySymbols(it) {
    return getOwnPropertySymbolsModule$1.f(toObject$6(it));
  }
}); // `JSON.stringify` method behavior with symbols
// https://tc39.es/ecma262/#sec-json.stringify

if ($stringify) {
  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails$7(function () {
    var symbol = $Symbol(); // MS Edge converts symbol values to JSON as {}

    return $stringify([symbol]) != '[null]' // WebKit converts symbol values to JSON as null
    || $stringify({
      a: symbol
    }) != '{}' // V8 throws on boxed symbols
    || $stringify(Object(symbol)) != '{}';
  });
  $$l({
    target: 'JSON',
    stat: true,
    forced: FORCED_JSON_STRINGIFY
  }, {
    // eslint-disable-next-line no-unused-vars -- required for `.length`
    stringify: function stringify(it, replacer, space) {
      var args = [it];
      var index = 1;
      var $replacer;

      while (arguments.length > index) args.push(arguments[index++]);

      $replacer = replacer;
      if (!isObject$6(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined

      if (!isArray$3(replacer)) replacer = function (key, value) {
        if (typeof $replacer == 'function') value = $replacer.call(this, key, value);
        if (!isSymbol(value)) return value;
      };
      args[1] = replacer;
      return $stringify.apply(null, args);
    }
  });
} // `Symbol.prototype[@@toPrimitive]` method
// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive


if (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {
  createNonEnumerableProperty$4($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);
} // `Symbol.prototype[@@toStringTag]` property
// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag


setToStringTag$3($Symbol, SYMBOL);
hiddenKeys[HIDDEN] = true;

var path$4 = path$a;

var getOwnPropertySymbols$1 = path$4.Object.getOwnPropertySymbols;

var parent$g = getOwnPropertySymbols$1;

var getOwnPropertySymbols = parent$g;

var $$k = _export;

var $filter = arrayIteration.filter;

var arrayMethodHasSpeciesSupport$3 = arrayMethodHasSpeciesSupport$5;

var HAS_SPECIES_SUPPORT$2 = arrayMethodHasSpeciesSupport$3('filter'); // `Array.prototype.filter` method
// https://tc39.es/ecma262/#sec-array.prototype.filter
// with adding support of @@species

$$k({
  target: 'Array',
  proto: true,
  forced: !HAS_SPECIES_SUPPORT$2
}, {
  filter: function filter(callbackfn
  /* , thisArg */
  ) {
    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});

var entryVirtual$c = entryVirtual$e;

var filter$2 = entryVirtual$c('Array').filter;

var filter$1 = filter$2;

var ArrayPrototype$9 = Array.prototype;

var filter_1 = function (it) {
  var own = it.filter;
  return it === ArrayPrototype$9 || it instanceof Array && own === ArrayPrototype$9.filter ? filter$1 : own;
};

var parent$f = filter_1;

var filter = parent$f;

var getOwnPropertyDescriptor$3 = {exports: {}};

var $$j = _export;

var fails$6 = fails$f;

var toIndexedObject$3 = toIndexedObject$9;

var nativeGetOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;

var DESCRIPTORS$2 = descriptors;

var FAILS_ON_PRIMITIVES = fails$6(function () {
  nativeGetOwnPropertyDescriptor(1);
});
var FORCED$2 = !DESCRIPTORS$2 || FAILS_ON_PRIMITIVES; // `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor

$$j({
  target: 'Object',
  stat: true,
  forced: FORCED$2,
  sham: !DESCRIPTORS$2
}, {
  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {
    return nativeGetOwnPropertyDescriptor(toIndexedObject$3(it), key);
  }
});

var path$3 = path$a;

var Object$1 = path$3.Object;

var getOwnPropertyDescriptor$2 = getOwnPropertyDescriptor$3.exports = function getOwnPropertyDescriptor(it, key) {
  return Object$1.getOwnPropertyDescriptor(it, key);
};

if (Object$1.getOwnPropertyDescriptor.sham) getOwnPropertyDescriptor$2.sham = true;

var parent$e = getOwnPropertyDescriptor$3.exports;

var getOwnPropertyDescriptor$1 = parent$e;

var getBuiltIn$4 = getBuiltIn$8;

var getOwnPropertyNamesModule = objectGetOwnPropertyNames;

var getOwnPropertySymbolsModule = objectGetOwnPropertySymbols;

var anObject$6 = anObject$b; // all object keys, includes non-enumerable and symbols


var ownKeys$G = getBuiltIn$4('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject$6(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;
};

var toPrimitive = toPrimitive$4;

var definePropertyModule$1 = objectDefineProperty;

var createPropertyDescriptor$2 = createPropertyDescriptor$6;

var createProperty$5 = function (object, key, value) {
  var propertyKey = toPrimitive(key);
  if (propertyKey in object) definePropertyModule$1.f(object, propertyKey, createPropertyDescriptor$2(0, value));else object[propertyKey] = value;
};

var $$i = _export;

var DESCRIPTORS$1 = descriptors;

var ownKeys$F = ownKeys$G;

var toIndexedObject$2 = toIndexedObject$9;

var getOwnPropertyDescriptorModule = objectGetOwnPropertyDescriptor;

var createProperty$4 = createProperty$5; // `Object.getOwnPropertyDescriptors` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors


$$i({
  target: 'Object',
  stat: true,
  sham: !DESCRIPTORS$1
}, {
  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
    var O = toIndexedObject$2(object);
    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
    var keys = ownKeys$F(O);
    var result = {};
    var index = 0;
    var key, descriptor;

    while (keys.length > index) {
      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);
      if (descriptor !== undefined) createProperty$4(result, key, descriptor);
    }

    return result;
  }
});

var path$2 = path$a;

var getOwnPropertyDescriptors$1 = path$2.Object.getOwnPropertyDescriptors;

var parent$d = getOwnPropertyDescriptors$1;

var getOwnPropertyDescriptors = parent$d;

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = _objectWithoutPropertiesLoose(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

var fails$5 = fails$f;

var correctPrototypeGetter = !fails$5(function () {
  function F() {
    /* empty */
  }

  F.prototype.constructor = null; // eslint-disable-next-line es/no-object-getprototypeof -- required for testing

  return Object.getPrototypeOf(new F()) !== F.prototype;
});

var has$1 = has$a;

var toObject$5 = toObject$a;

var sharedKey = sharedKey$4;

var CORRECT_PROTOTYPE_GETTER = correctPrototypeGetter;

var IE_PROTO = sharedKey('IE_PROTO');
var ObjectPrototype = Object.prototype; // `Object.getPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.getprototypeof
// eslint-disable-next-line es/no-object-getprototypeof -- safe

var objectGetPrototypeOf = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {
  O = toObject$5(O);
  if (has$1(O, IE_PROTO)) return O[IE_PROTO];

  if (typeof O.constructor == 'function' && O instanceof O.constructor) {
    return O.constructor.prototype;
  }

  return O instanceof Object ? ObjectPrototype : null;
};

var isObject$5 = isObject$c;

var aPossiblePrototype$1 = function (it) {
  if (!isObject$5(it) && it !== null) {
    throw TypeError("Can't set " + String(it) + ' as a prototype');
  }

  return it;
};

/* eslint-disable no-proto -- safe */

var anObject$5 = anObject$b;

var aPossiblePrototype = aPossiblePrototype$1; // `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
// eslint-disable-next-line es/no-object-setprototypeof -- safe


var objectSetPrototypeOf = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;

  try {
    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;
    setter.call(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) {
    /* empty */
  }

  return function setPrototypeOf(O, proto) {
    anObject$5(O);
    aPossiblePrototype(proto);
    if (CORRECT_SETTER) setter.call(O, proto);else O.__proto__ = proto;
    return O;
  };
}() : undefined);

var iterators = {};

var wellKnownSymbol$c = wellKnownSymbol$k;

var Iterators$5 = iterators;

var ITERATOR$4 = wellKnownSymbol$c('iterator');
var ArrayPrototype$8 = Array.prototype; // check on default Array iterator

var isArrayIteratorMethod$2 = function (it) {
  return it !== undefined && (Iterators$5.Array === it || ArrayPrototype$8[ITERATOR$4] === it);
};

var classof$4 = classof$6;

var Iterators$4 = iterators;

var wellKnownSymbol$b = wellKnownSymbol$k;

var ITERATOR$3 = wellKnownSymbol$b('iterator');

var getIteratorMethod$2 = function (it) {
  if (it != undefined) return it[ITERATOR$3] || it['@@iterator'] || Iterators$4[classof$4(it)];
};

var anObject$4 = anObject$b;

var iteratorClose$2 = function (iterator) {
  var returnMethod = iterator['return'];

  if (returnMethod !== undefined) {
    return anObject$4(returnMethod.call(iterator)).value;
  }
};

var anObject$3 = anObject$b;

var isArrayIteratorMethod$1 = isArrayIteratorMethod$2;

var toLength$9 = toLength$c;

var bind$4 = functionBindContext;

var getIteratorMethod$1 = getIteratorMethod$2;

var iteratorClose$1 = iteratorClose$2;

var Result = function (stopped, result) {
  this.stopped = stopped;
  this.result = result;
};

var iterate$4 = function (iterable, unboundFunction, options) {
  var that = options && options.that;
  var AS_ENTRIES = !!(options && options.AS_ENTRIES);
  var IS_ITERATOR = !!(options && options.IS_ITERATOR);
  var INTERRUPTED = !!(options && options.INTERRUPTED);
  var fn = bind$4(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);
  var iterator, iterFn, index, length, result, next, step;

  var stop = function (condition) {
    if (iterator) iteratorClose$1(iterator);
    return new Result(true, condition);
  };

  var callFn = function (value) {
    if (AS_ENTRIES) {
      anObject$3(value);
      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
    }

    return INTERRUPTED ? fn(value, stop) : fn(value);
  };

  if (IS_ITERATOR) {
    iterator = iterable;
  } else {
    iterFn = getIteratorMethod$1(iterable);
    if (typeof iterFn != 'function') throw TypeError('Target is not iterable'); // optimisation for array iterators

    if (isArrayIteratorMethod$1(iterFn)) {
      for (index = 0, length = toLength$9(iterable.length); length > index; index++) {
        result = callFn(iterable[index]);
        if (result && result instanceof Result) return result;
      }

      return new Result(false);
    }

    iterator = iterFn.call(iterable);
  }

  next = iterator.next;

  while (!(step = next.call(iterator)).done) {
    try {
      result = callFn(step.value);
    } catch (error) {
      iteratorClose$1(iterator);
      throw error;
    }

    if (typeof result == 'object' && result && result instanceof Result) return result;
  }

  return new Result(false);
};

var $$h = _export;

var getPrototypeOf$2 = objectGetPrototypeOf;

var setPrototypeOf = objectSetPrototypeOf;

var create$1 = objectCreate;

var createNonEnumerableProperty$3 = createNonEnumerableProperty$a;

var createPropertyDescriptor$1 = createPropertyDescriptor$6;

var iterate$3 = iterate$4;

var $AggregateError = function AggregateError(errors, message) {
  var that = this;
  if (!(that instanceof $AggregateError)) return new $AggregateError(errors, message);

  if (setPrototypeOf) {
    // eslint-disable-next-line unicorn/error-message -- expected
    that = setPrototypeOf(new Error(undefined), getPrototypeOf$2(that));
  }

  if (message !== undefined) createNonEnumerableProperty$3(that, 'message', String(message));
  var errorsArray = [];
  iterate$3(errors, errorsArray.push, {
    that: errorsArray
  });
  createNonEnumerableProperty$3(that, 'errors', errorsArray);
  return that;
};

$AggregateError.prototype = create$1(Error.prototype, {
  constructor: createPropertyDescriptor$1(5, $AggregateError),
  message: createPropertyDescriptor$1(5, ''),
  name: createPropertyDescriptor$1(5, 'AggregateError')
}); // `AggregateError` constructor
// https://tc39.es/ecma262/#sec-aggregate-error-constructor

$$h({
  global: true
}, {
  AggregateError: $AggregateError
});

var global$7 = global$i;

var nativePromiseConstructor = global$7.Promise;

var redefine$1 = redefine$3;

var redefineAll$1 = function (target, src, options) {
  for (var key in src) {
    if (options && options.unsafe && target[key]) target[key] = src[key];else redefine$1(target, key, src[key], options);
  }

  return target;
};

var getBuiltIn$3 = getBuiltIn$8;

var definePropertyModule = objectDefineProperty;

var wellKnownSymbol$a = wellKnownSymbol$k;

var DESCRIPTORS = descriptors;

var SPECIES$3 = wellKnownSymbol$a('species');

var setSpecies$1 = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn$3(CONSTRUCTOR_NAME);
  var defineProperty = definePropertyModule.f;

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES$3]) {
    defineProperty(Constructor, SPECIES$3, {
      configurable: true,
      get: function () {
        return this;
      }
    });
  }
};

var anInstance$1 = function (it, Constructor, name) {
  if (!(it instanceof Constructor)) {
    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');
  }

  return it;
};

var wellKnownSymbol$9 = wellKnownSymbol$k;

var ITERATOR$2 = wellKnownSymbol$9('iterator');
var SAFE_CLOSING = false;

try {
  var called = 0;
  var iteratorWithReturn = {
    next: function () {
      return {
        done: !!called++
      };
    },
    'return': function () {
      SAFE_CLOSING = true;
    }
  };

  iteratorWithReturn[ITERATOR$2] = function () {
    return this;
  }; // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing


  Array.from(iteratorWithReturn, function () {
    throw 2;
  });
} catch (error) {
  /* empty */
}

var checkCorrectnessOfIteration$2 = function (exec, SKIP_CLOSING) {
  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;
  var ITERATION_SUPPORT = false;

  try {
    var object = {};

    object[ITERATOR$2] = function () {
      return {
        next: function () {
          return {
            done: ITERATION_SUPPORT = true
          };
        }
      };
    };

    exec(object);
  } catch (error) {
    /* empty */
  }

  return ITERATION_SUPPORT;
};

var anObject$2 = anObject$b;

var aFunction$4 = aFunction$7;

var wellKnownSymbol$8 = wellKnownSymbol$k;

var SPECIES$2 = wellKnownSymbol$8('species'); // `SpeciesConstructor` abstract operation
// https://tc39.es/ecma262/#sec-speciesconstructor

var speciesConstructor$2 = function (O, defaultConstructor) {
  var C = anObject$2(O).constructor;
  var S;
  return C === undefined || (S = anObject$2(C)[SPECIES$2]) == undefined ? defaultConstructor : aFunction$4(S);
};

var userAgent$2 = engineUserAgent;

var engineIsIos = /(?:iphone|ipod|ipad).*applewebkit/i.test(userAgent$2);

var classof$3 = classofRaw$1;

var global$6 = global$i;

var engineIsNode = classof$3(global$6.process) == 'process';

var global$5 = global$i;

var fails$4 = fails$f;

var bind$3 = functionBindContext;

var html = html$2;

var createElement = documentCreateElement$1;

var IS_IOS$1 = engineIsIos;

var IS_NODE$2 = engineIsNode;

var location = global$5.location;
var set = global$5.setImmediate;
var clear = global$5.clearImmediate;
var process$2 = global$5.process;
var MessageChannel = global$5.MessageChannel;
var Dispatch = global$5.Dispatch;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var defer, channel, port;

var run = function (id) {
  // eslint-disable-next-line no-prototype-builtins -- safe
  if (queue.hasOwnProperty(id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};

var runner = function (id) {
  return function () {
    run(id);
  };
};

var listener = function (event) {
  run(event.data);
};

var post = function (id) {
  // old engines have not location.origin
  global$5.postMessage(id + '', location.protocol + '//' + location.host);
}; // Node.js 0.9+ & IE10+ has setImmediate, otherwise:


if (!set || !clear) {
  set = function setImmediate(fn) {
    var args = [];
    var i = 1;

    while (arguments.length > i) args.push(arguments[i++]);

    queue[++counter] = function () {
      // eslint-disable-next-line no-new-func -- spec requirement
      (typeof fn == 'function' ? fn : Function(fn)).apply(undefined, args);
    };

    defer(counter);
    return counter;
  };

  clear = function clearImmediate(id) {
    delete queue[id];
  }; // Node.js 0.8-


  if (IS_NODE$2) {
    defer = function (id) {
      process$2.nextTick(runner(id));
    }; // Sphere (JS game engine) Dispatch API

  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(runner(id));
    }; // Browsers with MessageChannel, includes WebWorkers
    // except iOS - https://github.com/zloirock/core-js/issues/624

  } else if (MessageChannel && !IS_IOS$1) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = listener;
    defer = bind$3(port.postMessage, port, 1); // Browsers with postMessage, skip WebWorkers
    // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (global$5.addEventListener && typeof postMessage == 'function' && !global$5.importScripts && location && location.protocol !== 'file:' && !fails$4(post)) {
    defer = post;
    global$5.addEventListener('message', listener, false); // IE8-
  } else if (ONREADYSTATECHANGE in createElement('script')) {
    defer = function (id) {
      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run(id);
      };
    }; // Rest old browsers

  } else {
    defer = function (id) {
      setTimeout(runner(id), 0);
    };
  }
}

var task$1 = {
  set: set,
  clear: clear
};

var userAgent$1 = engineUserAgent;

var engineIsWebosWebkit = /web0s(?!.*chrome)/i.test(userAgent$1);

var global$4 = global$i;

var getOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;

var macrotask = task$1.set;

var IS_IOS = engineIsIos;

var IS_WEBOS_WEBKIT = engineIsWebosWebkit;

var IS_NODE$1 = engineIsNode;

var MutationObserver = global$4.MutationObserver || global$4.WebKitMutationObserver;
var document$2 = global$4.document;
var process$1 = global$4.process;
var Promise$1 = global$4.Promise; // Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`

var queueMicrotaskDescriptor = getOwnPropertyDescriptor(global$4, 'queueMicrotask');
var queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;
var flush, head, last, notify$1, toggle, node, promise$2, then; // modern engines have queueMicrotask method

if (!queueMicrotask) {
  flush = function () {
    var parent, fn;
    if (IS_NODE$1 && (parent = process$1.domain)) parent.exit();

    while (head) {
      fn = head.fn;
      head = head.next;

      try {
        fn();
      } catch (error) {
        if (head) notify$1();else last = undefined;
        throw error;
      }
    }

    last = undefined;
    if (parent) parent.enter();
  }; // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339
  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898


  if (!IS_IOS && !IS_NODE$1 && !IS_WEBOS_WEBKIT && MutationObserver && document$2) {
    toggle = true;
    node = document$2.createTextNode('');
    new MutationObserver(flush).observe(node, {
      characterData: true
    });

    notify$1 = function () {
      node.data = toggle = !toggle;
    }; // environments with maybe non-completely correct, but existent Promise

  } else if (Promise$1 && Promise$1.resolve) {
    // Promise.resolve without an argument throws an error in LG WebOS 2
    promise$2 = Promise$1.resolve(undefined); // workaround of WebKit ~ iOS Safari 10.1 bug

    promise$2.constructor = Promise$1;
    then = promise$2.then;

    notify$1 = function () {
      then.call(promise$2, flush);
    }; // Node.js without promises

  } else if (IS_NODE$1) {
    notify$1 = function () {
      process$1.nextTick(flush);
    }; // for other environments - macrotask based on:
    // - setImmediate
    // - MessageChannel
    // - window.postMessag
    // - onreadystatechange
    // - setTimeout

  } else {
    notify$1 = function () {
      // strange IE + webpack dev server bug - use .call(global)
      macrotask.call(global$4, flush);
    };
  }
}

var microtask$1 = queueMicrotask || function (fn) {
  var task = {
    fn: fn,
    next: undefined
  };
  if (last) last.next = task;

  if (!head) {
    head = task;
    notify$1();
  }

  last = task;
};

var newPromiseCapability$2 = {};

var aFunction$3 = aFunction$7;

var PromiseCapability = function (C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aFunction$3(resolve);
  this.reject = aFunction$3(reject);
}; // `NewPromiseCapability` abstract operation
// https://tc39.es/ecma262/#sec-newpromisecapability


newPromiseCapability$2.f = function (C) {
  return new PromiseCapability(C);
};

var anObject$1 = anObject$b;

var isObject$4 = isObject$c;

var newPromiseCapability$1 = newPromiseCapability$2;

var promiseResolve$2 = function (C, x) {
  anObject$1(C);
  if (isObject$4(x) && x.constructor === C) return x;
  var promiseCapability = newPromiseCapability$1.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};

var global$3 = global$i;

var hostReportErrors$1 = function (a, b) {
  var console = global$3.console;

  if (console && console.error) {
    arguments.length === 1 ? console.error(a) : console.error(a, b);
  }
};

var perform$3 = function (exec) {
  try {
    return {
      error: false,
      value: exec()
    };
  } catch (error) {
    return {
      error: true,
      value: error
    };
  }
};

var engineIsBrowser = typeof window == 'object';

var $$g = _export;

var IS_PURE = isPure;

var global$2 = global$i;

var getBuiltIn$2 = getBuiltIn$8;

var NativePromise$1 = nativePromiseConstructor;

var redefineAll = redefineAll$1;

var setToStringTag$2 = setToStringTag$4;

var setSpecies = setSpecies$1;

var isObject$3 = isObject$c;

var aFunction$2 = aFunction$7;

var anInstance = anInstance$1;

var inspectSource = inspectSource$2;

var iterate$2 = iterate$4;

var checkCorrectnessOfIteration$1 = checkCorrectnessOfIteration$2;

var speciesConstructor$1 = speciesConstructor$2;

var task = task$1.set;

var microtask = microtask$1;

var promiseResolve$1 = promiseResolve$2;

var hostReportErrors = hostReportErrors$1;

var newPromiseCapabilityModule$2 = newPromiseCapability$2;

var perform$2 = perform$3;

var InternalStateModule$2 = internalState;

var isForced = isForced_1;

var wellKnownSymbol$7 = wellKnownSymbol$k;

var IS_BROWSER = engineIsBrowser;

var IS_NODE = engineIsNode;

var V8_VERSION$1 = engineV8Version;

var SPECIES$1 = wellKnownSymbol$7('species');
var PROMISE = 'Promise';
var getInternalState$2 = InternalStateModule$2.get;
var setInternalState$2 = InternalStateModule$2.set;
var getInternalPromiseState = InternalStateModule$2.getterFor(PROMISE);
var NativePromisePrototype = NativePromise$1 && NativePromise$1.prototype;
var PromiseConstructor = NativePromise$1;
var PromiseConstructorPrototype = NativePromisePrototype;
var TypeError$1 = global$2.TypeError;
var document$1 = global$2.document;
var process = global$2.process;
var newPromiseCapability = newPromiseCapabilityModule$2.f;
var newGenericPromiseCapability = newPromiseCapability;
var DISPATCH_EVENT = !!(document$1 && document$1.createEvent && global$2.dispatchEvent);
var NATIVE_REJECTION_EVENT = typeof PromiseRejectionEvent == 'function';
var UNHANDLED_REJECTION = 'unhandledrejection';
var REJECTION_HANDLED = 'rejectionhandled';
var PENDING = 0;
var FULFILLED = 1;
var REJECTED = 2;
var HANDLED = 1;
var UNHANDLED = 2;
var SUBCLASSING = false;
var Internal, OwnPromiseCapability, PromiseWrapper;
var FORCED$1 = isForced(PROMISE, function () {
  var GLOBAL_CORE_JS_PROMISE = inspectSource(PromiseConstructor) !== String(PromiseConstructor); // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables
  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565
  // We can't detect it synchronously, so just check versions

  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION$1 === 66) return true; // We need Promise#finally in the pure version for preventing prototype pollution

  if (!PromiseConstructorPrototype['finally']) return true; // We can't use @@species feature detection in V8 since it causes
  // deoptimization and performance degradation
  // https://github.com/zloirock/core-js/issues/679

  if (V8_VERSION$1 >= 51 && /native code/.test(PromiseConstructor)) return false; // Detect correctness of subclassing with @@species support

  var promise = new PromiseConstructor(function (resolve) {
    resolve(1);
  });

  var FakePromise = function (exec) {
    exec(function () {
      /* empty */
    }, function () {
      /* empty */
    });
  };

  var constructor = promise.constructor = {};
  constructor[SPECIES$1] = FakePromise;
  SUBCLASSING = promise.then(function () {
    /* empty */
  }) instanceof FakePromise;
  if (!SUBCLASSING) return true; // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test

  return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_REJECTION_EVENT;
});
var INCORRECT_ITERATION$1 = FORCED$1 || !checkCorrectnessOfIteration$1(function (iterable) {
  PromiseConstructor.all(iterable)['catch'](function () {
    /* empty */
  });
}); // helpers

var isThenable = function (it) {
  var then;
  return isObject$3(it) && typeof (then = it.then) == 'function' ? then : false;
};

var notify = function (state, isReject) {
  if (state.notified) return;
  state.notified = true;
  var chain = state.reactions;
  microtask(function () {
    var value = state.value;
    var ok = state.state == FULFILLED;
    var index = 0; // variable length - can't use forEach

    while (chain.length > index) {
      var reaction = chain[index++];
      var handler = ok ? reaction.ok : reaction.fail;
      var resolve = reaction.resolve;
      var reject = reaction.reject;
      var domain = reaction.domain;
      var result, then, exited;

      try {
        if (handler) {
          if (!ok) {
            if (state.rejection === UNHANDLED) onHandleUnhandled(state);
            state.rejection = HANDLED;
          }

          if (handler === true) result = value;else {
            if (domain) domain.enter();
            result = handler(value); // can throw

            if (domain) {
              domain.exit();
              exited = true;
            }
          }

          if (result === reaction.promise) {
            reject(TypeError$1('Promise-chain cycle'));
          } else if (then = isThenable(result)) {
            then.call(result, resolve, reject);
          } else resolve(result);
        } else reject(value);
      } catch (error) {
        if (domain && !exited) domain.exit();
        reject(error);
      }
    }

    state.reactions = [];
    state.notified = false;
    if (isReject && !state.rejection) onUnhandled(state);
  });
};

var dispatchEvent = function (name, promise, reason) {
  var event, handler;

  if (DISPATCH_EVENT) {
    event = document$1.createEvent('Event');
    event.promise = promise;
    event.reason = reason;
    event.initEvent(name, false, true);
    global$2.dispatchEvent(event);
  } else event = {
    promise: promise,
    reason: reason
  };

  if (!NATIVE_REJECTION_EVENT && (handler = global$2['on' + name])) handler(event);else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);
};

var onUnhandled = function (state) {
  task.call(global$2, function () {
    var promise = state.facade;
    var value = state.value;
    var IS_UNHANDLED = isUnhandled(state);
    var result;

    if (IS_UNHANDLED) {
      result = perform$2(function () {
        if (IS_NODE) {
          process.emit('unhandledRejection', value, promise);
        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);
      }); // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should

      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
      if (result.error) throw result.value;
    }
  });
};

var isUnhandled = function (state) {
  return state.rejection !== HANDLED && !state.parent;
};

var onHandleUnhandled = function (state) {
  task.call(global$2, function () {
    var promise = state.facade;

    if (IS_NODE) {
      process.emit('rejectionHandled', promise);
    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);
  });
};

var bind$2 = function (fn, state, unwrap) {
  return function (value) {
    fn(state, value, unwrap);
  };
};

var internalReject = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  state.value = value;
  state.state = REJECTED;
  notify(state, true);
};

var internalResolve = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;

  try {
    if (state.facade === value) throw TypeError$1("Promise can't be resolved itself");
    var then = isThenable(value);

    if (then) {
      microtask(function () {
        var wrapper = {
          done: false
        };

        try {
          then.call(value, bind$2(internalResolve, wrapper, state), bind$2(internalReject, wrapper, state));
        } catch (error) {
          internalReject(wrapper, error, state);
        }
      });
    } else {
      state.value = value;
      state.state = FULFILLED;
      notify(state, false);
    }
  } catch (error) {
    internalReject({
      done: false
    }, error, state);
  }
}; // constructor polyfill


if (FORCED$1) {
  // 25.4.3.1 Promise(executor)
  PromiseConstructor = function Promise(executor) {
    anInstance(this, PromiseConstructor, PROMISE);
    aFunction$2(executor);
    Internal.call(this);
    var state = getInternalState$2(this);

    try {
      executor(bind$2(internalResolve, state), bind$2(internalReject, state));
    } catch (error) {
      internalReject(state, error);
    }
  };

  PromiseConstructorPrototype = PromiseConstructor.prototype; // eslint-disable-next-line no-unused-vars -- required for `.length`

  Internal = function Promise(executor) {
    setInternalState$2(this, {
      type: PROMISE,
      done: false,
      notified: false,
      parent: false,
      reactions: [],
      rejection: false,
      state: PENDING,
      value: undefined
    });
  };

  Internal.prototype = redefineAll(PromiseConstructorPrototype, {
    // `Promise.prototype.then` method
    // https://tc39.es/ecma262/#sec-promise.prototype.then
    then: function then(onFulfilled, onRejected) {
      var state = getInternalPromiseState(this);
      var reaction = newPromiseCapability(speciesConstructor$1(this, PromiseConstructor));
      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;
      reaction.fail = typeof onRejected == 'function' && onRejected;
      reaction.domain = IS_NODE ? process.domain : undefined;
      state.parent = true;
      state.reactions.push(reaction);
      if (state.state != PENDING) notify(state, false);
      return reaction.promise;
    },
    // `Promise.prototype.catch` method
    // https://tc39.es/ecma262/#sec-promise.prototype.catch
    'catch': function (onRejected) {
      return this.then(undefined, onRejected);
    }
  });

  OwnPromiseCapability = function () {
    var promise = new Internal();
    var state = getInternalState$2(promise);
    this.promise = promise;
    this.resolve = bind$2(internalResolve, state);
    this.reject = bind$2(internalReject, state);
  };

  newPromiseCapabilityModule$2.f = newPromiseCapability = function (C) {
    return C === PromiseConstructor || C === PromiseWrapper ? new OwnPromiseCapability(C) : newGenericPromiseCapability(C);
  };
}

$$g({
  global: true,
  wrap: true,
  forced: FORCED$1
}, {
  Promise: PromiseConstructor
});
setToStringTag$2(PromiseConstructor, PROMISE, false, true);
setSpecies(PROMISE);
PromiseWrapper = getBuiltIn$2(PROMISE); // statics

$$g({
  target: PROMISE,
  stat: true,
  forced: FORCED$1
}, {
  // `Promise.reject` method
  // https://tc39.es/ecma262/#sec-promise.reject
  reject: function reject(r) {
    var capability = newPromiseCapability(this);
    capability.reject.call(undefined, r);
    return capability.promise;
  }
});
$$g({
  target: PROMISE,
  stat: true,
  forced: IS_PURE 
}, {
  // `Promise.resolve` method
  // https://tc39.es/ecma262/#sec-promise.resolve
  resolve: function resolve(x) {
    return promiseResolve$1(this === PromiseWrapper ? PromiseConstructor : this, x);
  }
});
$$g({
  target: PROMISE,
  stat: true,
  forced: INCORRECT_ITERATION$1
}, {
  // `Promise.all` method
  // https://tc39.es/ecma262/#sec-promise.all
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform$2(function () {
      var $promiseResolve = aFunction$2(C.resolve);
      var values = [];
      var counter = 0;
      var remaining = 1;
      iterate$2(iterable, function (promise) {
        var index = counter++;
        var alreadyCalled = false;
        values.push(undefined);
        remaining++;
        $promiseResolve.call(C, promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.error) reject(result.value);
    return capability.promise;
  },
  // `Promise.race` method
  // https://tc39.es/ecma262/#sec-promise.race
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var reject = capability.reject;
    var result = perform$2(function () {
      var $promiseResolve = aFunction$2(C.resolve);
      iterate$2(iterable, function (promise) {
        $promiseResolve.call(C, promise).then(capability.resolve, reject);
      });
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});

var $$f = _export;

var aFunction$1 = aFunction$7;

var newPromiseCapabilityModule$1 = newPromiseCapability$2;

var perform$1 = perform$3;

var iterate$1 = iterate$4; // `Promise.allSettled` method
// https://tc39.es/ecma262/#sec-promise.allsettled


$$f({
  target: 'Promise',
  stat: true
}, {
  allSettled: function allSettled(iterable) {
    var C = this;
    var capability = newPromiseCapabilityModule$1.f(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform$1(function () {
      var promiseResolve = aFunction$1(C.resolve);
      var values = [];
      var counter = 0;
      var remaining = 1;
      iterate$1(iterable, function (promise) {
        var index = counter++;
        var alreadyCalled = false;
        values.push(undefined);
        remaining++;
        promiseResolve.call(C, promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[index] = {
            status: 'fulfilled',
            value: value
          };
          --remaining || resolve(values);
        }, function (error) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[index] = {
            status: 'rejected',
            reason: error
          };
          --remaining || resolve(values);
        });
      });
      --remaining || resolve(values);
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});

var $$e = _export;

var aFunction = aFunction$7;

var getBuiltIn$1 = getBuiltIn$8;

var newPromiseCapabilityModule = newPromiseCapability$2;

var perform = perform$3;

var iterate = iterate$4;

var PROMISE_ANY_ERROR = 'No one promise resolved'; // `Promise.any` method
// https://tc39.es/ecma262/#sec-promise.any

$$e({
  target: 'Promise',
  stat: true
}, {
  any: function any(iterable) {
    var C = this;
    var capability = newPromiseCapabilityModule.f(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var promiseResolve = aFunction(C.resolve);
      var errors = [];
      var counter = 0;
      var remaining = 1;
      var alreadyResolved = false;
      iterate(iterable, function (promise) {
        var index = counter++;
        var alreadyRejected = false;
        errors.push(undefined);
        remaining++;
        promiseResolve.call(C, promise).then(function (value) {
          if (alreadyRejected || alreadyResolved) return;
          alreadyResolved = true;
          resolve(value);
        }, function (error) {
          if (alreadyRejected || alreadyResolved) return;
          alreadyRejected = true;
          errors[index] = error;
          --remaining || reject(new (getBuiltIn$1('AggregateError'))(errors, PROMISE_ANY_ERROR));
        });
      });
      --remaining || reject(new (getBuiltIn$1('AggregateError'))(errors, PROMISE_ANY_ERROR));
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});

var $$d = _export;

var NativePromise = nativePromiseConstructor;

var fails$3 = fails$f;

var getBuiltIn = getBuiltIn$8;

var speciesConstructor = speciesConstructor$2;

var promiseResolve = promiseResolve$2;


var NON_GENERIC = !!NativePromise && fails$3(function () {
  NativePromise.prototype['finally'].call({
    then: function () {
      /* empty */
    }
  }, function () {
    /* empty */
  });
}); // `Promise.prototype.finally` method
// https://tc39.es/ecma262/#sec-promise.prototype.finally

$$d({
  target: 'Promise',
  proto: true,
  real: true,
  forced: NON_GENERIC
}, {
  'finally': function (onFinally) {
    var C = speciesConstructor(this, getBuiltIn('Promise'));
    var isFunction = typeof onFinally == 'function';
    return this.then(isFunction ? function (x) {
      return promiseResolve(C, onFinally()).then(function () {
        return x;
      });
    } : onFinally, isFunction ? function (e) {
      return promiseResolve(C, onFinally()).then(function () {
        throw e;
      });
    } : onFinally);
  }
}); // makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`

var toInteger$3 = toInteger$6;

var requireObjectCoercible$5 = requireObjectCoercible$8; // `String.prototype.{ codePointAt, at }` methods implementation


var createMethod$2 = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = String(requireObjectCoercible$5($this));
    var position = toInteger$3(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = S.charCodeAt(position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF ? CONVERT_TO_STRING ? S.charAt(position) : first : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

var stringMultibyte = {
  // `String.prototype.codePointAt` method
  // https://tc39.es/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod$2(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod$2(true)
};

var fails$2 = fails$f;

var getPrototypeOf$1 = objectGetPrototypeOf;

var createNonEnumerableProperty$2 = createNonEnumerableProperty$a;

var has = has$a;

var wellKnownSymbol$6 = wellKnownSymbol$k;

var ITERATOR$1 = wellKnownSymbol$6('iterator');
var BUGGY_SAFARI_ITERATORS$1 = false;

var returnThis$2 = function () {
  return this;
}; // `%IteratorPrototype%` object
// https://tc39.es/ecma262/#sec-%iteratorprototype%-object


var IteratorPrototype$2, PrototypeOfArrayIteratorPrototype, arrayIterator;
/* eslint-disable es/no-array-prototype-keys -- safe */

if ([].keys) {
  arrayIterator = [].keys(); // Safari 8 has buggy iterators w/o `next`

  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS$1 = true;else {
    PrototypeOfArrayIteratorPrototype = getPrototypeOf$1(getPrototypeOf$1(arrayIterator));
    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype$2 = PrototypeOfArrayIteratorPrototype;
  }
}

var NEW_ITERATOR_PROTOTYPE = IteratorPrototype$2 == undefined || fails$2(function () {
  var test = {}; // FF44- legacy iterators case

  return IteratorPrototype$2[ITERATOR$1].call(test) !== test;
});
if (NEW_ITERATOR_PROTOTYPE) IteratorPrototype$2 = {}; // `%IteratorPrototype%[@@iterator]()` method
// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator

if ((NEW_ITERATOR_PROTOTYPE) && !has(IteratorPrototype$2, ITERATOR$1)) {
  createNonEnumerableProperty$2(IteratorPrototype$2, ITERATOR$1, returnThis$2);
}

var iteratorsCore = {
  IteratorPrototype: IteratorPrototype$2,
  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS$1
};

var IteratorPrototype$1 = iteratorsCore.IteratorPrototype;

var create = objectCreate;

var createPropertyDescriptor = createPropertyDescriptor$6;

var setToStringTag$1 = setToStringTag$4;

var Iterators$3 = iterators;

var returnThis$1 = function () {
  return this;
};

var createIteratorConstructor$1 = function (IteratorConstructor, NAME, next) {
  var TO_STRING_TAG = NAME + ' Iterator';
  IteratorConstructor.prototype = create(IteratorPrototype$1, {
    next: createPropertyDescriptor(1, next)
  });
  setToStringTag$1(IteratorConstructor, TO_STRING_TAG, false, true);
  Iterators$3[TO_STRING_TAG] = returnThis$1;
  return IteratorConstructor;
};

var $$c = _export;

var createIteratorConstructor = createIteratorConstructor$1;

var getPrototypeOf = objectGetPrototypeOf;

var setToStringTag = setToStringTag$4;

var createNonEnumerableProperty$1 = createNonEnumerableProperty$a;

var redefine = redefine$3;

var wellKnownSymbol$5 = wellKnownSymbol$k;

var Iterators$2 = iterators;

var IteratorsCore = iteratorsCore;

var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol$5('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';

var returnThis = function () {
  return this;
};

var defineIterator$2 = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
  createIteratorConstructor(IteratorConstructor, NAME, next);

  var getIterationMethod = function (KIND) {
    if (KIND === DEFAULT && defaultIterator) return defaultIterator;
    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];

    switch (KIND) {
      case KEYS:
        return function keys() {
          return new IteratorConstructor(this, KIND);
        };

      case VALUES:
        return function values() {
          return new IteratorConstructor(this, KIND);
        };

      case ENTRIES:
        return function entries() {
          return new IteratorConstructor(this, KIND);
        };
    }

    return function () {
      return new IteratorConstructor(this);
    };
  };

  var TO_STRING_TAG = NAME + ' Iterator';
  var INCORRECT_VALUES_NAME = false;
  var IterablePrototype = Iterable.prototype;
  var nativeIterator = IterablePrototype[ITERATOR] || IterablePrototype['@@iterator'] || DEFAULT && IterablePrototype[DEFAULT];
  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
  var CurrentIteratorPrototype, methods, KEY; // fix native

  if (anyNativeIterator) {
    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));

    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {


      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
      Iterators$2[TO_STRING_TAG] = returnThis;
    }
  } // fix Array.prototype.{ values, @@iterator }.name in V8 / FF


  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {
    INCORRECT_VALUES_NAME = true;

    defaultIterator = function values() {
      return nativeIterator.call(this);
    };
  } // define iterator


  if ((FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
    createNonEnumerableProperty$1(IterablePrototype, ITERATOR, defaultIterator);
  }

  Iterators$2[NAME] = defaultIterator; // export additional methods

  if (DEFAULT) {
    methods = {
      values: getIterationMethod(VALUES),
      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
      entries: getIterationMethod(ENTRIES)
    };
    if (FORCED) for (KEY in methods) {
      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
        redefine(IterablePrototype, KEY, methods[KEY]);
      }
    } else $$c({
      target: NAME,
      proto: true,
      forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME
    }, methods);
  }

  return methods;
};

var charAt = stringMultibyte.charAt;

var InternalStateModule$1 = internalState;

var defineIterator$1 = defineIterator$2;

var STRING_ITERATOR = 'String Iterator';
var setInternalState$1 = InternalStateModule$1.set;
var getInternalState$1 = InternalStateModule$1.getterFor(STRING_ITERATOR); // `String.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-string.prototype-@@iterator

defineIterator$1(String, 'String', function (iterated) {
  setInternalState$1(this, {
    type: STRING_ITERATOR,
    string: String(iterated),
    index: 0
  }); // `%StringIteratorPrototype%.next` method
  // https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next
}, function next() {
  var state = getInternalState$1(this);
  var string = state.string;
  var index = state.index;
  var point;
  if (index >= string.length) return {
    value: undefined,
    done: true
  };
  point = charAt(string, index);
  state.index += point.length;
  return {
    value: point,
    done: false
  };
});

var toIndexedObject$1 = toIndexedObject$9;

var Iterators$1 = iterators;

var InternalStateModule = internalState;

var defineIterator = defineIterator$2;

var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR); // `Array.prototype.entries` method
// https://tc39.es/ecma262/#sec-array.prototype.entries
// `Array.prototype.keys` method
// https://tc39.es/ecma262/#sec-array.prototype.keys
// `Array.prototype.values` method
// https://tc39.es/ecma262/#sec-array.prototype.values
// `Array.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-array.prototype-@@iterator
// `CreateArrayIterator` internal method
// https://tc39.es/ecma262/#sec-createarrayiterator

defineIterator(Array, 'Array', function (iterated, kind) {
  setInternalState(this, {
    type: ARRAY_ITERATOR,
    target: toIndexedObject$1(iterated),
    // target
    index: 0,
    // next index
    kind: kind // kind

  }); // `%ArrayIteratorPrototype%.next` method
  // https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next
}, function () {
  var state = getInternalState(this);
  var target = state.target;
  var kind = state.kind;
  var index = state.index++;

  if (!target || index >= target.length) {
    state.target = undefined;
    return {
      value: undefined,
      done: true
    };
  }

  if (kind == 'keys') return {
    value: index,
    done: false
  };
  if (kind == 'values') return {
    value: target[index],
    done: false
  };
  return {
    value: [index, target[index]],
    done: false
  };
}, 'values'); // argumentsList[@@iterator] is %ArrayProto_values%
// https://tc39.es/ecma262/#sec-createunmappedargumentsobject
// https://tc39.es/ecma262/#sec-createmappedargumentsobject

Iterators$1.Arguments = Iterators$1.Array; // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables

// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
var domIterables = {
  CSSRuleList: 0,
  CSSStyleDeclaration: 0,
  CSSValueList: 0,
  ClientRectList: 0,
  DOMRectList: 0,
  DOMStringList: 0,
  DOMTokenList: 1,
  DataTransferItemList: 0,
  FileList: 0,
  HTMLAllCollection: 0,
  HTMLCollection: 0,
  HTMLFormElement: 0,
  HTMLSelectElement: 0,
  MediaList: 0,
  MimeTypeArray: 0,
  NamedNodeMap: 0,
  NodeList: 1,
  PaintRequestList: 0,
  Plugin: 0,
  PluginArray: 0,
  SVGLengthList: 0,
  SVGNumberList: 0,
  SVGPathSegList: 0,
  SVGPointList: 0,
  SVGStringList: 0,
  SVGTransformList: 0,
  SourceBufferList: 0,
  StyleSheetList: 0,
  TextTrackCueList: 0,
  TextTrackList: 0,
  TouchList: 0
};

var DOMIterables$1 = domIterables;

var global$1 = global$i;

var classof$2 = classof$6;

var createNonEnumerableProperty = createNonEnumerableProperty$a;

var Iterators = iterators;

var wellKnownSymbol$4 = wellKnownSymbol$k;

var TO_STRING_TAG = wellKnownSymbol$4('toStringTag');

for (var COLLECTION_NAME in DOMIterables$1) {
  var Collection = global$1[COLLECTION_NAME];
  var CollectionPrototype = Collection && Collection.prototype;

  if (CollectionPrototype && classof$2(CollectionPrototype) !== TO_STRING_TAG) {
    createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);
  }

  Iterators[COLLECTION_NAME] = Iterators.Array;
}

var path$1 = path$a;

var promise$1 = path$1.Promise;

var parent$c = promise$1;

var promise = parent$c;

var _excluded$o = ["webappApi", "ffContextData"];

function ownKeys$E(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$E(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$E(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$E(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var getCurrencies = function getCurrencies(userSelf) {
  return userSelf.attributes.currencies;
};

var getUsers = function getUsers(companyUsers) {
  return companyUsers.models.reduce(function (users, model) {
    if (model.attributes.active_flag) {
      // @ts-expect-error TODO: Fix discrepancy
      users.push(model.attributes);
    }

    return users;
  }, []);
};

var getDefaultCurrency = function getDefaultCurrency(userSelf) {
  return userSelf.attributes.default_currency;
};

var getLocale = function getLocale(userSelf) {
  return userSelf.attributes.locale;
};

var getLanguage = function getLanguage(userSelf) {
  return userSelf.getLanguage();
};

var getCountryCode = function getCountryCode(userSelf) {
  return userSelf.attributes.language.country_code;
};

var getPipelines = function getPipelines(userSelf) {
  var _context;

  return map(_context = userSelf.pipelines).call(_context, function (model) {
    return model.attributes;
  });
};

var getStages = function getStages(userSelf) {
  return userSelf.attributes.stages;
};

var getFields = function getFields(userSelf) {
  return userSelf.fields;
};

var getLocaleConvention = function getLocaleConvention(userSelf) {
  return userSelf.additionalData.locale_convention;
};

var getPhoneSettings = function getPhoneSettings(userSelf) {
  var _userSelf$settings, _userSelf$settings$at;

  return {
    user_id: userSelf.id,
    pattern: (_userSelf$settings = userSelf.settings) === null || _userSelf$settings === void 0 ? void 0 : (_userSelf$settings$at = _userSelf$settings.attributes) === null || _userSelf$settings$at === void 0 ? void 0 : _userSelf$settings$at.callto_link_syntax
  };
};
var parseContext = function parseContext(_ref) {
  var webappApi = _ref.webappApi,
      ffContextData = _ref.ffContextData,
      rest = _objectWithoutProperties(_ref, _excluded$o);

  if (ffContextData) {
    return _objectSpread$E({}, ffContextData);
  }

  if (webappApi) {
    var userSelf = webappApi.userSelf;
    return _objectSpread$E({
      currencies: getCurrencies(userSelf),
      users: getUsers(webappApi.companyUsers),
      defaultCurrency: getDefaultCurrency(userSelf),
      languageCode: getLanguage(userSelf),
      locale: getLocale(userSelf),
      stages: getStages(userSelf),
      pipelines: getPipelines(userSelf),
      fields: getFields(userSelf),
      formatter: new Formatter(getLocaleConvention(userSelf)),
      phoneSettings: getPhoneSettings(userSelf)
    }, rest);
  }

  return _objectSpread$E({
    formatter: new Formatter(),
    defaultCurrency: 'EUR',
    languageCode: 'en'
  }, rest);
};
var getFFContextData = /*#__PURE__*/function () {
  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(componentLoader) {
    var userSelf, userLanguage, _yield$Promise$all, _yield$Promise$all2, users, formatter, translator;

    return _regeneratorRuntime.wrap(function _callee$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return componentLoader.load('webapp:user');

          case 2:
            userSelf = _context2.sent;
            userLanguage = userSelf.getLanguage();
            _context2.next = 6;
            return promise.all([componentLoader.load('webapp:users'), componentLoader.load('froot:formatter'), getTranslator('form-fields', userLanguage)]);

          case 6:
            _yield$Promise$all = _context2.sent;
            _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 3);
            users = _yield$Promise$all2[0];
            formatter = _yield$Promise$all2[1];
            translator = _yield$Promise$all2[2];
            return _context2.abrupt("return", {
              translator: translator,
              formatter: formatter,
              users: getUsers(users),
              currencies: getCurrencies(userSelf),
              defaultCurrency: getDefaultCurrency(userSelf),
              languageCode: userSelf.getLanguage(),
              countryCode: getCountryCode(userSelf),
              locale: userSelf.attributes.locale,
              stages: getStages(userSelf),
              pipelines: getPipelines(userSelf),
              fields: getFields(userSelf),
              phoneSettings: getPhoneSettings(userSelf)
            });

          case 12:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee);
  }));

  return function getFFContextData(_x) {
    return _ref2.apply(this, arguments);
  };
}();

var $$b = _export;

var fails$1 = fails$f;

var isArray$2 = isArray$5;

var isObject$2 = isObject$c;

var toObject$4 = toObject$a;

var toLength$8 = toLength$c;

var createProperty$3 = createProperty$5;

var arraySpeciesCreate$2 = arraySpeciesCreate$4;

var arrayMethodHasSpeciesSupport$2 = arrayMethodHasSpeciesSupport$5;

var wellKnownSymbol$3 = wellKnownSymbol$k;

var V8_VERSION = engineV8Version;

var IS_CONCAT_SPREADABLE = wellKnownSymbol$3('isConcatSpreadable');
var MAX_SAFE_INTEGER$1 = 0x1FFFFFFFFFFFFF;
var MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded'; // We can't use this feature detection in V8 since it causes
// deoptimization and serious performance degradation
// https://github.com/zloirock/core-js/issues/679

var IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails$1(function () {
  var array = [];
  array[IS_CONCAT_SPREADABLE] = false;
  return array.concat()[0] !== array;
});
var SPECIES_SUPPORT = arrayMethodHasSpeciesSupport$2('concat');

var isConcatSpreadable = function (O) {
  if (!isObject$2(O)) return false;
  var spreadable = O[IS_CONCAT_SPREADABLE];
  return spreadable !== undefined ? !!spreadable : isArray$2(O);
};

var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT; // `Array.prototype.concat` method
// https://tc39.es/ecma262/#sec-array.prototype.concat
// with adding support of @@isConcatSpreadable and @@species

$$b({
  target: 'Array',
  proto: true,
  forced: FORCED
}, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  concat: function concat(arg) {
    var O = toObject$4(this);
    var A = arraySpeciesCreate$2(O, 0);
    var n = 0;
    var i, k, length, len, E;

    for (i = -1, length = arguments.length; i < length; i++) {
      E = i === -1 ? O : arguments[i];

      if (isConcatSpreadable(E)) {
        len = toLength$8(E.length);
        if (n + len > MAX_SAFE_INTEGER$1) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);

        for (k = 0; k < len; k++, n++) if (k in E) createProperty$3(A, n, E[k]);
      } else {
        if (n >= MAX_SAFE_INTEGER$1) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);
        createProperty$3(A, n++, E);
      }
    }

    A.length = n;
    return A;
  }
});

var entryVirtual$b = entryVirtual$e;

var concat$2 = entryVirtual$b('Array').concat;

var concat$1 = concat$2;

var ArrayPrototype$7 = Array.prototype;

var concat_1 = function (it) {
  var own = it.concat;
  return it === ArrayPrototype$7 || it instanceof Array && own === ArrayPrototype$7.concat ? concat$1 : own;
};

var parent$b = concat_1;

var concat = parent$b;

var getSuggestions = function getSuggestions(autocompleteService) {
  return /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", new promise(function (resolve) {
                var options = {
                  input: value
                };

                if (!autocompleteService) {
                  return resolve([]);
                }

                autocompleteService.getPlacePredictions(options, function (suggestsGoogle) {
                  if (!suggestsGoogle || !suggestsGoogle.length) {
                    return resolve([]);
                  }

                  return resolve(suggestsGoogle);
                });
              }));

            case 1:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }();
};
function loadGoogleMapsAPI(callback, languageCode) {
  var _context3, _context4;

  var countryCode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';

  if (window.google) {
    return callback();
  }

  var delimiter = countryCode ? '-' : '';

  var languageString = concat(_context3 = concat(_context4 = "".concat(languageCode)).call(_context4, delimiter)).call(_context3, countryCode);

  var src = "https://maps.googleapis.com/maps/api/js?language=".concat(languageString, "&libraries=places&client=gme-pipedriveinc");
  var scriptElement = document.querySelector("[src=\"".concat(src, "\"]"));

  if (scriptElement) {
    scriptElement.addEventListener('load', callback);
    return;
  }

  var script = document.createElement('script');
  script.type = 'text/javascript';

  if (script.readyState) {
    script.onreadystatechange = function () {
      if (script.readyState === 'loaded' || script.readyState === 'complete') {
        script.onreadystatechange = null;
        return callback();
      }
    };
  } else {
    script.onload = callback;
  }

  script.src = src;
  document.getElementsByTagName('head')[0].appendChild(script);
  return null;
}

function styleInject(css, ref) {
  if (ref === void 0) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') {
    return;
  }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css_248z$w = ".ff_v4290__Address__map__7rv{\n\twidth:800px;\n\theight:600px;\n}\n\n.ff_v4290__Address__footer__2Ik{\n\tdisplay:flex;\n\tflex-direction:row-reverse;\n}\n\n.ff_v4290__Address__poweredByGoogle__23O{\n\twidth:144px;\n\theight:18px;\n\tbackground-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAAkCAYAAAApZeciAAARjUlEQVR4Ae2dBXTb2vL1x6GmzJehzBjbKb/YcsrMfJkZyvDS1HbgMTMzM7d9zMzMGCjaTrnxt+e7zvqPpwLLdUpLe62fnFqSZak5W3PmzFHI0/UoT7Nf2t49XJeaY8RT24xY6jXhWPJt+Pn1+Hl3KNa2dE7N8X6Ariwe19XJeHhE6k5OM6KpD4eiidMwnLQVWH/eiCc/F44mDUBXBo/r4iQ8PIxY262Icj7J5uIW7PdZ3h+QBwCBD65YW/GB5ec78H9wxf2ACg0vrmk8PCLRZHUonjri1ngUrdXRxExAHgkKfGjVusCHVqY7qPjQqgcAFRpeXLN4eOBuvdyIJs5e3MVKHcbrq7F+caTuxIjqxrZbquqOD4vUpeYh4mkMxRL/0fuE46kdgMIengHlhwc0ETRmmEvu9ZzYv4SuYnHEEoonzqjczmlONC+qSXcDZMXqmnSZEUs+g/3bXuiGpfYCYjw8A7LFwzOgqppjfWAe/84yn3iqOVzf5geUK5H9yfFIRj8NKIMH8AzIBg/PgHhoXZoPRr4SbCaAPC4dz4A8LPAMiPM5Ou+D3M7dgDwKg2dAHhZ4BoQk6Z6s6CeW+DGl0z5AHoXBMyAPCzwDQu7nJ9kGlLoH0OXmb1VV5S2RyoXNkWBtsxF8c0sk8Ea8bm8OB6ana6gIkCu+RuXnvlK88NyB0tpzB4vfjNc3nj1Ysv3soZK8Pm/qy9u7GvG2ZRj1i4fiyTcit1OH6GaR/83pUkDTG1t7ci4NgOYegDK4NqB/R4L9cd6bWyLBl/J1aDGCdU1GcPk/p07tCsgKyxVQEbgRDAIDgI/cqxzcBAaDG0ERXX0qATeDweAWUEr5qQj0Bj2AL8fj3ZxnIy8S1/UmdV07y4DKwe1gEOhzJadYwIAuZHe/TvQHdLlIrx5T1hwJ7GwO+4+gwaXNaAr7/9hiVK5OE/kA2fIRKjt7oGTnmYOlR84dLE2bU/zH84fKViM48QGyY/VH0sWojXrOqjYqFE3+xYgnZiFy/LnIoX0dUIacDejwvMpeON/XNoeDZ0yvhRFsAQ9YXQdesB7OcCMoBwvBPtAo2A2qc2ygI8BDoF59Ri1YCfoBrfHie0wlawXFdrPJWuPEdn6g1QesBjH1HevAZnALmSugrlcZmAdqxGdsBlr9wFqT48XBRnBjjoY+Xx2L2QcWZtZPKJQBCaO7x+T/8lkwycRsbxXXZzU5SF3PWeQg3MUnZDeoxN8BOTEnevJ2HrZ3AzdkQJL/VPkHtBiB71kZjwZRwNvTVVUlgEz5Gg2AwXwPpHOj+O3YpwSQGRzJoAbqK86Fl4lTMKgTl2JAR6v9d7DR5nYtAm+UJqQNqDHDeLANNNrwvM0dsBisBo0OxMAEIDVArH+arPWUanjFZK7NYrvbTAxyv8N3rLcwwtlim5HgGZN9teGNBlGH49WZ7Kevz3aHz9gKggUyoBgYA+IOx9yg/g+K1Pe8hazlA1v1/5ODAYWzu1/J7wNygosMeXs3cOEioA64O9EUCf7kosYVDqYQAfywJeL/eVPEf06vbzb8bwGkaf8udUWX6yfaZBAJpfD6w3MHin9+5iul50xM6C2ANGyYiGq+bGo20dQv8POf9bp8Dah1+vSeuBa/1+eK6/APXI8DuBa/1uvAHkASXkgDerFofBvBDDAdrAV1YrttoNzkl2k9aBQ8AkJgClgIdot1DWA0kHpWrO9lEUU0KkaaGaEwmJ3qLn2balTPAAMEM69PqM8fa2VAwgwbMvvdAx5TUeIgUKf2CYEgiChDbbA4n+5ghzLw1WAqmA42iAilpkAGVCdMcw9YCCpBFXhYXaM1QGqmWLeSrDVUbPcYILcGhNzGDwA5kJcBherapgDqAF2Jl2Q3KP8p5H+e5FwQIIYjJLz3Kt34YExLAUlgJi+RxgKzOYWu2JOcCwKUYQByQa+6yIQOlC0FJOHCyuxrkzgTrkttkUWZ1ftPDFcmlZcBId/zcnUtmvC6SEY5hw1/Jc7zX6Jbev6wUTkGUAe8kAbE7AQ3A63+YIvYbjmQmqQayDigVQpWie1qQFeLxl0JtF4EGhWrHH6xF8u7s+pizAdFJkY6VWyzB5Tq7yjYYtN9KlYRZTXw6eOp89phEtWtUV2fvkDrZrALNBbCgAQbQRnQmqCMdYzqKu4XvwvlZK6NYv8JgNx2wcLxxD8BOePegMLRE9MBMf+dN2kg7uyn/68xBS80VQcjgMxorg7uUFHSL2XjbP8CDUSkc1pEPRcQDUUAmQFj2qGioF/KfBAnnDPTTzKGkmgPxVILAWmqatIlbEL5GtCxqol9YDgnhbkm8DoCkISNGWb8Snkd8O8PAOqAFyS7HQ4hcz+Rw6gDPUUjkuY02SHsvl9sa8hGJN6/G2g9Lu6WjwsT0w12oficwTLPJN6/zyFZvMrkfLQBRR0SspPFtpscjrdBdYU71Bc0iBya3fFuAQ0FNKCn9LVVmia2fQJILRbrZgCtHsLAdoHiPJPQIHkjIDs4muFowA41ugYSYwAxyOU8ohrSmwBZwaNW3CXLjoIqxgNiMLr1SJahfKX0TYCs4M/jLpmKmMYDAhz9rFbf/d2ArJgdPTWYr2M+BtQaCW5UEd5eaTz/q5oyCDmfxpaw/7BJd/V0c9WYHoAYXpDqzztpsUmUcqPq0jiNmN1qke/xiYghqkZh+oh9XqSihuFA6nnQCPaCIos77hCy151i2/UWBrSc7HW32PZWstdwi6hulorYnLSxgAY0OofRuJ1iexmZ9RNmuMXkdyIk9guRC3HdT/bjNNoeAnSpwKi+JyMINjtAgBvWe7LNJDgNkB3opmyR+7Qa/ocBAY5o3iPNBP+eBsiWQyVb5D4wsYcBMboyHOZSBcgORIXfyseAdFTDxsoGiffn4Zw/i3Nvv3hUMHicu6atc/yjAHXwwkInT50biu7fB1z+0vtEPqhBGc188VkjLPIK/VQ+aIXYTr8vtV0lfeM21ElTlQbk4nrtcXs8HU2ovNogclagQAZUn2OJwEoduQndJdYNVf//20UXrRu5EBrMLtV9+JUesXILPyGRH1ImZsb/FlAHLYb/oGxQGAHqDcgOjJbNz05GB6KAGHS5DkozSR+g3oDsQLdrvtwHRAExMM9PZSXQaxIDANmBfd6clwGFgx9S0WAtXv8E0hpO2qMc4f7/zZ7QHZCGeOEiKtCjVfeY3M0qKTc9JvbpLd6/Xby/RLz/qEnE9LRInhepboE2MBLdR7fskgbkIm/RkOfxtoEOPSTe70POGlogA9qdqx+I400HUkNUF7RDI9RNzJVmxVI3XzQLPpZ4DFC+IILYria2vhJQhqvfgGLJT7utjUKB4psKYEAm+E+1hAPv4iS0Qx1UZqG6Mg66Uf9SqW7CNNJyHk7vKe+OIpm6Hfgy6xtMckYRE/O812aIfr/IpQRcMMHCgMaTverEdwm4QH7u/Sryc9LIAhnQi8lZ+npMMYl0nxYRVS+TEokbgWuxQeihZiPWVgnILTwyxJNZs7p19amJgDqAmbw7y0xm+2cAssWo3JbVBYsEHgLEoNv07qzu1JdLZgCyA/tsy+62lT4EiOHnXavrMQuQPalvuDUgPQKm+FOrEXyeq6IB5QIvpAHNJGdNMBlhmuAiL6KHyWMm+YEl4vMGgmnq3x26Qby/DJSKIfa1No2rAXQh93JrQNtE4yuj/LRS5WScNKuAOaDu5KxNKuLU8qtRwJ6iZOABylPVDUd78wiYGrk6hgrgEKCcwcPKjGjyb/oRrYAkbB7Z3Y7A2wBZkV69urg54v+N3Od/4eBYQAybR3YSuvhtgKxAtXQxXn+TlYQ+VDoWEBOOJzeoc3gbIAtw/U7ewV3OvAzI8K9SEc//msOVcyynixD5rKZk8EIa0OPA5yKxOgaweoj39jpUS+vRqPuB1mCZcBbdkOeA1vNiuHyUqt/RWiHWB8heXUD5JRrQGqeRQaHyDFoVLgYJfODJAhrQDLJXN1ErVGfx/UvAXtGtm60NNV9Vxdqm6ofP88gOktQvzcxxImvSJZy8ltXAGZLh6PGhgCR8V88eeg62c9IVkAW12VMS/D/LGoY/QP0xenVSjGi1Y5RrHiBzSmvVMPzP5DB8pgL6uEyi818FAaTJDMN/Pt9heM7n4PyPyfNjAwJkRiYS/DNyQbMASXih64CCZK0xNvUx94p1S4WRORXVTQJaReKX9hnR/ZoDtOaaFAbGQKnDyNZu0IOstQREwXLQOx8DUvmYnQ4RxXIQBctAL2WEtTrKsFBlgeuAamzyTj5lsBtJy7yrXC/yXD66RIXr2pZkP5pDGEks8S4kWjdF6tqCHOlE6lOT+RGubFAwrn+Y/aUMrF8MyAyYSlxV/Z7hkS6ZYG2ZW3EzVz5fPPzsXwBIAlOJqwroMzzS1f5l6g7o//NFupkrn3l9FoeKFwCS6DwWmzMXJ8pCRDZXmPQXLrUQ0aTOqY3nfPE8OUAA12PaDTxPLMu0jeArpBHrHBBTD0KgRBnCNDVSM1XXoKj1q00a3CBVev+kSB5bRisOZf23mGy3KccIbpvJyFKZGomLgp55GpCuedoC7tDHU3VL+0EPmwLMGAiq61YCQqChEwoRd4Ahyiy6g3VqPttAslYPkykdM6hA4m4XGk0LN6R84UezspkBsiAz+z34fbOkK/g5aoV+ZzYEDV4HSMMVzzCh72tz4YroF2p+in/HkZFej31eB0jDkQ1G7L52sbkkTiLn8zOs+2OhpmKk/f5SFCB+w+Rckxhy/yl3P7lY02k6hp6K8ZiaOPoAuB/UmMz/8eVwB64Hj4F7lfEwexySqiPU9tv1MfWQrkNUJRvPNpM5VHeDh0DU4bOUATmqp4r4mC0Wx2sAEy0iwnvUZ+wF94H71cThxwpkQPuUGW0F94BH1I2GCZCzVqnfrS5UQFW9JHUT/z2wvAwIdUXh/cmxgJw4Pmdqv6ZI4JuqUVljBN7A+SBAZrR/ifqh0PCb0mAceAPngwCZwbkxUxMyMSXZZctzMmpvRIFfc7wGYrhej4rpCGgUWA4aLWgASxweqzFezCmz4jHQ1ylRrRrWQlLSlc8qF+FkCg84fMdabQZ5GhCrF3jY6XgOw/olKiFtxipwZ4EMaBfooyfbKqIOZi81Sg9edIaQFwqEo6n3hqLJlLP5JL8D1rmtIeLZ7Yh4ngVNNkPRv241AosBOcGz21Fo+CyinSZL4/lK8a/PHSxbDMgJjoRwftvAMYtz/zNPM+EJqqLu6Wt5/FWMzLUIPgdaba7Fz2Ha1YA0xAuTBjUIrAPbwT6wBawAt7p4DtBM8ADYAWrBNrABjHbR9x8vqp77k7X6i+0mU27ygRFgLdgKajPG+SgwbPI1d4CZGQYAcnG8kWCdyfHCLorx7gRrwHZQC3aA9aIMoae4FoPIvSrATFApbgSV4EGwF+wDT4O5oCflrnXiJtaPOllohOVcDcwPnIchvYwfyMVD9+FYaifngdT0jbzgbgjPB0OUs4u7WU1G4NX4+ZkWo6JC3+lz4sdUyvPBMNy+i7tZMJ5X4+dnkBuqkAnnXOFKbowUrkAeqB68BdTLB5LBeH5vMfIHA1oexB8nfFMH/o+sngnIij/OG9aF655ADT+cja8H58cwehjU18LpcRyePBVafUXy+W7qXHlKp338Z4cAWTHv1e1d1Aji6wFdbnjR2QbkydNiPSXDU+HFj1hFdPcIulC/5LlhgKzgyCirbqgudS+gyw0WnWZAnjzpWqFngY86RV7Ug5zOH7LqgOLJNYA0s2uSN+D1r2Lbs/weoMsNLzrTgDx5MlSNWSfJE/Jb95kk2t/MU1R4cipPOUHk86j+g46Z/BBdCbDoNAPy5KlUFJTWgFLqVHlREBdfuitDSPxdTVy9rPCiswzIk6cpqiSgc+UpM8Uk9bpczIe7bBwVAbpSYNFpBuTJU28wMEMZebpsCkeTBgoKD+qnRzI8+ZbLEcQUjSsGLwgKZRhInjx5um40s/54X340B08zwZSV6qr6U4Oupr8i+/8Adnj5PFwBRDQAAAAASUVORK5CYII=');\n\tbackground-size:cover;\n}\n";
var styles$u = {
  "map": "ff_v4290__Address__map__7rv",
  "footer": "ff_v4290__Address__footer__2Ik",
  "poweredByGoogle": "ff_v4290__Address__poweredByGoogle__23O"
};
styleInject(css_248z$w);

var AddressRead = function AddressRead(_ref) {
  var value = _ref.value,
      modalTitle = _ref.modalTitle;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _parseContext2 = parseContext(useContext(FormFieldsContext)),
      languageCode = _parseContext2.languageCode,
      countryCode = _parseContext2.countryCode;

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      isVisible = _useState2[0],
      setVisible = _useState2[1];

  var mapElRef = useRef(null);

  if (!value) {
    return null;
  }

  var renderMap = function renderMap(address) {
    var GoogleMaps = window.google.maps;
    new GoogleMaps.Geocoder().geocode({
      address: address
    }, function (result) {
      var latLng = result[0].geometry.location;
      var map = new GoogleMaps.Map(mapElRef.current, {
        center: latLng,
        zoom: 15,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });
      var marker = new GoogleMaps.Marker({
        position: latLng
      });
      marker.setMap(map);
    });
  };

  var parseValue = function parseValue() {
    if (isString(value)) {
      return value;
    }

    return value === null || value === void 0 ? void 0 : value.description;
  };

  var openModal = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              setVisible(true);
              event.preventDefault();
              loadGoogleMapsAPI(function () {
                renderMap(parseValue());
              }, languageCode, countryCode);

            case 3:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function openModal(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var closeModal = function closeModal() {
    setVisible(false);
  };

  return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("a", {
    href: "#",
    onClick: openModal,
    "data-testid": "addressLink"
  }, parseValue()), /*#__PURE__*/React.createElement(Modal, {
    backdrop: false,
    closeOnEsc: true,
    visible: isVisible,
    header: modalTitle || translator.gettext('Address'),
    onClose: closeModal,
    footer: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(Button, {
      color: "green",
      onClick: closeModal
    }, "Close")))
  }, /*#__PURE__*/React.createElement("div", {
    ref: mapElRef,
    className: map(styles$u)
  })));
};

var InputIcon = function InputIcon(_ref) {
  var isLoading = _ref.isLoading,
      isNew = _ref.isNew,
      actionIcon = _ref.actionIcon,
      disableNewLabel = _ref.disableNewLabel;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  if (isLoading) {
    return /*#__PURE__*/React.createElement(Spinner, {
      size: "s",
      "data-testid": "spinner"
    });
  }

  if (actionIcon) {
    return actionIcon;
  }

  if (isNew && !disableNewLabel) {
    return /*#__PURE__*/React.createElement(Badge, {
      color: "blue"
    }, translator.gettext('new'));
  }

  return null;
};

var css_248z$v = ".ff_v4290__InputSelect__wrapper__3As{\n\tdisplay:flex;\n\tposition:relative;\n}\n.ff_v4290__InputSelect__suggestion__1y6{\n\tdisplay:flex;\n\talign-items:center;\n\twhite-space:pre;\n}\n.ff_v4290__InputSelect__suggestion__1y6 span{\n\t\tdisplay:block;\n\t\toverflow:hidden;\n\t\twhite-space:nowrap;\n\t\ttext-overflow:ellipsis;\n\t}\n.ff_v4290__InputSelect__suggestionIcon__3bT{\n\tmargin-right:10px;\n}\n.ff_v4290__InputSelect__highlight__3rw{\n\tbackground-color:#fff570;\n\tcolor:#26292c;\n}\n.ff_v4290__InputSelect__noMatchFound__1Gv{\n\tpointer-events:none;\n}\n.ff_v4290__InputSelect__noMatchFound__1Gv span{\n\t\tcolor:#747678;\n\t}\n.ff_v4290__InputSelect__input__2jq{\n\twidth:100%;\n\tflex:1;\n}\n.ff_v4290__InputSelect__popover__bUo{\n\tz-index:6001;\n}\n.ff_v4290__InputSelect__popover__bUo .cui4-popover__inner{\n\t\tmax-width:none;\n\t}\n.ff_v4290__InputSelect__content__1mH{\n\tposition:absolute;\n\tright:0;\n\tdisplay:flex;\n\talign-items:center;\n\tpadding:0 10px;\n\ttext-transform:uppercase;\n\theight:32px;\n}\n.ff_v4290__InputSelect__defaultSuggestions__PUG{\n\tmax-height:416px;\n}\n.ff_v4290__InputSelect__popverRoot__jrA{\n\twidth:100%;\n}\n.ff_v4290__InputSelect__warning__2f3{\n\tdisplay:flex;\n\talign-items:center;\n\tmargin-top:4px;\n\tfont:400 13px/16px 'Source Sans Pro',sans-serif;\n}\n.ff_v4290__InputSelect__warning__2f3 .ff_v4290__InputSelect__warningLink__1l2{\n\t\tpadding-left:8px;\n\t}\n.ff_v4290__InputSelect__warning__2f3 .ff_v4290__InputSelect__warningIcon__1_v{\n\t\tmargin-right:8px;\n\t}\n";
var styles$t = {
  "wrapper": "ff_v4290__InputSelect__wrapper__3As",
  "suggestion": "ff_v4290__InputSelect__suggestion__1y6",
  "suggestionIcon": "ff_v4290__InputSelect__suggestionIcon__3bT",
  "highlight": "ff_v4290__InputSelect__highlight__3rw",
  "noMatchFound": "ff_v4290__InputSelect__noMatchFound__1Gv",
  "input": "ff_v4290__InputSelect__input__2jq",
  "popover": "ff_v4290__InputSelect__popover__bUo",
  "content": "ff_v4290__InputSelect__content__1mH",
  "defaultSuggestions": "ff_v4290__InputSelect__defaultSuggestions__PUG",
  "popverRoot": "ff_v4290__InputSelect__popverRoot__jrA",
  "warning": "ff_v4290__InputSelect__warning__2f3",
  "warningLink": "ff_v4290__InputSelect__warningLink__1l2",
  "warningIcon": "ff_v4290__InputSelect__warningIcon__1_v"
};
styleInject(css_248z$v);

var getPadding = function getPadding(element, allowClear) {
  var finalPadding = allowClear ? 26 : 12;

  if (element) {
    finalPadding = element.offsetWidth;

    if (allowClear) {
      finalPadding += 16;
    }
  }

  return finalPadding;
};
var parseValue = function parseValue(value, getSuggestionValue) {
  if (typeof value === 'string') {
    return value;
  }

  if (!value || !getSuggestionValue) {
    return '';
  }

  return getSuggestionValue(value);
};

var _excluded$n = ["ref", "onKeyDown"],
    _excluded2$2 = ["className", "message"];

function ownKeys$D(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$D(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$D(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$D(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
/**
 * A component used in Deal, Person, Organization, Address and Autocomplete fields.
 * Displays the values returned from getSuggestions function as Select options.
 * Typically performs a request to /search endpoint, but can also be used as a generic Autocomplete field.
 *
 * @template T - Type of the suggestion
 * @param {InputSelectProps<T>} props - Props for InputSelect
 * @returns {React.ReactElement<DownshiftProps<T>, string>} Downshift component
 */

function InputSelect(_ref) {
  var _ref$allowNewItem = _ref.allowNewItem,
      allowNewItem = _ref$allowNewItem === void 0 ? true : _ref$allowNewItem,
      _ref$showNewLabel = _ref.showNewLabel,
      showNewLabel = _ref$showNewLabel === void 0 ? false : _ref$showNewLabel,
      _ref$disableNewLabel = _ref.disableNewLabel,
      disableNewLabel = _ref$disableNewLabel === void 0 ? false : _ref$disableNewLabel,
      _ref$alwaysGetSuggest = _ref.alwaysGetSuggestions,
      alwaysGetSuggestions = _ref$alwaysGetSuggest === void 0 ? false : _ref$alwaysGetSuggest,
      _ref$getSuggestions = _ref.getSuggestions,
      getSuggestions = _ref$getSuggestions === void 0 ? function (inputValue) {
    return promise.resolve(null);
  } : _ref$getSuggestions,
      _ref$getSuggestionVal = _ref.getSuggestionValue,
      getSuggestionValue = _ref$getSuggestionVal === void 0 ? function (suggestion) {
    return suggestion;
  } : _ref$getSuggestionVal,
      isNewValue = _ref.isNewValue,
      renderSuggestions = _ref.renderSuggestions,
      className = _ref.className,
      portalTo = _ref.portalTo,
      _ref$placement = _ref.placement,
      placement = _ref$placement === void 0 ? 'bottom-start' : _ref$placement,
      disabled = _ref.disabled,
      suggestionIcon = _ref.suggestionIcon,
      _ref$getSuggestionIco = _ref.getSuggestionIcon,
      getSuggestionIcon = _ref$getSuggestionIco === void 0 ? function (_) {
    return suggestionIcon || '';
  } : _ref$getSuggestionIco,
      _ref$value = _ref.value,
      value = _ref$value === void 0 ? '' : _ref$value,
      _ref$dropdownTrigger = _ref.dropdownTrigger,
      dropdownTrigger = _ref$dropdownTrigger === void 0 ? 0 : _ref$dropdownTrigger,
      _ref$onComponentChang = _ref.onComponentChange,
      onComponentChange = _ref$onComponentChang === void 0 ? function () {
    return null;
  } : _ref$onComponentChang,
      _ref$searchDelay = _ref.searchDelay,
      searchDelay = _ref$searchDelay === void 0 ? 350 : _ref$searchDelay,
      _ref$inputProps = _ref.inputProps,
      inputProps = _ref$inputProps === void 0 ? {} : _ref$inputProps,
      _ref$dropmenuProps = _ref.dropmenuProps,
      dropmenuProps = _ref$dropmenuProps === void 0 ? {} : _ref$dropmenuProps,
      _ref$downshiftProps = _ref.downshiftProps,
      downshiftProps = _ref$downshiftProps === void 0 ? {} : _ref$downshiftProps,
      actionIcon = _ref.actionIcon,
      allowClear = _ref.allowClear,
      placeholder = _ref.placeholder,
      _ref$autosuggest = _ref.autosuggest,
      autosuggest = _ref$autosuggest === void 0 ? true : _ref$autosuggest,
      suggestions = _ref.suggestions,
      initialSuggestions = _ref.initialSuggestions;
  var inputRef = useRef(null);
  var iconRef = useRef(null);

  var _parseContext = parseContext(React.useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      isLoading = _useState2[0],
      setIsLoading = _useState2[1];

  var _useState3 = useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      selected = _useState4[0],
      setSelected = _useState4[1];

  var _useState5 = useState(showNewLabel),
      _useState6 = _slicedToArray(_useState5, 2),
      isNew = _useState6[0],
      setIsNew = _useState6[1];

  var _useState7 = useState(),
      _useState8 = _slicedToArray(_useState7, 2),
      inputValueState = _useState8[0],
      setInputValue = _useState8[1];

  var _useState9 = useState(initialSuggestions || null),
      _useState10 = _slicedToArray(_useState9, 2),
      internalStateSuggestions = _useState10[0],
      setSuggestions = _useState10[1];

  var onSelect = function onSelect(selectedItem) {
    setSelected(true);

    if (onComponentChange && selectedItem) {
      setIsNew(false);
      onComponentChange(selectedItem);
    }
  };

  function resetSuggestions() {
    if (initialSuggestions) {
      setSuggestions(initialSuggestions);
    } else {
      setSuggestions(null);
    }
  }

  var onUserAction = function onUserAction(_ref2) {
    var isOpen = _ref2.isOpen,
        type = _ref2.type;
    var _Downshift$stateChang = Downshift.stateChangeTypes,
        mouseUp = _Downshift$stateChang.mouseUp,
        keyDownEscape = _Downshift$stateChang.keyDownEscape,
        keyDownEnter = _Downshift$stateChang.keyDownEnter;
    var isOuterClickEvent = mouseUp === type || keyDownEscape === type || keyDownEnter === type;

    if (!isOpen && isOuterClickEvent && !disableNewLabel && allowNewItem && autosuggest) {
      resetSuggestions();

      if (isNewValue && isNewValue(value)) {
        setIsNew(true);
      }
    }
  };

  var onInputValueChange = /*#__PURE__*/function () {
    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputValue, _ref3) {
      var isOpen, selectedItem, results;
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              isOpen = _ref3.isOpen, selectedItem = _ref3.selectedItem;

              if (inputValue) {
                _context.next = 5;
                break;
              }

              setIsNew(false);
              resetSuggestions();
              return _context.abrupt("return");

            case 5:
              if (!(!autosuggest || !isOpen && !alwaysGetSuggestions || dropdownTrigger > inputValue.length || isLoading || selectedItem && getSuggestionValue(selectedItem) === inputValue)) {
                _context.next = 8;
                break;
              }

              setSuggestions(null);
              return _context.abrupt("return");

            case 8:
              setSelected(false);
              setIsLoading(true);
              _context.prev = 10;
              _context.next = 13;
              return getSuggestions(inputValue);

            case 13:
              results = _context.sent;
              setIsLoading(false);
              setSuggestions(results);
              _context.next = 21;
              break;

            case 18:
              _context.prev = 18;
              _context.t0 = _context["catch"](10);
              setIsLoading(false);

            case 21:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[10, 18]]);
    }));

    return function onInputValueChange(_x, _x2) {
      return _ref4.apply(this, arguments);
    };
  }();

  var onInputValueChangeDebounced = useMemo(function () {
    return awesomeDebouncePromise(onInputValueChange, searchDelay);
  }, []);

  var onInputValueChangeHandler = function onInputValueChangeHandler(inputValue, controllerState) {
    setInputValue(inputValue);

    if (autosuggest && (!suggestions || alwaysGetSuggestions)) {
      onInputValueChangeDebounced(inputValue, controllerState);
    }
  };

  var itemToString = function itemToString(item) {
    if (!item) {
      return '';
    }

    return getSuggestionValue(item);
  }; // eslint-disable-next-line new-cap


  var IconComponent = InputIcon({
    isLoading: isLoading,
    isNew: isNew,
    actionIcon: actionIcon,
    disableNewLabel: disableNewLabel
  });

  var _useState11 = useState(),
      _useState12 = _slicedToArray(_useState11, 2),
      padding = _useState12[0],
      setPadding = _useState12[1];

  useEffect(function () {
    if (!iconRef || !iconRef.current) {
      setPadding(0);
      return;
    }

    var finalPadding = getPadding(iconRef.current, allowClear);
    setPadding(finalPadding);
  }, [IconComponent]);
  useEffect(function () {
    if (isNil(value) || isNewValue && !isNewValue(value)) {
      setIsNew(false);
    }

    if (!selected) {
      setInputValue(value);
    }
  }, [value]);

  var renderInput = function renderInput(_ref5) {
    var getInputProps = _ref5.getInputProps;
        _ref5.inputValue;
        _ref5.highlightedIndex;
        var setState = _ref5.setState;

    var _getInputProps = getInputProps(),
        ref = _getInputProps.ref,
        _onKeyDown = _getInputProps.onKeyDown,
        restDownshiftInputProps = _objectWithoutProperties(_getInputProps, _excluded$n);

    var inputClassName = inputProps.className,
        message = inputProps.message,
        restCuiInputProps = _objectWithoutProperties(inputProps, _excluded2$2);

    var handleEnterOrEnterKeyPress = function handleEnterOrEnterKeyPress() {
      setState({
        type: Downshift.stateChangeTypes.keyDownEscape
      });
    };

    return /*#__PURE__*/React.createElement("div", {
      className: classNames(className, 'cui4-input__box')
    }, /*#__PURE__*/React.createElement("div", {
      className: classNames('cui4-input', styles$t.input, inputClassName)
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$t.wrapper
    }, /*#__PURE__*/React.createElement(Input, _objectSpread$D(_objectSpread$D({
      forwardRef: inputRef,
      className: classNames(inputClassName, styles$t.input),
      style: {
        paddingRight: padding
      },
      inputRef: ref,
      allowClear: allowClear,
      disabled: disabled,
      color: message ? 'red' : undefined,
      message: message,
      placeholder: placeholder,
      onKeyDown: function onKeyDown(event) {
        _onKeyDown(event);

        if (event.key === 'Enter' || event.key === 'Tab') {
          handleEnterOrEnterKeyPress();
          return;
        }
      }
    }, restDownshiftInputProps), restCuiInputProps)), IconComponent && /*#__PURE__*/React.createElement("div", {
      className: styles$t.content,
      ref: iconRef,
      style: {
        right: allowClear && IconComponent ? '18px' : '0'
      }
    }, IconComponent))));
  };

  var renderDefaultSuggestions = function renderDefaultSuggestions(getItemProps, highlightedIndex) {
    var _context2;

    var suggestionsList = suggestions || internalStateSuggestions;
    return /*#__PURE__*/React.createElement("div", {
      className: styles$t.defaultSuggestions
    }, map(_context2 = suggestionsList || []).call(_context2, function (item, index) {
      var _context3;

      return /*#__PURE__*/React.createElement("div", _objectSpread$D(_objectSpread$D({}, getItemProps({
        item: item,
        index: index
      })), {}, {
        key: concat(_context3 = "".concat(item)).call(_context3, index)
      }), /*#__PURE__*/React.createElement(Option, {
        "data-testid": "option",
        highlighted: highlightedIndex === index,
        className: classNames(styles$t.suggestion)
      }, suggestionIcon && /*#__PURE__*/React.createElement(Icon, {
        icon: getSuggestionIcon(item),
        size: "s",
        color: "black-64",
        className: styles$t.suggestionIcon
      }), getSuggestionValue(item)));
    }), (suggestionsList === null || suggestionsList === void 0 ? void 0 : suggestionsList.length) === 0 && /*#__PURE__*/React.createElement(Option, {
      className: styles$t.noMatchFound,
      manualHighlight: true
    }, translator.gettext('No match found')));
  };

  var renderDropMenu = function renderDropMenu(_ref6, children) {
    var isOpen = _ref6.isOpen,
        highlightedIndex = _ref6.highlightedIndex,
        getItemProps = _ref6.getItemProps,
        inputValue = _ref6.inputValue,
        setHighlightedIndex = _ref6.setHighlightedIndex;

    if (!autosuggest) {
      return children;
    }

    var width = inputRef.current ? inputRef.current.clientWidth : 'auto';
    var suggestionsList = suggestions || internalStateSuggestions;
    var renderDropmenuSuggestions = renderSuggestions ? renderSuggestions(suggestionsList || []) : renderDefaultSuggestions;
    var isVisible = isOpen && inputValue.length >= dropdownTrigger && !!(suggestionsList !== null && suggestionsList !== void 0 && suggestionsList.length);
    return /*#__PURE__*/React.createElement(Dropmenu, _objectSpread$D({
      content: /*#__PURE__*/React.createElement("div", {
        style: {
          width: width
        }
      }, isOpen && renderDropmenuSuggestions(getItemProps, highlightedIndex, setHighlightedIndex, inputValue || '')),
      popoverProps: {
        className: styles$t.popover,
        portalTo: portalTo,
        placement: placement,
        spacing: 'none',
        visible: isVisible
      }
    }, dropmenuProps), children);
  };

  var stateReducer = function stateReducer(_ref7, changes) {
    var _changes$inputValue;

    var inputValue = _ref7.inputValue;

    switch (changes.type) {
      case Downshift.stateChangeTypes.changeInput:
        onComponentChange(changes.inputValue);
        return _objectSpread$D(_objectSpread$D({}, changes), {}, {
          // Hide dropdown, if all written text was deleted
          isOpen: !!((_changes$inputValue = changes.inputValue) !== null && _changes$inputValue !== void 0 && _changes$inputValue.length)
        });

      case Downshift.stateChangeTypes.mouseUp:
      case Downshift.stateChangeTypes.keyDownEnter:
      case Downshift.stateChangeTypes.keyDownEscape:
        if (!allowNewItem) {
          return _objectSpread$D(_objectSpread$D({}, changes), {}, {
            inputValue: ''
          });
        }

        return _objectSpread$D(_objectSpread$D({}, changes), {}, {
          // Give current input written value back to show it in input
          inputValue: inputValue,
          isOpen: false
        });

      default:
        return changes;
    }
  };

  return /*#__PURE__*/React.createElement(Downshift, _objectSpread$D({
    inputValue: parseValue(inputValueState, getSuggestionValue),
    onInputValueChange: onInputValueChangeHandler,
    itemToString: itemToString,
    onSelect: onSelect,
    onUserAction: onUserAction,
    stateReducer: stateReducer
  }, downshiftProps), function (state) {
    var _state$getInputProps = state.getInputProps(),
        onKeyDown = _state$getInputProps.onKeyDown;

    return /*#__PURE__*/React.createElement("div", {
      onKeyDown: onKeyDown
    }, renderDropMenu(state, renderInput(state)));
  });
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

var isObject$1 = isObject$c;

var classof$1 = classofRaw$1;

var wellKnownSymbol$2 = wellKnownSymbol$k;

var MATCH$1 = wellKnownSymbol$2('match'); // `IsRegExp` abstract operation
// https://tc39.es/ecma262/#sec-isregexp

var isRegexp = function (it) {
  var isRegExp;
  return isObject$1(it) && ((isRegExp = it[MATCH$1]) !== undefined ? !!isRegExp : classof$1(it) == 'RegExp');
};

var isRegExp = isRegexp;

var notARegexp = function (it) {
  if (isRegExp(it)) {
    throw TypeError("The method doesn't accept regular expressions");
  }

  return it;
};

var wellKnownSymbol$1 = wellKnownSymbol$k;

var MATCH = wellKnownSymbol$1('match');

var correctIsRegexpLogic = function (METHOD_NAME) {
  var regexp = /./;

  try {
    '/./'[METHOD_NAME](regexp);
  } catch (error1) {
    try {
      regexp[MATCH] = false;
      return '/./'[METHOD_NAME](regexp);
    } catch (error2) {
      /* empty */
    }
  }

  return false;
};

var $$a = _export;

var toLength$7 = toLength$c;

var notARegExp$1 = notARegexp;

var requireObjectCoercible$4 = requireObjectCoercible$8;

var correctIsRegExpLogic$1 = correctIsRegexpLogic;


var $startsWith = ''.startsWith;
var min$1 = Math.min;
var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic$1('startsWith'); // https://github.com/zloirock/core-js/pull/702
// https://tc39.es/ecma262/#sec-string.prototype.startswith

$$a({
  target: 'String',
  proto: true,
  forced: !CORRECT_IS_REGEXP_LOGIC
}, {
  startsWith: function startsWith(searchString
  /* , position = 0 */
  ) {
    var that = String(requireObjectCoercible$4(this));
    notARegExp$1(searchString);
    var index = toLength$7(min$1(arguments.length > 1 ? arguments[1] : undefined, that.length));
    var search = String(searchString);
    return $startsWith ? $startsWith.call(that, search, index) : that.slice(index, index + search.length) === search;
  }
});

var entryVirtual$a = entryVirtual$e;

var startsWith$2 = entryVirtual$a('String').startsWith;

var startsWith$1 = startsWith$2;

var StringPrototype$3 = String.prototype;

var startsWith_1 = function (it) {
  var own = it.startsWith;
  return typeof it === 'string' || it === StringPrototype$3 || it instanceof String && own === StringPrototype$3.startsWith ? startsWith$1 : own;
};

var parent$a = startsWith_1;

var startsWith = parent$a;

// a string of all valid unicode whitespaces
var whitespaces$2 = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' + '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';

var requireObjectCoercible$3 = requireObjectCoercible$8;

var whitespaces$1 = whitespaces$2;

var whitespace = '[' + whitespaces$1 + ']';
var ltrim = RegExp('^' + whitespace + whitespace + '*');
var rtrim = RegExp(whitespace + whitespace + '*$'); // `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation

var createMethod$1 = function (TYPE) {
  return function ($this) {
    var string = String(requireObjectCoercible$3($this));
    if (TYPE & 1) string = string.replace(ltrim, '');
    if (TYPE & 2) string = string.replace(rtrim, '');
    return string;
  };
};

var stringTrim = {
  // `String.prototype.{ trimLeft, trimStart }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimstart
  start: createMethod$1(1),
  // `String.prototype.{ trimRight, trimEnd }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimend
  end: createMethod$1(2),
  // `String.prototype.trim` method
  // https://tc39.es/ecma262/#sec-string.prototype.trim
  trim: createMethod$1(3)
};

var fails = fails$f;

var whitespaces = whitespaces$2;

var non = '\u200B\u0085\u180E'; // check that a method works with the correct list
// of whitespaces and has a correct name

var stringTrimForced = function (METHOD_NAME) {
  return fails(function () {
    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;
  });
};

var $$9 = _export;

var $trim = stringTrim.trim;

var forcedStringTrimMethod = stringTrimForced; // `String.prototype.trim` method
// https://tc39.es/ecma262/#sec-string.prototype.trim


$$9({
  target: 'String',
  proto: true,
  forced: forcedStringTrimMethod('trim')
}, {
  trim: function trim() {
    return $trim(this);
  }
});

var entryVirtual$9 = entryVirtual$e;

var trim$2 = entryVirtual$9('String').trim;

var trim$1 = trim$2;

var StringPrototype$2 = String.prototype;

var trim_1 = function (it) {
  var own = it.trim;
  return typeof it === 'string' || it === StringPrototype$2 || it instanceof String && own === StringPrototype$2.trim ? trim$1 : own;
};

var parent$9 = trim_1;

var trim = parent$9;

var $$8 = _export;

var isObject = isObject$c;

var isArray$1 = isArray$5;

var toAbsoluteIndex$2 = toAbsoluteIndex$4;

var toLength$6 = toLength$c;

var toIndexedObject = toIndexedObject$9;

var createProperty$2 = createProperty$5;

var wellKnownSymbol = wellKnownSymbol$k;

var arrayMethodHasSpeciesSupport$1 = arrayMethodHasSpeciesSupport$5;

var HAS_SPECIES_SUPPORT$1 = arrayMethodHasSpeciesSupport$1('slice');
var SPECIES = wellKnownSymbol('species');
var nativeSlice = [].slice;
var max$1 = Math.max; // `Array.prototype.slice` method
// https://tc39.es/ecma262/#sec-array.prototype.slice
// fallback for not array-like ES3 strings and DOM objects

$$8({
  target: 'Array',
  proto: true,
  forced: !HAS_SPECIES_SUPPORT$1
}, {
  slice: function slice(start, end) {
    var O = toIndexedObject(this);
    var length = toLength$6(O.length);
    var k = toAbsoluteIndex$2(start, length);
    var fin = toAbsoluteIndex$2(end === undefined ? length : end, length); // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible

    var Constructor, result, n;

    if (isArray$1(O)) {
      Constructor = O.constructor; // cross-realm fallback

      if (typeof Constructor == 'function' && (Constructor === Array || isArray$1(Constructor.prototype))) {
        Constructor = undefined;
      } else if (isObject(Constructor)) {
        Constructor = Constructor[SPECIES];
        if (Constructor === null) Constructor = undefined;
      }

      if (Constructor === Array || Constructor === undefined) {
        return nativeSlice.call(O, k, fin);
      }
    }

    result = new (Constructor === undefined ? Array : Constructor)(max$1(fin - k, 0));

    for (n = 0; k < fin; k++, n++) if (k in O) createProperty$2(result, n, O[k]);

    result.length = n;
    return result;
  }
});

var entryVirtual$8 = entryVirtual$e;

var slice$2 = entryVirtual$8('Array').slice;

var slice$1 = slice$2;

var ArrayPrototype$6 = Array.prototype;

var slice_1 = function (it) {
  var own = it.slice;
  return it === ArrayPrototype$6 || it instanceof Array && own === ArrayPrototype$6.slice ? slice$1 : own;
};

var parent$8 = slice_1;

var slice = parent$8;

var $$7 = _export;

var $find = arrayIteration.find;

var FIND = 'find';
var SKIPS_HOLES = true; // Shouldn't skip holes

if (FIND in []) Array(1)[FIND](function () {
  SKIPS_HOLES = false;
}); // `Array.prototype.find` method
// https://tc39.es/ecma262/#sec-array.prototype.find

$$7({
  target: 'Array',
  proto: true,
  forced: SKIPS_HOLES
}, {
  find: function find(callbackfn
  /* , that = undefined */
  ) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
}); // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables

var entryVirtual$7 = entryVirtual$e;

var find$3 = entryVirtual$7('Array').find;

var find$2 = find$3;

var ArrayPrototype$5 = Array.prototype;

var find_1 = function (it) {
  var own = it.find;
  return it === ArrayPrototype$5 || it instanceof Array && own === ArrayPrototype$5.find ? find$2 : own;
};

var parent$7 = find_1;

var find$1 = parent$7;

var popperProps = {
  modifiers: {
    preventOverflow: {
      escapeWithReference: true
    }
  }
}; // eslint-disable-next-line complexity

var isEmpty = function isEmpty(wrapperValue) {
  if (isNumber(wrapperValue)) {
    return false;
  }

  if (wrapperValue !== 0 && isEmpty$1(wrapperValue) || isNil(wrapperValue)) {
    return true;
  }

  if (wrapperValue.label && wrapperValue.id) {
    return isEmpty$1(wrapperValue.id.toString());
  }

  if (wrapperValue.label !== undefined && wrapperValue.value !== undefined) {
    return isEmpty$1(wrapperValue.label) && isEmpty$1(wrapperValue.value);
  } // Empty check for the label field and compound field


  if (wrapperValue.label) {
    return isEmpty$1(wrapperValue.value.toString());
  } // Empty check for single the value fields


  return isEmpty$1(wrapperValue.toString());
};
var createBccLink = function createBccLink(bcc) {
  return bcc ? "?bcc=".concat(encodeURIComponent(bcc)) : '';
};
var formatTextArea = function formatTextArea(inputValue) {
  var val = trim$3(inputValue);
  val = val.replace(/\n\s*\n/g, '\n\n');
  val = val.replace(/\n\s/g, '\n');
  val = val.replace(/\t/g, '');
  return val;
};
var localeMomentFormat = function localeMomentFormat(locale, format) {
  return moment$1().locale(locale || 'en-GB').creationData().locale.longDateFormat(format);
};

var getFormattedPhoneData = function getFormattedPhoneData(settings, apiSettings) {
  if (typeof (settings === null || settings === void 0 ? void 0 : settings.pattern) === 'string') {
    return settings.pattern;
  }

  if (typeof (apiSettings === null || apiSettings === void 0 ? void 0 : apiSettings.pattern) === 'string') {
    return apiSettings.pattern;
  }

  return 'skype:[number]?chat';
};

var createPhoneLink = function createPhoneLink(phone, propsSettings, apiSettings) {
  if (!isString(phone)) {
    return '';
  }

  var formatted = getFormattedPhoneData(propsSettings, apiSettings);
  var cleanPhone = phone.replace(/(\s)/g, '');
  /*
      [number] -> the phone number value in the field
      [user_id] -> the id of the logged in user
      [deal_id] -> the deal id of the deal the user is on (if possible)
      [person_id] -> the id of the person the number is linked to (if possible)
      [org_id] -> the id of the organization the number is linked to (if possible)
  */

  formatted = formatted.split('[number]').join(cleanPhone); // other optional fields replaced with blank if no data provided
  // user_id can be found in user_self, other values need to be provided in `settings` prop

  formatted = formatted.split('[user_id]').join(String(apiSettings === null || apiSettings === void 0 ? void 0 : apiSettings.user_id));
  formatted = formatted.split('[deal_id]').join(String((propsSettings === null || propsSettings === void 0 ? void 0 : propsSettings.deal_id) || ''));
  formatted = formatted.split('[person_id]').join(String((propsSettings === null || propsSettings === void 0 ? void 0 : propsSettings.person_id) || ''));
  formatted = formatted.split('[org_id]').join(String((propsSettings === null || propsSettings === void 0 ? void 0 : propsSettings.org_id) || '')); // This prevents basic XSS when used like this (creates link with executable JS on click):
  //  href={createPhoneLink( ... )}

  return formatted.replace(/^(javascript|data):.*/, '');
}; // formatPhoneNumber converts 10 digit long phone numbers to US phone number format
// if user has "en_US" locale and "format_phone_numbers_enabled" setting is turned on.
// It has similar purpose as "format_visible_phone_nr" helper method in back-end.

var formatPhoneNumber = function formatPhoneNumber(phone, locale, format) {
  if (format && locale === 'en-US') {
    if (startsWith(phone).call(phone, '+1')) {
      var _context;

      return "+1 ".concat(trim(_context = slice(phone).call(phone, 2)).call(_context).replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3'));
    }

    return phone.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
  }

  return phone;
};
var stringifyUserName = function stringifyUserName(val) {
  return function () {
    return val || '';
  };
};
var findUserById = function findUserById(id, users) {
  return find$1(users).call(users, function (user) {
    return user.id === id;
  });
};
var initOptions = function initOptions(fields, options, fieldType, fieldKey) {
  if (options !== null && options !== void 0 && options.length) {
    return options;
  }

  if (fields && fieldType && fieldKey) {
    var _fields$attributes$fi, _fields$attributes$fi2;

    return ((_fields$attributes$fi = fields.attributes[fieldType]) === null || _fields$attributes$fi === void 0 ? void 0 : (_fields$attributes$fi2 = find$1(_fields$attributes$fi).call(_fields$attributes$fi, function (field) {
      return field.key === fieldKey;
    })) === null || _fields$attributes$fi2 === void 0 ? void 0 : _fields$attributes$fi2.options) || [];
  }

  return [];
};
var getValue$3 = function getValue(_ref) {
  var value = _ref.value,
      defaultValue = _ref.defaultValue,
      _ref$callback = _ref.callback,
      callback = _ref$callback === void 0 ? function (f) {
    return f;
  } : _ref$callback,
      _ref$defaultReturn = _ref.defaultReturn,
      defaultReturn = _ref$defaultReturn === void 0 ? {
    defaultValue: ''
  } : _ref$defaultReturn;

  if (!isUndefined(value)) {
    return {
      value: callback(value)
    };
  }

  if (!isUndefined(defaultValue)) {
    return {
      defaultValue: callback(defaultValue)
    };
  }

  return defaultReturn;
};

var useValidation = function useValidation(translator) {
  var tooLong = "^".concat(translator.gettext('Input can be maximum 255 characters long'));
  return {
    getValidation: function getValidation(_ref) {
      var value = _ref.value,
          custom = _ref.custom;
      var trimmedValues = trim$3(String(value));
      var constraints = {
        defaultValidation: {
          presence: {
            allowEmpty: true
          },
          length: {
            maximum: 255,
            message: tooLong
          }
        }
      };
      return validate({
        defaultValidation: trimmedValues
      }, custom || constraints);
    },
    getEmailValidation: function getEmailValidation(_ref2) {
      var value = _ref2.value,
          custom = _ref2.custom;
      var trimmedValues = trim$3(String(value));
      var constraints = {
        email: {
          presence: {
            allowEmpty: true
          },
          email: {
            message: "^".concat(translator.gettext('Email is not valid'))
          },
          length: {
            maximum: 255,
            message: tooLong
          }
        }
      };
      return validate({
        email: trimmedValues
      }, custom || constraints);
    },
    getNumberValidation: function getNumberValidation(_ref3) {
      var value = _ref3.value,
          custom = _ref3.custom,
          monetary = _ref3.monetary,
          formatter = _ref3.formatter;
      var trimmedValues = value;
      var constraints = {
        number: {
          presence: {
            allowEmpty: true
          },
          numericality: {
            message: "^".concat(translator.gettext('Input is not a number'))
          }
        }
      };

      if (formatter) {
        var validateValue = value.toString();
        var _formatter$localeConv = formatter.localeConvention,
            thousands_sep = _formatter$localeConv.thousands_sep,
            decimal_point = _formatter$localeConv.decimal_point;
        validateValue = validateValue.replace(/\s/g, '');
        validateValue = replace(validateValue, new RegExp(thousands_sep, 'g'), '');
        validateValue = replace(validateValue, decimal_point, '.');
        trimmedValues = isNaN$1(Number(validateValue)) ? value : formatter === null || formatter === void 0 ? void 0 : formatter.unformat(value, monetary);
        return validate({
          number: trimmedValues
        }, custom || constraints);
      }

      return validate({
        number: value
      }, custom || constraints);
    },
    getDurationValidation: function getDurationValidation(_ref4) {
      var value = _ref4.value,
          custom = _ref4.custom;
      var constraints = {
        duration: {
          presence: {
            allowEmpty: true
          },
          format: {
            pattern: '\\d*:\\d*$',
            message: "^".concat(translator.gettext('Input is not a valid duration time'))
          }
        }
      };
      return validate({
        duration: value
      }, custom || constraints);
    },
    getPercentageValidation: function getPercentageValidation(_ref5) {
      var value = _ref5.value,
          custom = _ref5.custom;
      var trimmedValues = Number(trimStart(value));
      var constraints = {
        percentage: {
          presence: {
            allowEmpty: true
          },
          numericality: {
            strict: true,
            greaterThanOrEqualTo: 0,
            lessThanOrEqualTo: 100,
            message: "^".concat(translator.gettext('Input must be an integer between 0 and 100'))
          }
        }
      };
      return validate({
        percentage: trimmedValues
      }, custom || constraints);
    },
    getTextAreaValidation: function getTextAreaValidation(_ref6) {
      var value = _ref6.value,
          custom = _ref6.custom;
      var formattedText = formatTextArea(value);
      var trimmedValues = trimStart(formattedText);
      var constraints = {
        textarea: {
          presence: {
            allowEmpty: true
          },
          length: {
            maximum: 65535,
            message: "^".concat(translator.gettext('Input can be maximum 65 535 characters long'))
          }
        }
      };
      return validate({
        textarea: trimmedValues
      }, custom || constraints);
    },
    handleValidation: function handleValidation(_ref7) {
      var formValue = _ref7.formValue,
          validateCallback = _ref7.validate,
          data = _ref7.data,
          customValidation = _ref7.customValidation,
          formatter = _ref7.formatter,
          monetary = _ref7.monetary;

      var isString = function isString(e) {
        return typeof e === 'string';
      };

      var isEvent = function isEvent(e) {
        return _typeof(e) === 'object' && !!e.currentTarget;
      };

      var getValue = function getValue(val) {
        if (isString(val)) {
          return val;
        }

        if (isEvent(val)) {
          return val.currentTarget.value;
        }

        return;
      };

      var value = getValue(formValue);

      if (!value) {
        return;
      }

      var validation = validateCallback({
        translator: translator,
        data: data,
        value: value,
        custom: customValidation,
        formatter: formatter,
        monetary: monetary
      });
      var error = validation ? validation[keys$1(validation)[0]][0] : '';
      return error;
    }
  };
};

var AddressFooter = function AddressFooter() {
  return /*#__PURE__*/React.createElement(Spacing, {
    all: "m",
    className: styles$u.footer
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$u.poweredByGoogle
  }));
};

var _excluded$m = ["actionIcon", "portalTo", "disabled", "onComponentChange", "onValidation", "error", "value"];

function ownKeys$C(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$C(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$C(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$C(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Address = function Address(_ref) {
  var actionIcon = _ref.actionIcon,
      portalTo = _ref.portalTo,
      _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      onComponentChange = _ref.onComponentChange,
      onValidation = _ref.onValidation,
      error = _ref.error,
      value = _ref.value,
      restProps = _objectWithoutProperties(_ref, _excluded$m);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      languageCode = _parseContext.languageCode,
      countryCode = _parseContext.countryCode;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var _useState3 = useState(null),
      _useState4 = _slicedToArray(_useState3, 2),
      autocompleteService = _useState4[0],
      setAutocompleteService = _useState4[1];

  var googleCallback = function googleCallback() {
    setAutocompleteService(new window.google.maps.places.AutocompleteService());
  };

  useEffect(function () {
    loadGoogleMapsAPI(googleCallback, languageCode, countryCode);
  }, []);

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var getSuggestionValue = function getSuggestionValue(suggestion) {
    if (typeof suggestion === 'string') {
      return suggestion;
    }

    return suggestion.description;
  };

  var getGeocodedData = function getGeocodedData(suggestion) {
    if (typeof suggestion === 'string' || !window.google.maps) {
      return onComponentChange(suggestion);
    }

    new window.google.maps.Geocoder().geocode({
      address: suggestion.description
    }, function (result, status) {
      if (status !== google.maps.GeocoderStatus.OK) {
        return onComponentChange(suggestion);
      }

      return onComponentChange(_objectSpread$C(_objectSpread$C({}, suggestion), {}, {
        geocoded: result
      }));
    });
  };

  if (!autocompleteService) {
    return /*#__PURE__*/React.createElement(React.Fragment, null);
  }

  return /*#__PURE__*/React.createElement(InputSelect, _objectSpread$C(_objectSpread$C({
    getSuggestionValue: getSuggestionValue,
    getSuggestions: getSuggestions(autocompleteService),
    dropdownTrigger: 2,
    inputProps: {
      onBlur: validate,
      message: error || validationError,
      autoComplete: 'new-street-address'
    },
    value: value,
    dropmenuProps: {
      footer: /*#__PURE__*/React.createElement(AddressFooter, null)
    },
    suggestionIcon: "address",
    portalTo: portalTo,
    disableNewLabel: true,
    onComponentChange: getGeocodedData,
    actionIcon: actionIcon,
    disabled: disabled
  }, restProps), {}, {
    allowNewItem: true
  }));
};

var AutocompleteRead = function AutocompleteRead(_ref) {
  var value = _ref.value;

  if (!value) {
    return null;
  }

  if (typeof value === 'string') {
    return value;
  }

  return /*#__PURE__*/React.createElement(React.Fragment, null, value.title);
};

var MANDATORY_SEARCH_TERM_ERROR = 'Search term must be provided';
var DataTypes;

(function (DataTypes) {
  DataTypes["org"] = "organizations";
  DataTypes["person"] = "persons";
  DataTypes["deal"] = "deals";
})(DataTypes || (DataTypes = {}));

var FieldDataTypes;

(function (FieldDataTypes) {
  FieldDataTypes["org"] = "organizationField";
  FieldDataTypes["person"] = "personField";
  FieldDataTypes["deal"] = "dealField";
})(FieldDataTypes || (FieldDataTypes = {}));

var FieldTypes;

(function (FieldTypes) {
  FieldTypes["org"] = "organization";
  FieldTypes["person"] = "person";
  FieldTypes["deal"] = "deal";
})(FieldTypes || (FieldTypes = {}));

function find(_x, _x2) {
  return _find.apply(this, arguments);
}

function _find() {
  _find = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(type, term) {
    var _context;

    var limit,
        _yield$get,
        data,
        _args = arguments;

    return _regeneratorRuntime.wrap(function _callee$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            limit = _args.length > 2 && _args[2] !== undefined ? _args[2] : 100;

            if (term) {
              _context2.next = 3;
              break;
            }

            throw new Error(MANDATORY_SEARCH_TERM_ERROR);

          case 3:
            _context2.next = 5;
            return get$1(concat(_context = "/api/v1/".concat(type, "/search?fields=")).call(_context, type === 'deals' ? 'title' : 'name'), {
              queryParams: {
                term: term,
                limit: String(limit)
              }
            });

          case 5:
            _yield$get = _context2.sent;
            data = _yield$get.data;
            return _context2.abrupt("return", data || []);

          case 8:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee);
  }));
  return _find.apply(this, arguments);
}

function searchResults(_x3, _x4, _x5) {
  return _searchResults.apply(this, arguments);
}

function _searchResults() {
  _searchResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fieldType, fieldKey, term) {
    var limit,
        _yield$get2,
        data,
        _args2 = arguments;

    return _regeneratorRuntime.wrap(function _callee2$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            limit = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : 100;

            if (term) {
              _context3.next = 3;
              break;
            }

            throw new Error(MANDATORY_SEARCH_TERM_ERROR);

          case 3:
            if (fieldType) {
              _context3.next = 5;
              break;
            }

            throw new Error('Field type term must be provided');

          case 5:
            if (fieldKey) {
              _context3.next = 7;
              break;
            }

            throw new Error('Field key term must be provided');

          case 7:
            _context3.next = 9;
            return get$1('/v1/itemSearch/field', {
              queryParams: {
                term: term,
                limit: String(limit),
                fieldType: fieldType,
                fieldKey: fieldKey
              }
            });

          case 9:
            _yield$get2 = _context3.sent;
            data = _yield$get2.data;
            return _context3.abrupt("return", data || []);

          case 12:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee2);
  }));
  return _searchResults.apply(this, arguments);
}

function updateCategory(_x6, _x7) {
  return _updateCategory.apply(this, arguments);
}

function _updateCategory() {
  _updateCategory = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fieldId, propOptions) {
    var res, options;
    return _regeneratorRuntime.wrap(function _callee3$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            _context4.next = 2;
            return put("/api/v1/productFields/".concat(fieldId), {
              field_type: 'enum',
              options: propOptions
            });

          case 2:
            res = _context4.sent;
            options = res.data.options;
            return _context4.abrupt("return", options || []);

          case 5:
          case "end":
            return _context4.stop();
        }
      }
    }, _callee3);
  }));
  return _updateCategory.apply(this, arguments);
}

function getCategoryOptions(_x8) {
  return _getCategoryOptions.apply(this, arguments);
}

function _getCategoryOptions() {
  _getCategoryOptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(fieldId) {
    var res, options;
    return _regeneratorRuntime.wrap(function _callee4$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            _context5.next = 2;
            return get$1("/api/v1/productFields/".concat(fieldId));

          case 2:
            res = _context5.sent;
            options = res.data.options;
            return _context5.abrupt("return", options || []);

          case 5:
          case "end":
            return _context5.stop();
        }
      }
    }, _callee4);
  }));
  return _getCategoryOptions.apply(this, arguments);
}

var _excluded$l = ["fieldType", "fieldKey", "error", "value", "onValidation"];

function ownKeys$B(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$B(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$B(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$B(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Autocomplete = function Autocomplete(_ref) {
  var fieldType = _ref.fieldType,
      fieldKey = _ref.fieldKey,
      error = _ref.error,
      value = _ref.value,
      onValidation = _ref.onValidation,
      restProps = _objectWithoutProperties(_ref, _excluded$l);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var getSuggestions = function getSuggestions(val) {
    var type = "".concat(fieldType, "Field");
    return searchResults(type, fieldKey, val);
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var getSuggestion = function getSuggestion(suggest) {
    if (typeof suggest === 'string') {
      return suggest;
    }

    return suggest[fieldKey];
  };

  return /*#__PURE__*/React.createElement(InputSelect, _objectSpread$B(_objectSpread$B({}, getValue$3({
    value: value
  })), {}, {
    getSuggestionValue: getSuggestion,
    getSuggestions: getSuggestions,
    dropdownTrigger: 2,
    allowNewItem: true,
    inputProps: {
      onBlur: validate,
      message: error || validationError
    }
  }, restProps));
};

var DATE_FORMAT$1 = 'YYYY-MM-DD';
var replaceSeparator = function replaceSeparator(format) {
  return function (separator) {
    return format.replace(/[.\-/]/g, separator);
  };
};
var getAllSeparators = function getAllSeparators(format) {
  var separators = ['.', '/', '-'];
  return map(separators).call(separators, replaceSeparator(format));
};
var getMoment = function getMoment(date, format) {
  if (!date || typeof date !== 'string') {
    return undefined;
  }

  var defaultFormat = moment$1(date, DATE_FORMAT$1); // SQL date format

  if (defaultFormat.isValid()) {
    return defaultFormat;
  }

  return undefined;
};
var formatDate = function formatDate(date) {
  if (moment$1.isMoment(date)) {
    return date.locale('en').format(DATE_FORMAT$1).toString();
  }

  return '';
};
var renderPopperContainer = function renderPopperContainer(_ref) {
  var children = _ref.children,
      element = _ref.element;
  return /*#__PURE__*/ReactDOM.createPortal(children, typeof element === 'boolean' ? document.body : element);
};
var renderPopperAttribute = function renderPopperAttribute(portalTo) {
  if (!portalTo) {
    return null;
  }

  return {
    popperContainer: function popperContainer(_ref2) {
      var children = _ref2.children;
      return renderPopperContainer({
        children: children,
        element: portalTo
      });
    }
  };
};
var parseSelectedDate = function parseSelectedDate(selectedDate, format) {
  if (moment$1.isMoment(selectedDate)) {
    return moment$1(selectedDate).format(format);
  }

  return '';
};
var getDateRangeProps = function getDateRangeProps(minEndDate) {
  return minEndDate ? {
    minDate: minEndDate
  } : null;
};
var getInitDate = function getInitDate(value) {
  return value ? moment$1(new Date(value)) : undefined;
};

var anObject = anObject$b;

var iteratorClose = iteratorClose$2; // call something on iterator step with safe closing on error


var callWithSafeIterationClosing$1 = function (iterator, fn, value, ENTRIES) {
  try {
    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
  } catch (error) {
    iteratorClose(iterator);
    throw error;
  }
};

var bind$1 = functionBindContext;

var toObject$3 = toObject$a;

var callWithSafeIterationClosing = callWithSafeIterationClosing$1;

var isArrayIteratorMethod = isArrayIteratorMethod$2;

var toLength$5 = toLength$c;

var createProperty$1 = createProperty$5;

var getIteratorMethod = getIteratorMethod$2; // `Array.from` method implementation
// https://tc39.es/ecma262/#sec-array.from


var arrayFrom = function from(arrayLike
/* , mapfn = undefined, thisArg = undefined */
) {
  var O = toObject$3(arrayLike);
  var C = typeof this == 'function' ? this : Array;
  var argumentsLength = arguments.length;
  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
  var mapping = mapfn !== undefined;
  var iteratorMethod = getIteratorMethod(O);
  var index = 0;
  var length, result, step, iterator, next, value;
  if (mapping) mapfn = bind$1(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2); // if the target is not iterable or it's an array with the default iterator - use a simple case

  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {
    iterator = iteratorMethod.call(O);
    next = iterator.next;
    result = new C();

    for (; !(step = next.call(iterator)).done; index++) {
      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;
      createProperty$1(result, index, value);
    }
  } else {
    length = toLength$5(O.length);
    result = new C(length);

    for (; length > index; index++) {
      value = mapping ? mapfn(O[index], index) : O[index];
      createProperty$1(result, index, value);
    }
  }

  result.length = index;
  return result;
};

var $$6 = _export;

var from$2 = arrayFrom;

var checkCorrectnessOfIteration = checkCorrectnessOfIteration$2;

var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {
  // eslint-disable-next-line es/no-array-from -- required for testing
  Array.from(iterable);
}); // `Array.from` method
// https://tc39.es/ecma262/#sec-array.from

$$6({
  target: 'Array',
  stat: true,
  forced: INCORRECT_ITERATION
}, {
  from: from$2
});

var path = path$a;

var from$1 = path.Array.from;

var parent$6 = from$1;

var from = parent$6;

var moment = extendMoment(moment$1);
var setInterval = function setInterval(startDate, endDate) {
  if (!startDate || !endDate) {
    return undefined;
  }

  var interval = endDate.diff(startDate, 'days');
  return interval;
};
var substractOneMonth = function substractOneMonth(startDate) {
  if (!startDate) {
    return [];
  }

  var beginingOfCurrentMonth = moment(startDate).startOf('month');
  var range = moment.range(beginingOfCurrentMonth, startDate);
  return from(range.by('day', {
    excludeEnd: true
  }));
};
var getDateReadValue = function getDateReadValue(startDate, endDate) {
  var _context;

  var defaultValueIndicator = '...';
  return concat(_context = "".concat(startDate ? startDate : defaultValueIndicator, " - ")).call(_context, endDate ? endDate : defaultValueIndicator);
};
var getAllowClearValues = function getAllowClearValues() {
  var allowClear = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;
  var allowClearStart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;
  var allowClearEnd = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;
  var allowClearStartValue = allowClear === undefined ? allowClearStart : allowClear;
  var allowClearEndValue = allowClear === undefined ? allowClearEnd : allowClear;
  return {
    allowClearStartValue: allowClearStartValue,
    allowClearEndValue: allowClearEndValue
  };
};

var DateRangeRead = function DateRangeRead(_ref) {
  var _getMoment, _getMoment2;

  var value = _ref.value;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale;

  if (!value) {
    return null;
  }

  var startDate = value.startDate,
      endDate = value.endDate;
  var format = localeMomentFormat(locale, 'L');
  var localeStartDate = (_getMoment = getMoment(startDate)) === null || _getMoment === void 0 ? void 0 : _getMoment.format(format);
  var localeEndDate = (_getMoment2 = getMoment(endDate)) === null || _getMoment2 === void 0 ? void 0 : _getMoment2.format(format);
  return /*#__PURE__*/React.createElement(React.Fragment, null, getDateReadValue(localeStartDate, localeEndDate));
};

var css_248z$u = ".react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle, .react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle, .react-datepicker__year-read-view--down-arrow, .react-datepicker__month-read-view--down-arrow, .react-datepicker__month-year-read-view--down-arrow{margin-left:-8px;position:absolute}.react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle, .react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle, .react-datepicker__year-read-view--down-arrow, .react-datepicker__month-read-view--down-arrow, .react-datepicker__month-year-read-view--down-arrow, .react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle::before, .react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle::before, .react-datepicker__year-read-view--down-arrow::before, .react-datepicker__month-read-view--down-arrow::before, .react-datepicker__month-year-read-view--down-arrow::before{box-sizing:content-box;position:absolute;border:8px solid transparent;height:0;width:1px}.react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle::before, .react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle::before, .react-datepicker__year-read-view--down-arrow::before, .react-datepicker__month-read-view--down-arrow::before, .react-datepicker__month-year-read-view--down-arrow::before{content:\"\";z-index:-1;border-width:8px;left:-8px;border-bottom-color:#aeaeae}.react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle{top:0;margin-top:-8px}.react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle, .react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle::before{border-top:none;border-bottom-color:#f0f0f0}.react-datepicker-popper[data-placement^=\"bottom\"] .react-datepicker__triangle::before{top:-1px;border-bottom-color:#aeaeae}.react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle, .react-datepicker__year-read-view--down-arrow, .react-datepicker__month-read-view--down-arrow, .react-datepicker__month-year-read-view--down-arrow{bottom:0;margin-bottom:-8px}.react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle, .react-datepicker__year-read-view--down-arrow, .react-datepicker__month-read-view--down-arrow, .react-datepicker__month-year-read-view--down-arrow, .react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle::before, .react-datepicker__year-read-view--down-arrow::before, .react-datepicker__month-read-view--down-arrow::before, .react-datepicker__month-year-read-view--down-arrow::before{border-bottom:none;border-top-color:#fff}.react-datepicker-popper[data-placement^=\"top\"] .react-datepicker__triangle::before, .react-datepicker__year-read-view--down-arrow::before, .react-datepicker__month-read-view--down-arrow::before, .react-datepicker__month-year-read-view--down-arrow::before{bottom:-1px;border-top-color:#aeaeae}.react-datepicker-wrapper, .react-datepicker{display:inline-block}.react-datepicker{font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:.8rem;background-color:#fff;color:#000;border:1px solid #aeaeae;border-radius:.3rem;position:relative}.react-datepicker--time-only .react-datepicker__triangle{left:35px}.react-datepicker--time-only .react-datepicker__time-container{border-left:0}.react-datepicker--time-only .react-datepicker__time, .react-datepicker--time-only .react-datepicker__time-box{border-radius:0.3rem}.react-datepicker__triangle{position:absolute;left:50px}.react-datepicker-popper{z-index:1}.react-datepicker-popper[data-placement^=\"bottom\"]{margin-top:10px}.react-datepicker-popper[data-placement^=\"top\"]{margin-bottom:10px}.react-datepicker-popper[data-placement^=\"right\"]{margin-left:8px}.react-datepicker-popper[data-placement^=\"right\"] .react-datepicker__triangle{left:auto;right:42px}.react-datepicker-popper[data-placement^=\"left\"]{margin-right:8px}.react-datepicker-popper[data-placement^=\"left\"] .react-datepicker__triangle{left:42px;right:auto}.react-datepicker__header{text-align:center;background-color:#f0f0f0;border-bottom:1px solid #aeaeae;border-top-left-radius:.3rem;border-top-right-radius:.3rem;padding-top:8px;position:relative}.react-datepicker__header--time{padding-bottom:8px;padding-left:5px;padding-right:5px}.react-datepicker__year-dropdown-container--select, .react-datepicker__month-dropdown-container--select, .react-datepicker__month-year-dropdown-container--select, .react-datepicker__year-dropdown-container--scroll, .react-datepicker__month-dropdown-container--scroll, .react-datepicker__month-year-dropdown-container--scroll{display:inline-block;margin:0 2px}.react-datepicker__current-month, .react-datepicker-time__header{margin-top:0;color:#000;font-weight:bold;font-size:.944rem}.react-datepicker-time__header{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.react-datepicker__navigation{background:none;line-height:1.7rem;text-align:center;cursor:pointer;position:absolute;top:10px;width:0;padding:0;border:.45rem solid transparent;z-index:1;height:10px;width:10px;text-indent:-999em;overflow:hidden}.react-datepicker__navigation--previous{left:10px;border-right-color:#ccc}.react-datepicker__navigation--previous:hover{border-right-color:#b3b3b3}.react-datepicker__navigation--previous--disabled, .react-datepicker__navigation--previous--disabled:hover{border-right-color:#e6e6e6;cursor:default}.react-datepicker__navigation--next{right:10px;border-left-color:#ccc}.react-datepicker__navigation--next--with-time:not(.react-datepicker__navigation--next--with-today-button){right:80px}.react-datepicker__navigation--next:hover{border-left-color:#b3b3b3}.react-datepicker__navigation--next--disabled, .react-datepicker__navigation--next--disabled:hover{border-left-color:#e6e6e6;cursor:default}.react-datepicker__navigation--years{position:relative;top:0;display:block;margin-left:auto;margin-right:auto}.react-datepicker__navigation--years-previous{top:4px;border-top-color:#ccc}.react-datepicker__navigation--years-previous:hover{border-top-color:#b3b3b3}.react-datepicker__navigation--years-upcoming{top:-4px;border-bottom-color:#ccc}.react-datepicker__navigation--years-upcoming:hover{border-bottom-color:#b3b3b3}.react-datepicker__month-container{float:left}.react-datepicker__month{margin:.4rem;text-align:center}.react-datepicker__time-container{float:right;border-left:1px solid #aeaeae;width:70px}.react-datepicker__time-container--with-today-button{display:inline;border:1px solid #aeaeae;border-radius:0.3rem;position:absolute;right:-72px;top:0}.react-datepicker__time-container .react-datepicker__time{position:relative;background:white}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box{width:70px;overflow-x:hidden;margin:0 auto;text-align:center}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list{list-style:none;margin:0;height:calc(195px + 0.85rem);overflow-y:scroll;padding-right:0px;padding-left:0px;width:100%;box-sizing:content-box}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item{height:30px;padding:5px 10px}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item:hover{cursor:pointer;background-color:#f0f0f0}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item--selected{background-color:#216ba5;color:white;font-weight:bold}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item--selected:hover{background-color:#216ba5}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item--disabled{color:#ccc}.react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box ul.react-datepicker__time-list li.react-datepicker__time-list-item--disabled:hover{cursor:default;background-color:transparent}.react-datepicker__week-number{color:#ccc;display:inline-block;width:1.7rem;line-height:1.7rem;text-align:center;margin:.166rem}.react-datepicker__week-number.react-datepicker__week-number--clickable{cursor:pointer}.react-datepicker__week-number.react-datepicker__week-number--clickable:hover{border-radius:.3rem;background-color:#f0f0f0}.react-datepicker__day-names, .react-datepicker__week{white-space:nowrap}.react-datepicker__day-name, .react-datepicker__day, .react-datepicker__time-name{color:#000;display:inline-block;width:1.7rem;line-height:1.7rem;text-align:center;margin:.166rem}.react-datepicker__day{cursor:pointer}.react-datepicker__day:hover{border-radius:.3rem;background-color:#f0f0f0}.react-datepicker__day--today{font-weight:bold}.react-datepicker__day--highlighted{border-radius:.3rem;background-color:#3dcc4a;color:#fff}.react-datepicker__day--highlighted:hover{background-color:#32be3f}.react-datepicker__day--highlighted-custom-1{color:magenta}.react-datepicker__day--highlighted-custom-2{color:green}.react-datepicker__day--selected, .react-datepicker__day--in-selecting-range, .react-datepicker__day--in-range{border-radius:.3rem;background-color:#216ba5;color:#fff}.react-datepicker__day--selected:hover, .react-datepicker__day--in-selecting-range:hover, .react-datepicker__day--in-range:hover{background-color:#1d5d90}.react-datepicker__day--keyboard-selected{border-radius:.3rem;background-color:#2a87d0;color:#fff}.react-datepicker__day--keyboard-selected:hover{background-color:#1d5d90}.react-datepicker__day--in-selecting-range:not(.react-datepicker__day--in-range){background-color:rgba(33,107,165,0.5)}.react-datepicker__month--selecting-range .react-datepicker__day--in-range:not(.react-datepicker__day--in-selecting-range){background-color:#f0f0f0;color:#000}.react-datepicker__day--disabled{cursor:default;color:#ccc}.react-datepicker__day--disabled:hover{background-color:transparent}.react-datepicker__input-container{position:relative;display:inline-block}.react-datepicker__year-read-view, .react-datepicker__month-read-view, .react-datepicker__month-year-read-view{border:1px solid transparent;border-radius:.3rem}.react-datepicker__year-read-view:hover, .react-datepicker__month-read-view:hover, .react-datepicker__month-year-read-view:hover{cursor:pointer}.react-datepicker__year-read-view:hover .react-datepicker__year-read-view--down-arrow, .react-datepicker__year-read-view:hover .react-datepicker__month-read-view--down-arrow, .react-datepicker__month-read-view:hover .react-datepicker__year-read-view--down-arrow, .react-datepicker__month-read-view:hover .react-datepicker__month-read-view--down-arrow, .react-datepicker__month-year-read-view:hover .react-datepicker__year-read-view--down-arrow, .react-datepicker__month-year-read-view:hover .react-datepicker__month-read-view--down-arrow{border-top-color:#b3b3b3}.react-datepicker__year-read-view--down-arrow, .react-datepicker__month-read-view--down-arrow, .react-datepicker__month-year-read-view--down-arrow{border-top-color:#ccc;float:right;margin-left:20px;top:8px;position:relative;border-width:.45rem}.react-datepicker__year-dropdown, .react-datepicker__month-dropdown, .react-datepicker__month-year-dropdown{background-color:#f0f0f0;position:absolute;width:50%;left:25%;top:30px;z-index:1;text-align:center;border-radius:.3rem;border:1px solid #aeaeae}.react-datepicker__year-dropdown:hover, .react-datepicker__month-dropdown:hover, .react-datepicker__month-year-dropdown:hover{cursor:pointer}.react-datepicker__year-dropdown--scrollable, .react-datepicker__month-dropdown--scrollable, .react-datepicker__month-year-dropdown--scrollable{height:150px;overflow-y:scroll}.react-datepicker__year-option, .react-datepicker__month-option, .react-datepicker__month-year-option{line-height:20px;width:100%;display:block;margin-left:auto;margin-right:auto}.react-datepicker__year-option:first-of-type, .react-datepicker__month-option:first-of-type, .react-datepicker__month-year-option:first-of-type{border-top-left-radius:.3rem;border-top-right-radius:.3rem}.react-datepicker__year-option:last-of-type, .react-datepicker__month-option:last-of-type, .react-datepicker__month-year-option:last-of-type{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-bottom-left-radius:.3rem;border-bottom-right-radius:.3rem}.react-datepicker__year-option:hover, .react-datepicker__month-option:hover, .react-datepicker__month-year-option:hover{background-color:#ccc}.react-datepicker__year-option:hover .react-datepicker__navigation--years-upcoming, .react-datepicker__month-option:hover .react-datepicker__navigation--years-upcoming, .react-datepicker__month-year-option:hover .react-datepicker__navigation--years-upcoming{border-bottom-color:#b3b3b3}.react-datepicker__year-option:hover .react-datepicker__navigation--years-previous, .react-datepicker__month-option:hover .react-datepicker__navigation--years-previous, .react-datepicker__month-year-option:hover .react-datepicker__navigation--years-previous{border-top-color:#b3b3b3}.react-datepicker__year-option--selected, .react-datepicker__month-option--selected, .react-datepicker__month-year-option--selected{position:absolute;left:15px}.react-datepicker__close-icon{background-color:transparent;border:0;cursor:pointer;outline:0;padding:0;vertical-align:middle;position:absolute;height:16px;width:16px;top:25%;right:7px}.react-datepicker__close-icon::after{background-color:#216ba5;border-radius:50%;bottom:0;box-sizing:border-box;color:#fff;content:\"\\00d7\";cursor:pointer;font-size:12px;height:16px;width:16px;line-height:1;margin:-8px auto 0;padding:2px;position:absolute;right:0px;text-align:center}.react-datepicker__today-button{background:#f0f0f0;border-top:1px solid #aeaeae;cursor:pointer;text-align:center;font-weight:bold;padding:5px 0;clear:left}.react-datepicker__portal{position:fixed;width:100vw;height:100vh;background-color:rgba(0,0,0,0.8);left:0;top:0;justify-content:center;align-items:center;display:flex;z-index:2147483647}.react-datepicker__portal .react-datepicker__day-name, .react-datepicker__portal .react-datepicker__day, .react-datepicker__portal .react-datepicker__time-name{width:3rem;line-height:3rem}@media (max-width: 400px), (max-height: 550px){.react-datepicker__portal .react-datepicker__day-name, .react-datepicker__portal .react-datepicker__day, .react-datepicker__portal .react-datepicker__time-name{width:2rem;line-height:2rem}}.react-datepicker__portal .react-datepicker__current-month, .react-datepicker__portal .react-datepicker-time__header{font-size:1.44rem}.react-datepicker__portal .react-datepicker__navigation{border:.81rem solid transparent}.react-datepicker__portal .react-datepicker__navigation--previous{border-right-color:#ccc}.react-datepicker__portal .react-datepicker__navigation--previous:hover{border-right-color:#b3b3b3}.react-datepicker__portal .react-datepicker__navigation--previous--disabled, .react-datepicker__portal .react-datepicker__navigation--previous--disabled:hover{border-right-color:#e6e6e6;cursor:default}.react-datepicker__portal .react-datepicker__navigation--next{border-left-color:#ccc}.react-datepicker__portal .react-datepicker__navigation--next:hover{border-left-color:#b3b3b3}.react-datepicker__portal .react-datepicker__navigation--next--disabled, .react-datepicker__portal .react-datepicker__navigation--next--disabled:hover{border-left-color:#e6e6e6;cursor:default}\n";
styleInject(css_248z$u);

var css_248z$t = ".ff_v4290__DatePicker-header__wrapper__1mA{\n\tdisplay:flex;\n\tjustify-content:space-between;\n}\n.ff_v4290__DatePicker-header__month__11b, .ff_v4290__DatePicker-header__year__3pb{\n\tdisplay:inline-block;\n\tcursor:pointer;\n\tposition:absolute;\n\tmargin:0;\n\tleft:0;\n\ttop:0;\n\tright:0;\n\tbottom:0;\n\topacity:0;\n}\n.ff_v4290__DatePicker-header__selects__3Lp{\n\tdisplay:flex;\n\tline-height:normal;\n\tmargin-bottom:6px;\n}\n.ff_v4290__DatePicker-header__selects__3Lp .ff_v4290__DatePicker-header__label__1Bu{\n\t\tdisplay:inline-block;\n\t\tposition:relative;\n\t\toverflow:hidden;\n\t\tmargin:8px 2px;\n\t\tfont-size:15px;\n\t\tfont-weight:600;\n\t\tbackground-color:#ffffff;\n\t\tcolor:#317ae2;\n\t\tcursor:pointer;\n\t}\n.ff_v4290__DatePicker-header__month__11b{\n\t-moz-text-align-last:center;\n\t     text-align-last:center;\n}\n.ff_v4290__DatePicker-header__prev__3jO{\n\tmargin-left:8px;\n}\n.ff_v4290__DatePicker-header__next__2TS{\n\tmargin-right:8px;\n}\n";
var styles$s = {
  "wrapper": "ff_v4290__DatePicker-header__wrapper__1mA",
  "month": "ff_v4290__DatePicker-header__month__11b",
  "year": "ff_v4290__DatePicker-header__year__3pb",
  "selects": "ff_v4290__DatePicker-header__selects__3Lp",
  "label": "ff_v4290__DatePicker-header__label__1Bu",
  "prev": "ff_v4290__DatePicker-header__prev__3jO",
  "next": "ff_v4290__DatePicker-header__next__2TS"
};
styleInject(css_248z$t);

var DATE_FORMAT = 'YYYY-MM-DD';

var DatePickerHeader = function DatePickerHeader(_ref) {
  var date = _ref.date,
      changeYear = _ref.changeYear,
      changeMonth = _ref.changeMonth,
      decreaseMonth = _ref.decreaseMonth,
      increaseMonth = _ref.increaseMonth,
      nextMonthButtonDisabled = _ref.nextMonthButtonDisabled,
      minEndDate = _ref.minEndDate,
      selectsEnd = _ref.selectsEnd;
  var currentYear = date.year();
  var years = range(currentYear - 10, currentYear + 11, 1);
  var months = moment$1.months();

  var isPrevMonthButtonDisabled = function isPrevMonthButtonDisabled() {
    if (selectsEnd && minEndDate) {
      var formattedDate = date && date.format(DATE_FORMAT);
      var formattedMinDate = minEndDate && moment$1(minEndDate).format(DATE_FORMAT);
      var isSame = moment$1(formattedDate).isSame(formattedMinDate, 'month');
      var isBefore = moment$1(formattedDate).isBefore(formattedMinDate);
      return isSame || isBefore;
    }

    return;
  };

  var changeMonthHandler = function changeMonthHandler(_ref2) {
    var value = _ref2.target.value;
    return changeMonth(value);
  };

  var changeYearHandler = function changeYearHandler(_ref3) {
    var value = _ref3.target.value;
    return changeYear(value);
  };

  return /*#__PURE__*/React.createElement("div", {
    className: styles$s.wrapper
  }, /*#__PURE__*/React.createElement(Button, {
    className: styles$s.prev,
    onClick: decreaseMonth,
    disabled: isPrevMonthButtonDisabled()
  }, /*#__PURE__*/React.createElement(Icon, {
    size: "s",
    icon: "arrow-left"
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$s.selects
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$s.label
  }, months[date.month()], /*#__PURE__*/React.createElement("select", {
    className: styles$s.month,
    value: months[date.month()],
    onChange: changeMonthHandler
  }, map(months).call(months, function (option) {
    return /*#__PURE__*/React.createElement("option", {
      key: option,
      value: option
    }, option);
  }))), /*#__PURE__*/React.createElement("div", {
    className: styles$s.label
  }, currentYear, /*#__PURE__*/React.createElement("select", {
    className: styles$s.year,
    value: currentYear,
    onChange: changeYearHandler
  }, map(years).call(years, function (option) {
    return /*#__PURE__*/React.createElement("option", {
      key: option,
      value: option
    }, option);
  })))), /*#__PURE__*/React.createElement(Button, {
    className: styles$s.next,
    onClick: increaseMonth,
    disabled: nextMonthButtonDisabled
  }, /*#__PURE__*/React.createElement(Icon, {
    size: "s",
    icon: "arrow-right"
  })));
};

var _excluded$k = ["onChange", "error", "inputProps", "inputValue", "datePickerPlaceholder"];

function ownKeys$A(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$A(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$A(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$A(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var DatePickerInput = /*#__PURE__*/forwardRef(function (_ref, ref) {
  var onChange = _ref.onChange,
      error = _ref.error,
      inputProps = _ref.inputProps;
      _ref.inputValue;
      var datePickerPlaceholder = _ref.datePickerPlaceholder,
      restProps = _objectWithoutProperties(_ref, _excluded$k);

  var getDelimiter = function getDelimiter(value) {
    var _context;

    return find$1(_context = value.split('')).call(_context, function (item) {
      return !!item.match(/^[.\-/]+$/);
    }) || '.-/';
  };

  var handleChange = function handleChange(event) {
    var newValue = event.currentTarget.value;
    var delimiter = getDelimiter(newValue);
    var pattern = new RegExp("^[0-9".concat(delimiter, "]+$"));

    if (!newValue.match(pattern) && newValue) {
      return;
    }

    if (onChange) {
      onChange(event);
    }
  };

  var color = error ? 'red' : undefined;
  return /*#__PURE__*/React.createElement(Input, _objectSpread$A(_objectSpread$A({}, restProps), {}, {
    ref: ref,
    onChange: handleChange,
    message: typeof error === 'string' ? error : undefined,
    color: color,
    placeholder: datePickerPlaceholder
  }, inputProps));
});

var css_248z$s = ".ff_v4290__DatePicker__popper__3KT[data-placement^='bottom']{\n\t\tmargin-top:0;\n\t}\n\t.ff_v4290__DatePicker__popper__3KT[data-placement]{\n\t\tz-index:6001;\n\t}\n\t.ff_v4290__DatePicker__wrapper__2Tw .react-datepicker-wrapper, .ff_v4290__DatePicker__wrapper__2Tw .react-datepicker__input-container{\n\t\t\twidth:100%;\n\t\t}\n\t.ff_v4290__DatePicker__wrapper__2Tw .react-datepicker__close-icon::after{\n\t\t\t\tcolor:#747678;\n\t\t\t\tbackground-color:transparent;\n\t\t\t\tfont-size:23px;\n\t\t\t\theight:auto;\n\t\t\t\twidth:auto;\n\t\t\t\ttop:3px;\n\t\t\t\tright:2px;\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker\\--time-only{\n\t\t\tborder:0 !important;\n\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__header{\n\t\t\theight:69px;\n\t\t\tbackground-color:#ffffff;\n\t\t\tborder:0;\n\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__header\\--time{\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__header\\--time-box{\n\t\t\t\t\twidth:100px;\n\t\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day{\n\t\t\tmargin:2px;\n\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day:hover{\n\t\t\t\tcolor:rgb(49,122,226);\n\t\t\t\tbackground-color:rgba(49,122,226,.32);\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day-names{\n\t\t\t\tborder-bottom:1px solid #e5e5e5;\n\t\t\t\tborder-top:1px solid #e5e5e5;\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day-name{\n\t\t\t\tcolor:rgba(38,41,44,.64);\n\t\t\t\tfont-size:11px;\n\t\t\t\tline-height:16px;\n\t\t\t\tfont-weight:400;\n\t\t\t\ttext-align:center;\n\t\t\t\tvertical-align:middle;\n\t\t\t\tpadding:4px 0;\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--today:not(.ff_v4290__DatePicker__react-datepicker--time-only--in-selecting-range__1Z0){\n\t\t\t\t\tcolor:rgba(38,41,44,.64);\n\t\t\t\t\tbackground-color:#f7f7f7;\n\t\t\t\t\tfont-weight:600;\n\t\t\t\t\tborder-radius:3px;\n\t\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--outside-month{\n\t\t\t\tcolor:rgba(38,41,44,.32);\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--selected, .ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--keyboard-selected, .ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--range-start, .ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--range-end{\n\t\t\t\tcolor:#ffffff !important;\n\t\t\t\tbackground-color:#317ae2 !important;\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--in-selecting-range:not(.ff_v4290__DatePicker__react-datepicker__day--in-range__1TC){\n\t\t\t\t\tcolor:rgb(49,122,226);\n\t\t\t\t\tbackground-color:rgba(49,122,226,.32);\n\t\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--in-selecting-range:not(.ff_v4290__DatePicker__react-datepicker__day--selecting-range-start__Cya):not(.ff_v4290__DatePicker__react-datepicker__day--today__1nV):not(.ff_v4290__DatePicker__react-datepicker__day--in-range__1TC){\n\t\t\t\t\tcolor:#26292c;\n\t\t\t\t\tbackground-color:transparent;\n\t\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--selecting-range-start, .ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--in-range:not(.ff_v4290__DatePicker__react-datepicker__day--range-start__1JD):not(.ff_v4290__DatePicker__react-datepicker__day--range-end__2Ip){\n\t\t\t\t\tcolor:rgb(49,122,226);\n\t\t\t\t\tbackground-color:rgba(49,122,226,.32);\n\t\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--disabled{\n\t\t\t\tpointer-events:none;\n\t\t\t\tbackground-color:transparent;\n\t\t\t}\n\t.ff_v4290__DatePicker__datepicker__3hq .react-datepicker__day\\--disabled:hover{\n\t\t\t\t\tbackground-color:transparent;\n\t\t\t\t}\n";
var styles$r = {
  "popper": "ff_v4290__DatePicker__popper__3KT",
  "wrapper": "ff_v4290__DatePicker__wrapper__2Tw",
  "datepicker": "ff_v4290__DatePicker__datepicker__3hq",
  "react-datepicker--time-only--in-selecting-range": "ff_v4290__DatePicker__react-datepicker--time-only--in-selecting-range__1Z0",
  "react-datepicker__day--in-range": "ff_v4290__DatePicker__react-datepicker__day--in-range__1TC",
  "react-datepicker__day--selecting-range-start": "ff_v4290__DatePicker__react-datepicker__day--selecting-range-start__Cya",
  "react-datepicker__day--today": "ff_v4290__DatePicker__react-datepicker__day--today__1nV",
  "react-datepicker__day--range-start": "ff_v4290__DatePicker__react-datepicker__day--range-start__1JD",
  "react-datepicker__day--range-end": "ff_v4290__DatePicker__react-datepicker__day--range-end__2Ip"
};
styleInject(css_248z$s);

var validator = function validator(_ref) {
  var value = _ref.value,
      data = _ref.data,
      translator = _ref.translator;
  var locale = data.locale;
  var dateFormat = localeMomentFormat(locale, 'L');
  var dateLength = dateFormat.length;
  var invalidDateLocaleErrorMessage = translator.gettext('Invalid date format');
  var dateConstraints = {
    datePicker: {
      presence: {
        allowEmpty: true
      },
      datetime: {
        dateOnly: true,
        message: "^".concat(invalidDateLocaleErrorMessage)
      },
      length: {
        is: dateLength,
        wrongLength: "^".concat(invalidDateLocaleErrorMessage)
      }
    }
  };
  validate.extend(validate.validators.datetime, {
    parse: function parse(currentValue) {
      return +moment$1.utc(currentValue, dateFormat);
    },
    format: function format() {
      return moment$1.utc(value).format(dateFormat);
    }
  });
  return validate({
    datePicker: trimStart(value)
  }, dateConstraints);
};

var _excluded$j = ["value", "className", "calendarClassName", "popperClassName", "showTimeSelect", "showTimeSelectOnly", "portalTo", "disabled", "minEndDate", "onRawChange", "selectsEnd", "onComponentChange", "selected", "error", "placeholder", "allowClear", "startDate", "endDate", "onValidation"];

function ownKeys$z(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$z(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$z(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$z(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var DatePicker = /*#__PURE__*/React.forwardRef(function (_ref, ref) {
  var value = _ref.value,
      _ref$className = _ref.className,
      className = _ref$className === void 0 ? '' : _ref$className;
      _ref.calendarClassName;
      var _ref$popperClassName = _ref.popperClassName,
      popperClassName = _ref$popperClassName === void 0 ? '' : _ref$popperClassName,
      showTimeSelect = _ref.showTimeSelect;
      _ref.showTimeSelectOnly;
      var portalTo = _ref.portalTo,
      disabled = _ref.disabled,
      minEndDate = _ref.minEndDate,
      onRawChange = _ref.onRawChange,
      selectsEnd = _ref.selectsEnd,
      onComponentChange = _ref.onComponentChange,
      selected = _ref.selected,
      error = _ref.error,
      placeholder = _ref.placeholder,
      allowClear = _ref.allowClear,
      startDate = _ref.startDate,
      endDate = _ref.endDate,
      onValidation = _ref.onValidation,
      rest = _objectWithoutProperties(_ref, _excluded$j);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale,
      translator = _parseContext.translator;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var _useState3 = useState(),
      _useState4 = _slicedToArray(_useState3, 2),
      inputValueState = _useState4[0],
      setInputValueState = _useState4[1];

  var _useState5 = useState(),
      _useState6 = _slicedToArray(_useState5, 2),
      selectedDateState = _useState6[0],
      setSelectedDateState = _useState6[1];

  var _useValidation = useValidation(translator),
      handleValidation = _useValidation.handleValidation;

  var format = localeMomentFormat(locale, 'L');

  if (selected && !(selected !== null && selected !== void 0 && selected.isSame(selectedDateState))) {
    setSelectedDateState(selected);
    setInputValueState(moment$1(selected).format(format));
  }

  useEffect(function () {
    var inputValue = getMoment(value);
    setInputValueState((inputValue === null || inputValue === void 0 ? void 0 : inputValue.format(format)) || '');
    setSelectedDateState(value ? inputValue : null);
  }, [value]); // Raw event firing from react-datepicker so we can handle input value directly
  // without getting mangled Moment date object when the date is only partially entered.

  var onInputChange = function onInputChange(event) {
    var inputValue = event.currentTarget.value;
    return setInputValueState(inputValue);
  };

  var validationHandler = function validationHandler(formValue) {
    var data = {
      locale: locale,
      showTimeSelect: showTimeSelect
    };
    var errorMessage = handleValidation({
      formValue: formValue,
      validate: validator,
      data: data
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var onChange = function onChange(date) {
    var initDate = getInitDate(value);
    var selectedDateIsValid = (date === null || date === void 0 ? void 0 : date.isValid()) || (initDate === null || initDate === void 0 ? void 0 : initDate.isValid());
    var selectedDate = selectedDateIsValid ? date : null;
    var inputValue = parseSelectedDate(selectedDate, format);
    setInputValueState(inputValue);
    setSelectedDateState(selectedDate);

    if (onRawChange) {
      onRawChange(date);
    }

    if (onComponentChange) {
      var formattedDate = formatDate(selectedDate);
      onComponentChange(formattedDate);
    }
    /**
     * Handle validation after selectDate has fired to clear possible error state
     * that has been the state before a valid selection.
     */


    validationHandler(inputValue);
  };

  var renderCustomHeader = function renderCustomHeader(renderProps) {
    return /*#__PURE__*/React.createElement(DatePickerHeader, _objectSpread$z(_objectSpread$z({}, renderProps), {}, {
      minEndDate: minEndDate,
      selectsEnd: selectsEnd
    }));
  };
  /**
   * For date format we also enable more permissive 'l' format
   * to enter dates without leading zeroes.
   *
   * Return 'M/D/YYYY' in specific locale
   */


  var withoutLeadingZeroFormat = localeMomentFormat(locale, 'l'); // Enable permissive separator entry to not invalidate the user entry when
  // the separator entered does not match the locale defined.

  var dateFormat = flatMap([withoutLeadingZeroFormat, format], getAllSeparators);
  var dateRangeProps = getDateRangeProps(minEndDate);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames(className, styles$r.wrapper)
  }, /*#__PURE__*/React.createElement(Calendar, _objectSpread$z(_objectSpread$z(_objectSpread$z({
    popperClassName: classNames(popperClassName, styles$r.popper, styles$r.datepicker),
    ref: ref,
    dateFormat: dateFormat,
    readOnly: disabled,
    onChange: onChange,
    value: inputValueState,
    onChangeRaw: onInputChange,
    selected: selectedDateState
  }, renderPopperAttribute(portalTo)), {}, {
    renderCustomHeader: renderCustomHeader,
    onBlur: validationHandler,
    customInput: /*#__PURE__*/React.createElement(DatePickerInput, {
      datePickerPlaceholder: placeholder || format,
      error: error || validationError
    }),
    isClearable: allowClear,
    startDate: startDate,
    endDate: endDate
  }, dateRangeProps), rest)));
});

var DatePickerRead = function DatePickerRead(props) {
  var value = props.value;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale;

  if (!value) {
    return null;
  }

  var format = localeMomentFormat(locale, 'L');
  var dateValue = moment$1(value).format(format);
  return /*#__PURE__*/React.createElement(React.Fragment, null, dateValue);
};

var css_248z$r = ".ff_v4290__Error__error__YlD{\n\tcolor:#f94839;\n\tmargin-top:4px;\n\tfont-size:13px;\n}\n.ff_v4290__Error__select__1Mm .cui4-select__box{\n\t\tborder:1px solid #f94839;\n\t}\n";
var errorStyles = {
  "error": "ff_v4290__Error__error__YlD",
  "select": "ff_v4290__Error__select__1Mm"
};
styleInject(css_248z$r);

var Error$1 = function Error(_ref) {
  var message = _ref.message;

  if (!message) {
    return null;
  }

  return /*#__PURE__*/React.createElement("div", {
    className: errorStyles.error
  }, message);
};

var staticClassNamePrefix = 'ff';

var css_248z$q = ".ff_v4290__DateRange__wrapper__2_m{\n\tdisplay:flex;\n\tjustify-content:flex-start;\n\talign-items:flex-end;\n}\n\n\t.ff_v4290__DateRange__wrapper__2_m .ff_v4290__DateRange__separator__1eA{\n\t\tdisplay:flex;\n\t\talign-items:center;\n\t\theight:32px;\n\t\tpadding:0 8px;\n\t}\n";
var styles$q = {
  "wrapper": "ff_v4290__DateRange__wrapper__2_m",
  "separator": "ff_v4290__DateRange__separator__1eA"
};
styleInject(css_248z$q);

var _excluded$i = ["placeholderTextStart", "placeholderTextEnd", "startOpen", "value", "onComponentChange", "openNextAfterSelection", "error", "className", "allowClear", "allowClearStart", "allowClearEnd"];

function ownKeys$y(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$y(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$y(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$y(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var DateRange = function DateRange(_ref) {
  var placeholderTextStart = _ref.placeholderTextStart,
      placeholderTextEnd = _ref.placeholderTextEnd,
      startOpen = _ref.startOpen,
      value = _ref.value,
      _ref$onComponentChang = _ref.onComponentChange,
      onComponentChange = _ref$onComponentChang === void 0 ? function () {
    return null;
  } : _ref$onComponentChang,
      openNextAfterSelection = _ref.openNextAfterSelection,
      error = _ref.error,
      className = _ref.className,
      allowClear = _ref.allowClear,
      allowClearStart = _ref.allowClearStart,
      allowClearEnd = _ref.allowClearEnd,
      rest = _objectWithoutProperties(_ref, _excluded$i);

  var datePickerRefObj = useRef(null);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale;

  localeMomentFormat(locale, 'L');

  var _getAllowClearValues = getAllowClearValues(allowClear, allowClearStart, allowClearEnd),
      allowClearStartValue = _getAllowClearValues.allowClearStartValue,
      allowClearEndValue = _getAllowClearValues.allowClearEndValue;

  var _useState = useState(),
      _useState2 = _slicedToArray(_useState, 2),
      startDateState = _useState2[0],
      setStartDate = _useState2[1];

  var _useState3 = useState(),
      _useState4 = _slicedToArray(_useState3, 2),
      endDateState = _useState4[0],
      setEndDate = _useState4[1];

  var _useState5 = useState(),
      _useState6 = _slicedToArray(_useState5, 2),
      intervalState = _useState6[0],
      setIntervalState = _useState6[1];

  useEffect(function () {
    var startDateMoment = getMoment(value === null || value === void 0 ? void 0 : value.startDate);
    var endDateMoment = getMoment(value === null || value === void 0 ? void 0 : value.endDate);
    setStartDate(startDateMoment);
    setEndDate(endDateMoment);
    setIntervalState(setInterval(startDateMoment, endDateMoment));
  }, [value]);

  var adjustEndDate = function adjustEndDate(startDate, interval) {
    if (typeof interval === 'number' && interval >= 0 && startDate) {
      var newStartDate = startDate.clone();
      var newEndDate = newStartDate.add(Math.abs(interval), 'days');
      onComponentChange({
        startDate: formatDate(startDate),
        endDate: formatDate(newEndDate)
      });
      setEndDate(newEndDate);
    }
  };

  var handleChangeStart = function handleChangeStart(newStartDate) {
    var calendarRef = datePickerRefObj && datePickerRefObj.current;
    var endDate = endDateState || undefined;

    if (endDate && (newStartDate !== null && newStartDate !== void 0 && newStartDate.isAfter(endDate) || newStartDate !== null && newStartDate !== void 0 && newStartDate.isSame(endDate))) {
      adjustEndDate(newStartDate, intervalState);
    } else {
      setIntervalState(setInterval(newStartDate, endDateState));

      if (onComponentChange) {
        onComponentChange({
          startDate: formatDate(newStartDate),
          endDate: formatDate(endDateState)
        });
      }
    }

    setStartDate(newStartDate);

    if (openNextAfterSelection && calendarRef) {
      calendarRef.setOpen(true);
    }
  };

  var handleChangeEnd = function handleChangeEnd(endDate) {
    setEndDate(endDate);
    setIntervalState(setInterval(startDateState, endDate));

    if (onComponentChange) {
      onComponentChange({
        startDate: formatDate(startDateState),
        endDate: formatDate(endDate)
      });
    }
  };

  return /*#__PURE__*/React.createElement("div", {
    className: classNames(className)
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$q.wrapper
  }, /*#__PURE__*/React.createElement(DatePicker, _objectSpread$y({
    className: "".concat(staticClassNamePrefix, "-date-range-start-picker"),
    selectsStart: true,
    startDate: startDateState,
    endDate: endDateState,
    startOpen: startOpen,
    selected: startDateState,
    onRawChange: handleChangeStart,
    placeholder: placeholderTextStart,
    value: value === null || value === void 0 ? void 0 : value.startDate,
    error: !!error,
    onComponentChange: function onComponentChange() {
      return null;
    },
    allowClear: allowClearStartValue
  }, omit(rest, ['onComponentChange']))), /*#__PURE__*/React.createElement("div", {
    className: styles$q.separator
  }, "-"), /*#__PURE__*/React.createElement(DatePicker, _objectSpread$y({
    className: "".concat(staticClassNamePrefix, "-date-range-end-picker"),
    ref: datePickerRefObj,
    startDate: startDateState,
    endDate: endDateState,
    disabled: !startDateState,
    selected: endDateState,
    onRawChange: handleChangeEnd,
    placeholder: placeholderTextEnd,
    minEndDate: startDateState,
    excludeDates: substractOneMonth(startDateState),
    value: value === null || value === void 0 ? void 0 : value.endDate,
    error: !!error,
    onComponentChange: function onComponentChange() {
      return null;
    },
    allowClear: allowClearEndValue
  }, omit(rest, ['onComponentChange'])))), /*#__PURE__*/React.createElement(Error$1, {
    message: error
  }));
};

var css_248z$p = ".ff_v4290__Link__link__26_{\n\ttext-decoration:none;\n\tcolor:#317ae2;\n\tpadding-right:4px;\n}\n";
var styles$p = {
  "link": "ff_v4290__Link__link__26_"
};
styleInject(css_248z$p);

var _excluded$h = ["openLinksInNewTab", "href", "value", "onClick", "children"];

function ownKeys$x(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$x(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$x(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$x(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var Link = function Link(_ref) {
  var openLinksInNewTab = _ref.openLinksInNewTab,
      href = _ref.href,
      _ref$value = _ref.value,
      value = _ref$value === void 0 ? '' : _ref$value,
      onClick = _ref.onClick,
      children = _ref.children,
      restProps = _objectWithoutProperties(_ref, _excluded$h);

  var clickHandler = function clickHandler() {
    var _event;

    (_event = event) === null || _event === void 0 ? void 0 : _event.preventDefault();
    onClick && onClick(value);
  };

  return /*#__PURE__*/React.createElement("a", _objectSpread$x(_objectSpread$x({}, openLinksInNewTab ? {
    target: '_blank'
  } : {}), {}, {
    href: onClick ? '#' : href,
    className: styles$p.link,
    onClick: clickHandler
  }, restProps), children);
};

var DealRead = function DealRead(_ref) {
  var value = _ref.value,
      openLinksInNewTab = _ref.openLinksInNewTab;

  if (!value) {
    return null;
  }

  return /*#__PURE__*/React.createElement(Link, {
    openLinksInNewTab: openLinksInNewTab,
    href: "/deal/".concat(value.id)
  }, value.title);
};

var _excluded$g = ["error", "allowNewItem", "showDealRelatedOrg", "onBlur", "onValidation"];

function ownKeys$w(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$w(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$w(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$w(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Deal = function Deal(_ref) {
  var error = _ref.error;
      _ref.allowNewItem;
      var _ref$showDealRelatedO = _ref.showDealRelatedOrg,
      showDealRelatedOrg = _ref$showDealRelatedO === void 0 ? false : _ref$showDealRelatedO,
      _ref$onBlur = _ref.onBlur,
      _onBlur = _ref$onBlur === void 0 ? noop : _ref$onBlur,
      onValidation = _ref.onValidation,
      restProps = _objectWithoutProperties(_ref, _excluded$g);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var getDeals = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {
      var _context;

      var dealSearchResponse;
      return _regeneratorRuntime.wrap(function _callee$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return find(DataTypes.deal, value);

            case 2:
              dealSearchResponse = _context2.sent;
              return _context2.abrupt("return", dealSearchResponse === null || dealSearchResponse === void 0 ? void 0 : map(_context = dealSearchResponse.items).call(_context, function (_ref3) {
                var _deal$organization, _deal$organization2, _deal$person, _deal$person2;

                var deal = _ref3.item;
                return {
                  id: deal.id,
                  title: deal.title,
                  currency: deal.currency,
                  org_id: (_deal$organization = deal.organization) === null || _deal$organization === void 0 ? void 0 : _deal$organization.id,
                  org_name: (_deal$organization2 = deal.organization) === null || _deal$organization2 === void 0 ? void 0 : _deal$organization2.name,
                  person_id: (_deal$person = deal.person) === null || _deal$person === void 0 ? void 0 : _deal$person.id,
                  person_name: (_deal$person2 = deal.person) === null || _deal$person2 === void 0 ? void 0 : _deal$person2.name
                };
              }));

            case 4:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee);
    }));

    return function getDeals(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var getSuggestionValue = function getSuggestionValue(deal) {
    var _context3;

    if (typeof deal === 'string') {
      return deal;
    }

    var dealOrg = showDealRelatedOrg && deal.org_name ? " (".concat(deal.org_name, ")") : '';
    return concat(_context3 = "".concat(deal.title)).call(_context3, dealOrg);
  };

  return /*#__PURE__*/React.createElement(InputSelect, _objectSpread$w({
    inputProps: {
      icon: 'deal',
      onBlur: function onBlur(event) {
        event.persist();
        defer$1(function () {
          validate(event);

          _onBlur(event);
        });
      },
      message: error || validationError
    },
    getSuggestionValue: getSuggestionValue,
    getSuggestions: getDeals,
    dropdownTrigger: 2,
    allowNewItem: true
  }, restProps));
};

var css_248z$o = ".ff_v4290__Phone__phoneIcon__iJn{\n\tpadding:0 6px 0 4px;\n\theight:16px;\n\twidth:16px;\n}\n.ff_v4290__Phone__arrow__2ut{\n\tdisplay:flex;\n}\n.ff_v4290__Phone__phoneButton__1tJ{\n\ttext-align:left;\n\twhite-space:nowrap;\n\twidth:100%;\n}\n.ff_v4290__Phone__phoneButton__1tJ:not(:first-child){\n\t\tmargin-top:4px;\n\t}\n.ff_v4290__Phone__phoneLabel__1JE{\n\tcolor:#b9babb !important;\n\tmargin:0 6px;\n}\n.ff_v4290__Phone__phoneValue__1AS{\n\tdisplay:flex;\n\twidth:100%;\n\tfont-size:13px;\n\toverflow:hidden;\n}\n.ff_v4290__Phone__phoneValue__1AS a{\n\t\tcolor:#26292c;\n\t\ttext-decoration:none;\n\t\ttext-overflow:ellipsis;\n\t\toverflow:hidden;\n\t}\n";
var styles$o = {
  "phoneIcon": "ff_v4290__Phone__phoneIcon__iJn",
  "arrow": "ff_v4290__Phone__arrow__2ut",
  "phoneButton": "ff_v4290__Phone__phoneButton__1tJ",
  "phoneLabel": "ff_v4290__Phone__phoneLabel__1JE",
  "phoneValue": "ff_v4290__Phone__phoneValue__1AS"
};
styleInject(css_248z$o);

var Caller = function Caller(_ref) {
  var value = _ref.value,
      settings = _ref.settings,
      locale = _ref.locale,
      format = _ref.format;
  return /*#__PURE__*/React.createElement(Button, {
    className: styles$o.phoneButton,
    href: createPhoneLink(value.value, settings),
    size: "s"
  }, /*#__PURE__*/React.createElement(Icon, {
    className: styles$o.phoneIcon,
    icon: "call"
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$o.phoneValue
  }, /*#__PURE__*/React.createElement("a", {
    href: "callto:".concat(value.value)
  }, formatPhoneNumber(value.value, locale, format)), value.label && /*#__PURE__*/React.createElement("div", {
    className: styles$o.phoneLabel
  }, "(", value.label, ")")), /*#__PURE__*/React.createElement("div", {
    className: styles$o.arrow
  }, /*#__PURE__*/React.createElement(Icon, {
    icon: "triangle-down",
    size: "s"
  })));
};

function ownKeys$v(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$v(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$v(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$v(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var getSelectedLabel = function getSelectedLabel(item, options) {
  var _options$find, _options$2;

  if (!item) {
    var _options$;

    return (_options$ = options[0]) === null || _options$ === void 0 ? void 0 : _options$.value;
  }

  return ((_options$find = find$1(options).call(options, function (option) {
    return option.value === item.label;
  })) === null || _options$find === void 0 ? void 0 : _options$find.value) || ((_options$2 = options[0]) === null || _options$2 === void 0 ? void 0 : _options$2.value);
};
var getDefaultLabel = function getDefaultLabel(options) {
  var _options$find2;

  return ((_options$find2 = find$1(options).call(options, function (option) {
    return !option.disabled;
  })) === null || _options$find2 === void 0 ? void 0 : _options$find2.value) || 'undefined';
}; // Parse value to determine if it's empty
// In this case return default value for select dropdown

var getInitialValue = function getInitialValue() {
  var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var options = arguments.length > 1 ? arguments[1] : undefined;
  var primary = arguments.length > 2 ? arguments[2] : undefined;

  if (isArray$6(value) && value.length && options[0]) {
    return value.reduce(function (arr, item, i) {
      if (!item) {
        return arr;
      }

      var labelValue = item.value;
      var selectedLabel = getSelectedLabel(item, options);
      arr.push({
        value: labelValue,
        label: selectedLabel,
        primary: i === 0
      });
      return arr;
    }, []);
  }

  if (!isArray$6(value) && value) {
    var selectedLabel = getSelectedLabel(value, options);
    return [_objectSpread$v(_objectSpread$v({}, value), {}, {
      label: selectedLabel,
      primary: primary
    })];
  }

  return [{
    value: '',
    label: getDefaultLabel(options),
    primary: primary
  }];
}; // Parse value to make it alwasy array
var getTranslatedLabel = function getTranslatedLabel(options, label) {
  var _options$find3;

  var translatedLabel = ((_options$find3 = find$1(options).call(options, function (option) {
    return option.value === (label === null || label === void 0 ? void 0 : label.toLowerCase());
  })) === null || _options$find3 === void 0 ? void 0 : _options$find3.label) || label;
  return capitalize(translatedLabel);
};

var css_248z$n = ".ff_v4290__DefaultPhone__readValue__kUt{\n\tdisplay:flex;\n}\n.ff_v4290__DefaultPhone__readLabel__Unf{\n\tcolor:#747678;\n\tword-break:normal;\n}\n";
var styles$n = {
  "readValue": "ff_v4290__DefaultPhone__readValue__kUt",
  "readLabel": "ff_v4290__DefaultPhone__readLabel__Unf"
};
styleInject(css_248z$n);

var getOptions$3 = function getOptions(translator) {
  return [{
    label: translator.gettext('Work'),
    value: 'work'
  }, {
    label: translator.gettext('Home'),
    value: 'home'
  }, {
    label: translator.gettext('Mobile'),
    value: 'mobile'
  }, {
    label: translator.gettext('Other'),
    value: 'other'
  }];
};

var DefaultPhoneRead$1 = function DefaultPhoneRead(_ref) {
  var value = _ref.value,
      settings = _ref.settings,
      caller = _ref.caller;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      locale = _parseContext.locale,
      phoneSettings = _parseContext.phoneSettings;

  if (!value) {
    return null;
  }

  var options = getOptions$3(translator);
  var arrayValue = isArray$6(value) ? value : [value];
  var formatNumber = settings && settings.format_phone_numbers_enabled;
  return /*#__PURE__*/React.createElement("div", null, map(arrayValue).call(arrayValue, function (_ref2, i) {
    var labelValue = _ref2.value,
        label = _ref2.label;

    if (caller) {
      return /*#__PURE__*/React.createElement(Caller, {
        value: {
          value: labelValue,
          label: label
        },
        settings: settings,
        format: formatNumber,
        locale: locale
      });
    }

    return /*#__PURE__*/React.createElement("div", {
      key: i,
      className: styles$n.readValue
    }, /*#__PURE__*/React.createElement(Link, {
      href: createPhoneLink(labelValue, settings, phoneSettings)
    }, formatPhoneNumber(labelValue, locale, formatNumber)), /*#__PURE__*/React.createElement("div", {
      className: styles$n.readLabel
    }, "(".concat(getTranslatedLabel(options, label), ")")));
  }));
};

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

var $$5 = _export;

var toAbsoluteIndex$1 = toAbsoluteIndex$4;

var toInteger$2 = toInteger$6;

var toLength$4 = toLength$c;

var toObject$2 = toObject$a;

var arraySpeciesCreate$1 = arraySpeciesCreate$4;

var createProperty = createProperty$5;

var arrayMethodHasSpeciesSupport = arrayMethodHasSpeciesSupport$5;

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');
var max = Math.max;
var min = Math.min;
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;
var MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded'; // `Array.prototype.splice` method
// https://tc39.es/ecma262/#sec-array.prototype.splice
// with adding support of @@species

$$5({
  target: 'Array',
  proto: true,
  forced: !HAS_SPECIES_SUPPORT
}, {
  splice: function splice(start, deleteCount
  /* , ...items */
  ) {
    var O = toObject$2(this);
    var len = toLength$4(O.length);
    var actualStart = toAbsoluteIndex$1(start, len);
    var argumentsLength = arguments.length;
    var insertCount, actualDeleteCount, A, k, from, to;

    if (argumentsLength === 0) {
      insertCount = actualDeleteCount = 0;
    } else if (argumentsLength === 1) {
      insertCount = 0;
      actualDeleteCount = len - actualStart;
    } else {
      insertCount = argumentsLength - 2;
      actualDeleteCount = min(max(toInteger$2(deleteCount), 0), len - actualStart);
    }

    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {
      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);
    }

    A = arraySpeciesCreate$1(O, actualDeleteCount);

    for (k = 0; k < actualDeleteCount; k++) {
      from = actualStart + k;
      if (from in O) createProperty(A, k, O[from]);
    }

    A.length = actualDeleteCount;

    if (insertCount < actualDeleteCount) {
      for (k = actualStart; k < len - actualDeleteCount; k++) {
        from = k + actualDeleteCount;
        to = k + insertCount;
        if (from in O) O[to] = O[from];else delete O[to];
      }

      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];
    } else if (insertCount > actualDeleteCount) {
      for (k = len - actualDeleteCount; k > actualStart; k--) {
        from = k + actualDeleteCount - 1;
        to = k + insertCount - 1;
        if (from in O) O[to] = O[from];else delete O[to];
      }
    }

    for (k = 0; k < insertCount; k++) {
      O[k + actualStart] = arguments[k + 2];
    }

    O.length = len - actualDeleteCount + insertCount;
    return A;
  }
});

var entryVirtual$6 = entryVirtual$e;

var splice$2 = entryVirtual$6('Array').splice;

var splice$1 = splice$2;

var ArrayPrototype$4 = Array.prototype;

var splice_1 = function (it) {
  var own = it.splice;
  return it === ArrayPrototype$4 || it instanceof Array && own === ArrayPrototype$4.splice ? splice$1 : own;
};

var parent$5 = splice_1;

var splice = parent$5;

var css_248z$m = ".ff_v4290__InputSelectCompound__inputWrap__1_R{\n\tposition:relative;\n\tflex:1;\n}\n\n.ff_v4290__InputSelectCompound__input__1kd{\n\twidth:100% !important;\n}\n\n.ff_v4290__InputSelectCompound__select__1hE{\n\tflex:1;\n\tmargin-left:8px;\n\theight:32px;\n\tmax-width:50%;\n}\n\n.ff_v4290__InputSelectCompound__select__1hE .cui4-input{\n\t\twidth:100%;\n\t}\n\n.ff_v4290__InputSelectCompound__compoundComponent__3mN{\n\tdisplay:flex;\n\tflex-direction:row;\n}\n";
var styles$m = {
  "inputWrap": "ff_v4290__InputSelectCompound__inputWrap__1_R",
  "input": "ff_v4290__InputSelectCompound__input__1kd",
  "select": "ff_v4290__InputSelectCompound__select__1hE",
  "compoundComponent": "ff_v4290__InputSelectCompound__compoundComponent__3mN"
};
styleInject(css_248z$m);

var _excluded$f = ["className"],
    _excluded2$1 = ["className"];

function ownKeys$u(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$u(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$u(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$u(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var getValue$2 = function getValue(value, isDefaultValue) {
  if (!isDefaultValue) {
    return {
      value: value
    };
  }

  return {
    defaultValue: value
  };
};
/**
 * A component used in Email, DefaultPhone, InstantMessage and Monetary fields.
 * Consists of Input and Select components.
 *
 * @param {InputSelectCompoundProps} props - Props for InputSelectCompoundProps
 * @returns {React.ReactElement<InputSelectCompoundProps>} InputSelectCompound component
 */


var InputSelectCompound = function InputSelectCompound(_ref) {
  var _ref$options = _ref.options,
      options = _ref$options === void 0 ? [] : _ref$options,
      type = _ref.type,
      handleBlurProp = _ref.handleBlur,
      error = _ref.error,
      disabled = _ref.disabled,
      portalTo = _ref.portalTo,
      inputRef = _ref.inputRef,
      className = _ref.className,
      autofocus = _ref.autofocus,
      filter$1 = filter(_ref),
      actionIcon = _ref.actionIcon,
      primary = _ref.primary,
      onChange = _ref.onChange,
      inputValue = _ref.inputValue,
      isDefaultValue = _ref.isDefaultValue,
      selectedLabel = _ref.selectedLabel,
      _ref$selectProps = _ref.selectProps,
      selectProps = _ref$selectProps === void 0 ? {} : _ref$selectProps,
      _ref$inputProps = _ref.inputProps,
      inputProps = _ref$inputProps === void 0 ? {} : _ref$inputProps,
      placeholder = _ref.placeholder,
      placement = _ref.placement,
      onValidation = _ref.onValidation;

  var selectRef = /*#__PURE__*/React.createRef();

  var _useState = useState(selectedLabel),
      _useState2 = _slicedToArray(_useState, 2),
      label = _useState2[0],
      setLabel = _useState2[1];

  var _useState3 = useState(inputValue),
      _useState4 = _slicedToArray(_useState3, 2),
      stateValue = _useState4[0],
      setValue = _useState4[1];

  var _useState5 = useState(''),
      _useState6 = _slicedToArray(_useState5, 2),
      errorState = _useState6[0],
      setError = _useState6[1];

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var inputClassName = inputProps.className,
      restCuiInputProps = _objectWithoutProperties(inputProps, _excluded$f);

  var selectClassName = selectProps.className,
      restCuiSelectProps = _objectWithoutProperties(selectProps, _excluded2$1);

  var onInputChange = function onInputChange(event) {
    if (onChange) {
      setValue(event.currentTarget.value);
      onChange({
        value: event.currentTarget.value,
        label: label,
        primary: primary
      });
    }
  };

  var onSelectChange = function onSelectChange(labelValue) {
    if (onChange) {
      setLabel(labelValue);
      onChange({
        value: stateValue,
        label: labelValue,
        primary: primary
      });
    }
  };

  var scrollToSelected = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(visible) {
      var SEARCH_BAR_HEIGHT, dropDownOptions, selectedElement, offset;
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              if (!visible) {
                _context.next = 7;
                break;
              }

              SEARCH_BAR_HEIGHT = 49; // This await is to fix missing maxHeight from CUI on the dropdown init.

              _context.next = 4;
              return selectRef.current.popupElement.current.querySelector('[class*=options]');

            case 4:
              dropDownOptions = _context.sent;
              selectedElement = dropDownOptions.querySelector('.cui4-option-check');

              if (selectedElement && dropDownOptions.scrollTo) {
                offset = selectedElement.parentElement.offsetTop > 8 ? selectedElement.parentElement.offsetTop : 0;
                dropDownOptions.scrollTo(0, offset - SEARCH_BAR_HEIGHT);
              }

            case 7:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function scrollToSelected(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var handleBlur = function handleBlur(e) {
    if (handleBlurProp) {
      handleBlurProp(e);
    } else {
      if (!handleValidation) {
        return;
      }

      var errorMessage = handleValidation({
        formValue: e,
        validate: getValidation
      });
      setError(errorMessage);
      onValidation && onValidation(!errorMessage);
    }
  };

  return /*#__PURE__*/React.createElement("div", {
    className: classNames(className, styles$m.compoundComponent)
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$m.inputWrap
  }, /*#__PURE__*/React.createElement(Input, _objectSpread$u(_objectSpread$u({
    className: classNames(inputClassName, styles$m.input),
    autoFocus: autofocus
  }, getValue$2(inputValue, isDefaultValue)), {}, {
    type: type,
    onBlur: handleBlur,
    onMouseOut: handleBlur,
    message: error || errorState,
    disabled: disabled,
    color: error ? 'red' : undefined,
    onChange: onInputChange,
    inputRef: inputRef,
    "data-testid": "compound-input",
    placeholder: placeholder
  }, restCuiInputProps)), primary && actionIcon), /*#__PURE__*/React.createElement(Select, _objectSpread$u(_objectSpread$u({
    className: classNames(selectClassName, styles$m.select),
    filter: filter$1,
    popperProps: popperProps,
    portalTo: portalTo
  }, getValue$2(selectedLabel, isDefaultValue)), {}, {
    onChange: onSelectChange,
    disabled: disabled,
    onVisibilityChange: scrollToSelected,
    ref: selectRef,
    // @ts-expect-error TODO: Check CUI types
    placement: placement
  }, restCuiSelectProps), map(options).call(options, function (option, key) {
    var isCurrentLabel = selectedLabel === option.value;
    return /*#__PURE__*/React.createElement(Select.Option, {
      disabled: !isCurrentLabel && option.disabled,
      key: key,
      value: option.value
    }, option.label);
  })));
};

var css_248z$l = ".ff_v4290__InputSelectAddMore__wrapper__1sY{\n\tdisplay:flex;\n\tflex-direction:column;\n}\n.ff_v4290__InputSelectAddMore__itemWrap__w4T{\n\tdisplay:flex;\n}\n.ff_v4290__InputSelectAddMore__item__3jk{\n\tpadding-bottom:5px;\n\twidth:100%;\n}\n.ff_v4290__InputSelectAddMore__link__fxh{\n\tcursor:pointer;\n}\n.ff_v4290__InputSelectAddMore__disabled__3f1 a{\n\t\tcolor:#747678;\n\t\tcursor:not-allowed;\n\t}\n.ff_v4290__InputSelectAddMore__remove__340{\n\tmargin-left:5px;\n}\n";
var styles$l = {
  "wrapper": "ff_v4290__InputSelectAddMore__wrapper__1sY",
  "itemWrap": "ff_v4290__InputSelectAddMore__itemWrap__w4T",
  "item": "ff_v4290__InputSelectAddMore__item__3jk",
  "link": "ff_v4290__InputSelectAddMore__link__fxh",
  "disabled": "ff_v4290__InputSelectAddMore__disabled__3f1",
  "remove": "ff_v4290__InputSelectAddMore__remove__340"
};
styleInject(css_248z$l);

var _excluded$e = ["selectedLabel", "value", "onChange", "validate", "options", "error", "onValidation"];

function ownKeys$t(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$t(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$t(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$t(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var InputSelectItem = function InputSelectItem(_ref) {
  var selectedLabel = _ref.selectedLabel,
      value = _ref.value,
      onChange = _ref.onChange,
      validate = _ref.validate,
      _ref$options = _ref.options,
      options = _ref$options === void 0 ? [] : _ref$options,
      error = _ref.error,
      onValidation = _ref.onValidation,
      rest = _objectWithoutProperties(_ref, _excluded$e);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var handleBlur = function handleBlur(e) {
    if (!handleValidation) {
      return;
    }

    var errorMessage = handleValidation({
      formValue: e,
      validate: validate
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  return /*#__PURE__*/React.createElement("div", {
    className: styles$l.item
  }, /*#__PURE__*/React.createElement(InputSelectCompound, _objectSpread$t(_objectSpread$t({
    handleBlur: handleBlur,
    onChange: onChange
  }, rest), {}, {
    inputValue: value,
    options: options,
    selectedLabel: selectedLabel,
    error: error || validationError
  })));
};

var _excluded$d = ["value", "options", "onComponentChange", "validate", "single", "disabled", "isDefault", "disableAdd"];

function ownKeys$s(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$s(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$s(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$s(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var InputSelectAddMore = function InputSelectAddMore(_ref) {
  var value = _ref.value,
      _ref$options = _ref.options,
      options = _ref$options === void 0 ? [] : _ref$options,
      _ref$onComponentChang = _ref.onComponentChange,
      onComponentChange = _ref$onComponentChang === void 0 ? function () {
    return null;
  } : _ref$onComponentChang,
      validate = _ref.validate,
      single = _ref.single,
      disabled = _ref.disabled,
      isDefault = _ref.isDefault,
      disableAdd = _ref.disableAdd,
      rest = _objectWithoutProperties(_ref, _excluded$d);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useState = useState(function () {
    return getInitialValue(value, options, true);
  }),
      _useState2 = _slicedToArray(_useState, 2),
      items = _useState2[0],
      setItems = _useState2[1];

  useEffect(function () {
    setItems(getInitialValue(value, options, true));
  }, [value]);

  var onChange = function onChange(index) {
    return function (_ref2) {
      var labelValue = _ref2.value,
          label = _ref2.label,
          primary = _ref2.primary;

      var newArr = _toConsumableArray(items);

      newArr.forEach(function (item) {
        return item.changed = false;
      });
      newArr[index] = {
        value: labelValue,
        label: label,
        primary: primary,
        changed: true
      };
      setItems(newArr);

      if (onComponentChange) {
        onComponentChange(single ? {
          value: labelValue,
          label: label
        } : newArr);
      }
    };
  };

  var handleRemove = function handleRemove(index) {
    return function () {
      var newArr = _toConsumableArray(items);

      splice(newArr).call(newArr, index, 1);

      setItems(newArr);

      if (onComponentChange) {
        onComponentChange(newArr);
      }
    };
  };

  var addMore = function addMore(e) {
    var _context;

    e.preventDefault();

    var newArr = concat(_context = []).call(_context, _toConsumableArray(items), _toConsumableArray(getInitialValue([], options, false)));

    setItems(newArr);

    if (onComponentChange) {
      onComponentChange(newArr);
    }
  };

  return /*#__PURE__*/React.createElement("div", {
    className: styles$l.wrapper
  }, /*#__PURE__*/React.createElement("section", null, map(items).call(items, function (_ref3, i) {
    var _context2;

    var labelValue = _ref3.value,
        label = _ref3.label,
        primary = _ref3.primary;
    return /*#__PURE__*/React.createElement("div", {
      key: concat(_context2 = "".concat(i)).call(_context2, items.length),
      className: styles$l.itemWrap
    }, /*#__PURE__*/React.createElement(InputSelectItem, _objectSpread$s({
      selectedLabel: label,
      options: options,
      value: labelValue,
      validate: validate,
      onChange: onChange(i),
      primary: primary,
      onComponentChange: onComponentChange,
      disabled: disabled,
      isDefaultValue: isDefault
    }, rest)), items.length > 1 && /*#__PURE__*/React.createElement(Button, {
      color: "ghost",
      onClick: handleRemove(i),
      className: styles$l.remove
    }, /*#__PURE__*/React.createElement(Icon, {
      icon: "trash"
    })));
  })), !single && !disableAdd && /*#__PURE__*/React.createElement(Text, {
    className: classNames(_defineProperty({}, styles$l.disabled, disabled))
  }, /*#__PURE__*/React.createElement("a", {
    href: "#",
    className: styles$l.link,
    onClick: disabled ? noop : addMore
  }, "+ ", translator.gettext('add one more'))));
};

var _excluded$c = ["onComponentChange", "single", "options"];

function ownKeys$r(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$r(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$r(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$r(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var DefaultPhone = function DefaultPhone(_ref) {
  var onComponentChange = _ref.onComponentChange,
      _ref$single = _ref.single,
      single = _ref$single === void 0 ? false : _ref$single,
      propsOptions = _ref.options,
      restProps = _objectWithoutProperties(_ref, _excluded$c);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation;

  var options = propsOptions !== null && propsOptions !== void 0 && propsOptions.length ? propsOptions : getOptions$3(translator);
  return /*#__PURE__*/React.createElement(InputSelectAddMore, _objectSpread$r({
    single: single,
    onComponentChange: onComponentChange,
    validate: getValidation,
    options: options
  }, restProps));
};

var css_248z$k = ".ff_v4290__Email__readValue__3v6{\n\tdisplay:flex;\n}\n.ff_v4290__Email__readLabel__12q{\n\tcolor:#747678;\n\tword-break:normal;\n}\n";
var styles$k = {
  "readValue": "ff_v4290__Email__readValue__3v6",
  "readLabel": "ff_v4290__Email__readLabel__12q"
};
styleInject(css_248z$k);

var isArray = isArray$5;

var toLength$3 = toLength$c;

var bind = functionBindContext; // `FlattenIntoArray` abstract operation
// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray


var flattenIntoArray$1 = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {
  var targetIndex = start;
  var sourceIndex = 0;
  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;
  var element;

  while (sourceIndex < sourceLen) {
    if (sourceIndex in source) {
      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];

      if (depth > 0 && isArray(element)) {
        targetIndex = flattenIntoArray$1(target, original, element, toLength$3(element.length), targetIndex, depth - 1) - 1;
      } else {
        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');
        target[targetIndex] = element;
      }

      targetIndex++;
    }

    sourceIndex++;
  }

  return targetIndex;
};

var flattenIntoArray_1 = flattenIntoArray$1;

var $$4 = _export;

var flattenIntoArray = flattenIntoArray_1;

var toObject$1 = toObject$a;

var toLength$2 = toLength$c;

var toInteger$1 = toInteger$6;

var arraySpeciesCreate = arraySpeciesCreate$4; // `Array.prototype.flat` method
// https://tc39.es/ecma262/#sec-array.prototype.flat


$$4({
  target: 'Array',
  proto: true
}, {
  flat: function flat()
  /* depthArg = 1 */
  {
    var depthArg = arguments.length ? arguments[0] : undefined;
    var O = toObject$1(this);
    var sourceLen = toLength$2(O.length);
    var A = arraySpeciesCreate(O, 0);
    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger$1(depthArg));
    return A;
  }
});

var entryVirtual$5 = entryVirtual$e;

var flat$2 = entryVirtual$5('Array').flat;

var flat$1 = flat$2;

var ArrayPrototype$3 = Array.prototype;

var flat_1 = function (it) {
  var own = it.flat;
  return it === ArrayPrototype$3 || it instanceof Array && own === ArrayPrototype$3.flat ? flat$1 : own;
};

var parent$4 = flat_1;

var flat = parent$4;

var _excluded$b = ["value"];

function ownKeys$q(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$q(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$q(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$q(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var getOptions$2 = function getOptions(translator) {
  return [{
    label: translator.gettext('Work'),
    value: 'work'
  }, {
    label: translator.gettext('Home'),
    value: 'home'
  }, {
    label: translator.gettext('Other'),
    value: 'other'
  }];
};
var getTrimmedValue = function getTrimmedValue(items) {
  var _context, _context2;

  return map(_context = flat(_context2 = [items]).call(_context2)).call(_context, function (_ref) {
    var value = _ref.value,
        restProps = _objectWithoutProperties(_ref, _excluded$b);

    return _objectSpread$q(_objectSpread$q({}, restProps), {}, {
      value: isString(value) ? trim(value).call(value) : value
    });
  });
};
var getInitialValueTrimmed = function getInitialValueTrimmed(value) {
  if (isNil(value)) {
    return value;
  }

  return getTrimmedValue(value);
};

var EmailRead = function EmailRead(_ref) {
  var value = _ref.value,
      ccEmail = _ref.ccEmail,
      onClick = _ref.onClick;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  if (!value) {
    return null;
  }

  var bccLink = createBccLink(ccEmail);
  var options = getOptions$2(translator);
  var arrayValue = isArray$6(value) ? value : [value];
  return /*#__PURE__*/React.createElement(React.Fragment, null, map(arrayValue).call(arrayValue, function (_ref2, i) {
    var _context;

    var labelValue = _ref2.value,
        label = _ref2.label;
    return /*#__PURE__*/React.createElement("div", {
      key: i,
      className: styles$k.readValue
    }, /*#__PURE__*/React.createElement(Link, {
      onClick: onClick,
      href: concat(_context = "mailto:".concat(labelValue)).call(_context, bccLink),
      value: labelValue
    }, labelValue), /*#__PURE__*/React.createElement("div", {
      className: styles$k.readLabel
    }, "(".concat(getTranslatedLabel(options, label), ")")));
  }));
};

var _excluded$a = ["value", "single", "onComponentChange", "options"];

function ownKeys$p(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$p(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$p(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$p(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Email = function Email(_ref) {
  var passedValue = _ref.value,
      _ref$single = _ref.single,
      single = _ref$single === void 0 ? false : _ref$single,
      onComponentChange = _ref.onComponentChange,
      propsOptions = _ref.options,
      rest = _objectWithoutProperties(_ref, _excluded$a);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getEmailValidation = _useValidation.getEmailValidation;

  var options = propsOptions !== null && propsOptions !== void 0 && propsOptions.length ? propsOptions : getOptions$2(translator);
  var value = getInitialValueTrimmed(passedValue);

  var handleComponentChange = function handleComponentChange(items) {
    onComponentChange(getTrimmedValue(items));
  };

  return /*#__PURE__*/React.createElement(InputSelectAddMore, _objectSpread$p({
    value: value,
    onComponentChange: handleComponentChange,
    validate: getEmailValidation,
    single: single,
    options: options
  }, rest));
};

var css_248z$j = ".ff_v4290__InstantMessage__readValue__3an{\n\tdisplay:flex;\n}\n\n.ff_v4290__InstantMessage__readIM__1WR{\n\tpadding-right:4px;\n\tvertical-align:top;\n}\n";
var styles$j = {
  "readValue": "ff_v4290__InstantMessage__readValue__3an",
  "readIM": "ff_v4290__InstantMessage__readIM__1WR"
};
styleInject(css_248z$j);

var InstantMessageRead = function InstantMessageRead(_ref) {
  var value = _ref.value;

  if (!value) {
    return null;
  }

  var options = [{
    label: 'Google',
    value: 'google'
  }, {
    label: 'AIM',
    value: 'aim'
  }, {
    label: 'Yahoo',
    value: 'yahoo'
  }, {
    label: 'Skype',
    value: 'skype'
  }, {
    label: 'QQ',
    value: 'qq'
  }, {
    label: 'ICQ',
    value: 'icq'
  }, {
    label: 'MSN',
    value: 'msn'
  }, {
    label: 'Jabber',
    value: 'jabber'
  }, {
    label: 'iCloud',
    value: 'icloud'
  }];
  var arrayValues = isArray$6(value) ? value : [value];
  return /*#__PURE__*/React.createElement(React.Fragment, null, map(arrayValues).call(arrayValues, function (_ref2, i) {
    var labelValue = _ref2.value,
        label = _ref2.label;

    var selected = find$1(options).call(options, function (option) {
      return option.value === String(label.toLowerCase());
    });

    var selectedLabel = selected ? selected.label : options[0].label;
    return /*#__PURE__*/React.createElement("div", {
      className: styles$j.readValue,
      key: i
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$j.readIM
    }, labelValue), /*#__PURE__*/React.createElement("div", null, "(".concat(capitalize(selectedLabel), ")")));
  }));
};

var _excluded$9 = ["value", "onComponentChange", "error", "single", "options", "onValidation"];

function ownKeys$o(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$o(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$o(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$o(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var InstantMessage = function InstantMessage(_ref) {
  var value = _ref.value,
      onComponentChange = _ref.onComponentChange,
      error = _ref.error,
      _ref$single = _ref.single,
      single = _ref$single === void 0 ? false : _ref$single,
      propsOptions = _ref.options,
      onValidation = _ref.onValidation,
      rest = _objectWithoutProperties(_ref, _excluded$9);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var defaultOptions = [{
    label: 'Google',
    value: 'google'
  }, {
    label: 'AIM',
    value: 'aim'
  }, {
    label: 'Yahoo',
    value: 'yahoo'
  }, {
    label: 'Skype',
    value: 'skype'
  }, {
    label: 'QQ',
    value: 'qq'
  }, {
    label: 'ICQ',
    value: 'icq'
  }, {
    label: 'MSN',
    value: 'msn'
  }, {
    label: 'Jabber',
    value: 'jabber'
  }, {
    label: 'iCloud',
    value: 'icloud'
  }];

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var options = propsOptions !== null && propsOptions !== void 0 && propsOptions.length ? propsOptions : defaultOptions;
  var labelValue = value ? value.value : '';
  return /*#__PURE__*/React.createElement(InputSelectAddMore, _objectSpread$o({
    single: single,
    value: value,
    onComponentChange: onComponentChange,
    validate: getValidation,
    handleBlur: validate,
    inputValue: labelValue,
    error: error || validationError,
    options: options
  }, rest));
};

var LabelRead = function LabelRead(_ref) {
  var value = _ref.value;

  if (!(value !== null && value !== void 0 && value.color)) {
    return null;
  }

  var color = value.color,
      label = value.label;
  return /*#__PURE__*/React.createElement(Badge, {
    color: color
  }, label);
};

var css_248z$i = ".ff_v4290__Label__label__3Dv{\n\twidth:100%;\n}\n";
var styles$i = {
  "label": "ff_v4290__Label__label__3Dv"
};
styleInject(css_248z$i);

var getOptions$1 = function getOptions(options, translator) {
  var translatedLabel = translator.gettext('(none)');

  if (!options.length || options[0].id !== '') {
    var _context;

    return concat(_context = [{
      label: translatedLabel,
      color: '',
      id: ''
    }]).call(_context, options);
  }

  return options;
};
var getValue$1 = function getValue(value) {
  return (value === null || value === void 0 ? void 0 : value.id) || '';
};

function ownKeys$n(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$n(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$n(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$n(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Label = function Label(_ref) {
  var _context;

  var value = _ref.value,
      _ref$options = _ref.options,
      options = _ref$options === void 0 ? [] : _ref$options,
      _ref$placeholder = _ref.placeholder,
      placeholder = _ref$placeholder === void 0 ? ' ' : _ref$placeholder,
      _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      portalTo = _ref.portalTo,
      onComponentChange = _ref.onComponentChange,
      selectProps = _ref.selectProps,
      fieldType = _ref.fieldType,
      fieldKey = _ref.fieldKey,
      error = _ref.error;

  var _useState = useState(getValue$1(value)),
      _useState2 = _slicedToArray(_useState, 2),
      selected = _useState2[0],
      setSelected = _useState2[1];

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      fields = _parseContext.fields;

  var _useState3 = useState(function () {
    return initOptions(fields, options, fieldType, fieldKey);
  }),
      _useState4 = _slicedToArray(_useState3, 2),
      optionsState = _useState4[0],
      setOptionsState = _useState4[1];

  useEffect(function () {
    setSelected(getValue$1(value));
  }, [value]);
  useEffect(function () {
    return setOptionsState(getOptions$1(optionsState, translator));
  }, []);

  var onSelectChange = function onSelectChange(newSelected) {
    var selectedLabel = optionsState && find$1(optionsState).call(optionsState, function (label) {
      return label.id === newSelected;
    });

    setSelected(newSelected);

    if (onComponentChange) {
      onComponentChange(selectedLabel);
    }
  };

  var className = concat(_context = "".concat(styles$i.label, " ")).call(_context, error ? errorStyles.select : '');

  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Select, _objectSpread$n({
    popperProps: popperProps,
    value: selected,
    disabled: disabled,
    placeholder: placeholder,
    onChange: onSelectChange,
    portalTo: portalTo,
    className: className
  }, selectProps), map(optionsState).call(optionsState, function (_ref2) {
    var id = _ref2.id,
        label = _ref2.label,
        color = _ref2.color;

    if (color === null || id === null || !label) {
      return null;
    }

    return /*#__PURE__*/React.createElement(Select.Option, {
      key: id,
      value: id
    }, id ? /*#__PURE__*/React.createElement(Badge, {
      color: color
    }, label) : label);
  })), /*#__PURE__*/React.createElement(Error$1, {
    message: error
  }));
};

var MonetaryRead = function MonetaryRead(_ref) {
  var value = _ref.value;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      formatter = _parseContext.formatter,
      currencies = _parseContext.currencies;

  if (!value) {
    return null;
  }

  var code = currencies ? currencies[0].code : 'EUR';
  var label = value.label,
      _value$value = value.value,
      labelValue = _value$value === void 0 ? '' : _value$value;
  var selected = find$4(currencies, {
    code: label
  });

  if (selected) {
    code = selected.code;
  }

  var formattedValue = formatter.format(labelValue, code);
  return /*#__PURE__*/React.createElement(React.Fragment, null, formattedValue);
};

// while returning `code` for default state/established currencies.

var getCurrencySymbol = function getCurrencySymbol(_ref) {
  var is_custom_flag = _ref.is_custom_flag,
      symbol = _ref.symbol,
      code = _ref.code;

  if (is_custom_flag) {
    return symbol;
  }

  return code;
};
var getMonetaryOptions = function getMonetaryOptions(currencies) {
  if (!currencies) {
    return [];
  }

  return currencies.reduce(function (accumulator, currency) {
    if (currency.active_flag) {
      var _context;

      accumulator.push({
        label: concat(_context = "".concat(currency.name, " (")).call(_context, getCurrencySymbol(currency), ")"),
        value: currency.code,
        symbol: currency.symbol
      });
    }

    return accumulator;
  }, []);
};
var getLabel = function getLabel(options, defaultCurrency, labelValue) {
  if (labelValue) {
    var _options$;

    var selectedCurrency = find$1(options).call(options, function (option) {
      return option.value === labelValue;
    });

    var selectedCurrencyLabel = selectedCurrency ? selectedCurrency.value : (_options$ = options[0]) === null || _options$ === void 0 ? void 0 : _options$.value;
    return selectedCurrencyLabel;
  } else {
    var currencyResult = find$1(options).call(options, function (el) {
      return el.value === defaultCurrency;
    });

    if (currencyResult) {
      return currencyResult.value;
    } else {
      var _options$2;

      return (_options$2 = options[0]) === null || _options$2 === void 0 ? void 0 : _options$2.value;
    }
  }
};
var getValue = function getValue(value, defaultValue) {
  if (!isUndefined(value) && !isUndefined(value === null || value === void 0 ? void 0 : value.value)) {
    return String(value.value);
  }

  if (!isUndefined(defaultValue) && !isUndefined(defaultValue === null || defaultValue === void 0 ? void 0 : defaultValue.value)) {
    return String(defaultValue.value);
  }

  return;
};

var _excluded$8 = ["disabled", "value", "defaultValue", "onComponentChange", "error", "inputProps", "selectProps", "portalTo", "onValidation"];

function ownKeys$m(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$m(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$m(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$m(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var MonetaryComponent = function MonetaryComponent(_ref) {
  var disabled = _ref.disabled,
      value = _ref.value,
      defaultValue = _ref.defaultValue,
      onComponentChange = _ref.onComponentChange,
      error = _ref.error,
      inputProps = _ref.inputProps,
      selectProps = _ref.selectProps,
      portalTo = _ref.portalTo,
      onValidation = _ref.onValidation,
      rest = _objectWithoutProperties(_ref, _excluded$8);

  delete rest.options;
  var isDefault = !!isUndefined(defaultValue) && isUndefined(value);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      defaultCurrency = _parseContext.defaultCurrency,
      _parseContext$currenc = _parseContext.currencies,
      currencies = _parseContext$currenc === void 0 ? [] : _parseContext$currenc,
      formatter = _parseContext.formatter;

  var options = getMonetaryOptions(currencies) || [];

  var _useValidation = useValidation(translator),
      getNumberValidation = _useValidation.getNumberValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(getLabel(options, defaultCurrency, (value === null || value === void 0 ? void 0 : value.label) || (defaultValue === null || defaultValue === void 0 ? void 0 : defaultValue.label))),
      _useState2 = _slicedToArray(_useState, 2),
      labelState = _useState2[0],
      setLabel = _useState2[1];

  var _useState3 = useState(error),
      _useState4 = _slicedToArray(_useState3, 2),
      validationError = _useState4[0],
      setValidationError = _useState4[1];

  useEffect(function () {
    var tmp = getLabel(options, defaultCurrency, value === null || value === void 0 ? void 0 : value.label);
    setLabel(tmp);
  }, [value]);

  var onChange = function onChange(_ref2) {
    var labelValue = _ref2.value,
        label = _ref2.label;
    var values = {
      label: label,
      value: labelValue
    };
    setLabel(label);

    if (onComponentChange) {
      onComponentChange(values);
    }
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getNumberValidation,
      monetary: true,
      formatter: formatter
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var monetaryValue = getValue(value, defaultValue);
  return /*#__PURE__*/React.createElement(InputSelectCompound, _objectSpread$m({
    inputProps: inputProps,
    selectProps: selectProps,
    filter: true,
    options: options,
    error: error || validationError,
    disabled: disabled,
    selectedLabel: labelState,
    inputValue: monetaryValue,
    handleBlur: validate,
    onChange: onChange,
    isDefaultValue: isDefault,
    onComponentChange: onComponentChange,
    portalTo: portalTo
  }, rest));
};

var MultipleContactsRead = function MultipleContactsRead(_ref) {
  var value = _ref.value,
      _ref$openLinksInNewTa = _ref.openLinksInNewTab,
      openLinksInNewTab = _ref$openLinksInNewTa === void 0 ? false : _ref$openLinksInNewTa;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  if (!value) {
    return null;
  }

  return /*#__PURE__*/React.createElement("span", null, map(value).call(value, function (person, i) {
    var separator = i === value.length - 1 ? '' : ', ';
    var content = person.is_hidden ? "(".concat(translator.gettext('hidden'), ")") : /*#__PURE__*/React.createElement(Link, {
      openLinksInNewTab: openLinksInNewTab,
      href: "/person/".concat(person.id)
    }, person.name);
    return /*#__PURE__*/React.createElement("span", {
      key: i,
      "data-testid": "contact"
    }, content, separator);
  }));
};

var getPersons = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(personValue) {
    var _context;

    var persons;
    return _regeneratorRuntime.wrap(function _callee$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return find(DataTypes.person, personValue);

          case 2:
            persons = _context3.sent;
            return _context3.abrupt("return", persons === null || persons === void 0 ? void 0 : map(_context = persons.items).call(_context, function (_ref2) {
              var _context2, _person$organization, _person$organization2;

              var person = _ref2.item;

              var formattedName = concat(_context2 = "".concat(person.name)).call(_context2, person.organization ? " (".concat(person.organization.name, ")") : '');

              var hasEmail = person.emails.length > 0;
              var hasPhone = person.phones.length > 0;
              var details = hasEmail ? person.emails[0] : hasPhone ? person.phones[0] : null;
              return {
                id: person.id,
                name: person.name,
                formattedName: formattedName,
                details: details,
                is_hidden: person.is_hidden,
                email: hasEmail ? person.emails[0] : null,
                org_id: (_person$organization = person.organization) === null || _person$organization === void 0 ? void 0 : _person$organization.id,
                org_name: (_person$organization2 = person.organization) === null || _person$organization2 === void 0 ? void 0 : _person$organization2.name
              };
            }));

          case 4:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee);
  }));

  return function getPersons(_x) {
    return _ref.apply(this, arguments);
  };
}();

function ownKeys$l(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$l(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$l(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$l(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
function useQuickInfoCard() {
  var _useContext = useContext(FormFieldsContext),
      webappApi = _useContext.webappApi;

  var _useState = useState(null),
      _useState2 = _slicedToArray(_useState, 2),
      QuickInfoCard = _useState2[0],
      setQuickInfoCard = _useState2[1];

  React.useEffect(function () {
    var fetchQuickInfoCard = /*#__PURE__*/function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {
        var _yield$webappApi$comp, QuickInfoCardComponent;

        return _regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!(webappApi && webappApi.componentLoader)) {
                  _context.next = 6;
                  break;
                }

                _context.next = 3;
                return webappApi.componentLoader.load('quick-info-card');

              case 3:
                _yield$webappApi$comp = _context.sent;
                QuickInfoCardComponent = _yield$webappApi$comp.default;
                setQuickInfoCard(function () {
                  return function (props) {
                    return /*#__PURE__*/React.createElement(QuickInfoCardComponent, _objectSpread$l({
                      webappApi: webappApi
                    }, props));
                  };
                });

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      return function fetchQuickInfoCard() {
        return _ref.apply(this, arguments);
      };
    }();

    fetchQuickInfoCard();
  }, []);
  return QuickInfoCard;
}

var css_248z$h = ".ff_v4290__EntitySuggestions__duplicatesOptionslist__1tb{\n\tmax-height:364px;\n\toverflow:auto;\n}\n.ff_v4290__EntitySuggestions__option__2gG .cui4-option-check{\n\tright:12px;\n}\n.ff_v4290__EntitySuggestions__optionIcon__22k{\n\tposition:absolute;\n\tright:12px;\n\tdisplay:none;\n\ttop:calc(50% - 16px);\n}\n.ff_v4290__EntitySuggestions__optionIcon__22k .cui4-icon{\n\t\tdisplay:block;\n\t\tfill:#ffffff;\n\t}\n.ff_v4290__EntitySuggestions__optionIcon__22k .cui4-icon:hover{\n\t\t\tfill:#ffffff;\n\t\t}\n.ff_v4290__EntitySuggestions__optionIcon__22k:hover .cui4-icon{\n\t\t\tfill:#ffffff !important;\n\t\t}\n.ff_v4290__EntitySuggestions__option__2gG{\n\tpadding:8px 40px 8px 16px;\n\tbox-sizing:border-box;\n\tcursor:pointer;\n\tposition:relative;\n\tcolor:#26292c;\n}\n.ff_v4290__EntitySuggestions__option__2gG .ff_v4290__EntitySuggestions__name__2S5{\n\t\twhite-space:nowrap;\n\t\toverflow:hidden;\n\t\ttext-overflow:ellipsis;\n\t}\n.ff_v4290__EntitySuggestions__option__2gG .ff_v4290__EntitySuggestions__details__24V{\n\t\tcolor:#747678;\n\t\tfont-size:13px;\n\t}\n.ff_v4290__EntitySuggestions__option__2gG:hover, .ff_v4290__EntitySuggestions__option__2gG.ff_v4290__EntitySuggestions__optionHighlighted__3Ew{\n\t\tbackground:#317ae2;\n\t\tcolor:#ffffff;\n\t}\n.ff_v4290__EntitySuggestions__option__2gG:hover .ff_v4290__EntitySuggestions__optionIcon__22k, .ff_v4290__EntitySuggestions__option__2gG.ff_v4290__EntitySuggestions__optionHighlighted__3Ew .ff_v4290__EntitySuggestions__optionIcon__22k{\n\t\t\tdisplay:block;\n\t\t\tcursor:pointer;\n\t\t\tcolor:#ffffff;\n\t\t}\n.ff_v4290__EntitySuggestions__option__2gG:hover .ff_v4290__EntitySuggestions__details__24V, .ff_v4290__EntitySuggestions__option__2gG.ff_v4290__EntitySuggestions__optionHighlighted__3Ew .ff_v4290__EntitySuggestions__details__24V{\n\t\t\tcolor:#ffffff;\n\t\t}\n.ff_v4290__EntitySuggestions__option__2gG:hover .cui4-option-check, .ff_v4290__EntitySuggestions__option__2gG.ff_v4290__EntitySuggestions__optionHighlighted__3Ew .cui4-option-check{\n\t\t\tdisplay:none;\n\t\t}\n.ff_v4290__EntitySuggestions__addNew__2Gf{\n\tpadding:8px 16px;\n\tdisplay:flex;\n\talign-items:center;\n\tmargin-top:4px;\n\tcursor:pointer;\n}\n.ff_v4290__EntitySuggestions__addNew__2Gf span{\n\t\tmargin-left:8px;\n\t\tfont-weight:600;\n\t\tcolor:#317ae2;\n\t}\n.ff_v4290__EntitySuggestions__addNew__2Gf svg{\n\t\tfill:#317ae2;\n\t}\n.ff_v4290__EntitySuggestions__tooltip__2Tg{\n\tz-index:6001;\n}\n.ff_v4290__EntitySuggestions__tooltipContent__6X7{\n\tmax-width:200px;\n}\n";
var styles$h = {
  "duplicatesOptionslist": "ff_v4290__EntitySuggestions__duplicatesOptionslist__1tb",
  "option": "ff_v4290__EntitySuggestions__option__2gG",
  "optionIcon": "ff_v4290__EntitySuggestions__optionIcon__22k",
  "name": "ff_v4290__EntitySuggestions__name__2S5",
  "details": "ff_v4290__EntitySuggestions__details__24V",
  "optionHighlighted": "ff_v4290__EntitySuggestions__optionHighlighted__3Ew",
  "addNew": "ff_v4290__EntitySuggestions__addNew__2Gf",
  "tooltip": "ff_v4290__EntitySuggestions__tooltip__2Tg",
  "tooltipContent": "ff_v4290__EntitySuggestions__tooltipContent__6X7"
};
styleInject(css_248z$h);

var DetailsIcon = function DetailsIcon(_ref) {
  var type = _ref.type,
      contact = _ref.contact,
      tooltipText = _ref.tooltipText,
      QuickInfoCard = _ref.QuickInfoCard;

  var renderButton = function renderButton() {
    var _context;

    return /*#__PURE__*/React.createElement(Button, {
      color: "ghost-alternative",
      href: concat(_context = "/".concat(type, "/")).call(_context, contact.id),
      target: "_blank",
      rel: "noopener noreferrer",
      onClick: function onClick(e) {
        return e.stopPropagation();
      }
    }, /*#__PURE__*/React.createElement(Icon, {
      icon: "redirect",
      color: "white",
      size: "s"
    }));
  };

  if (QuickInfoCard) {
    return /*#__PURE__*/React.createElement(QuickInfoCard, {
      type: type,
      id: contact.id,
      popoverProps: {
        portalTo: document.body,
        mouseLeaveDelay: 0,
        placement: 'right'
      },
      source: "contact_suggestions"
    }, renderButton());
  }

  return /*#__PURE__*/React.createElement(Tooltip, {
    className: styles$h.tooltip,
    placement: "left",
    content: /*#__PURE__*/React.createElement("div", {
      className: styles$h.tooltipContent
    }, tooltipText),
    portalTo: document.body
  }, renderButton());
};

function ownKeys$k(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$k(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$k(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$k(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
// for the components that use EntitySuggestions

var ADD_NEW_DUMMY_ITEM = {
  id: 0,
  name: 'add-new',
  formattedName: 'add-new',
  details: '',
  email: '',
  is_hidden: false,
  org_id: 0,
  org_name: ''
};

var EntitySuggestions = function EntitySuggestions(_ref) {
  var contacts = _ref.contacts,
      highlightedIndex = _ref.highlightedIndex,
      setHighlightedIndex = _ref.setHighlightedIndex,
      type = _ref.type,
      getItemProps = _ref.getItemProps,
      onClickOption = _ref.onClickOption,
      onClickAddNew = _ref.onClickAddNew,
      _ref$allowNewItem = _ref.allowNewItem,
      allowNewItem = _ref$allowNewItem === void 0 ? true : _ref$allowNewItem,
      texts = _ref.texts,
      inputValue = _ref.inputValue;
  var QuickInfoCard = useQuickInfoCard();

  var filteredContacts = filter(contacts).call(contacts, function (contact) {
    return contact.id !== ADD_NEW_DUMMY_ITEM.id && contact.name !== ADD_NEW_DUMMY_ITEM.name;
  });

  var renderAddNewOption = function renderAddNewOption() {
    if (!allowNewItem) {
      return;
    }

    var onMouseEnter = function onMouseEnter() {
      if (setHighlightedIndex) {
        setHighlightedIndex(filteredContacts.length + 1);
      }
    };

    var elementProps = getItemProps ? getItemProps({
      item: inputValue
    }) : {};

    var onClick = function onClick() {
      return onClickAddNew ? onClickAddNew(inputValue) : noop;
    };

    return /*#__PURE__*/React.createElement(React.Fragment, null, filteredContacts.length > 0 && /*#__PURE__*/React.createElement(Separator, null), /*#__PURE__*/React.createElement("div", _objectSpread$k({}, elementProps), /*#__PURE__*/React.createElement(Option, {
      "data-testid": "entity-suggestion-add-new",
      className: styles$h.addNew,
      highlighted: highlightedIndex === filteredContacts.length,
      onClick: onClick,
      onMouseEnter: onMouseEnter
    }, /*#__PURE__*/React.createElement(Icon, {
      size: "s",
      icon: "plus"
    }), /*#__PURE__*/React.createElement("span", null, texts.addNew))));
  };

  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
    className: styles$h.duplicatesOptionslist
  }, map(filteredContacts).call(filteredContacts, function (contact, index) {
    var _classNames;

    var onClick = function onClick() {
      return onClickOption ? onClickOption(contact) : noop;
    };

    var additionalRootElementProps = getItemProps ? getItemProps({
      item: contact,
      index: index
    }) : {};

    var onMouseEnter = function onMouseEnter() {
      if (setHighlightedIndex) {
        setHighlightedIndex(index);
      }
    };

    return /*#__PURE__*/React.createElement("div", _objectSpread$k({
      key: contact.id,
      onClick: onClick
    }, additionalRootElementProps), /*#__PURE__*/React.createElement(Option, {
      "data-testid": "option",
      className: classNames((_classNames = {}, _defineProperty(_classNames, styles$h.option, true), _defineProperty(_classNames, styles$h.optionHighlighted, highlightedIndex === index), _classNames)),
      onMouseEnter: onMouseEnter
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$h.name
    }, contact.formattedName || contact.name), contact.details && /*#__PURE__*/React.createElement("div", {
      className: styles$h.details
    }, contact.details), /*#__PURE__*/React.createElement("div", {
      className: styles$h.optionIcon
    }, /*#__PURE__*/React.createElement(DetailsIcon, {
      QuickInfoCard: QuickInfoCard,
      type: type,
      contact: contact,
      tooltipText: texts.tooltip
    }))));
  })), renderAddNewOption());
};

var css_248z$g = ".ff_v4290__InputMultiSelect__wrapper__2ay{\n\tdisplay:flex;\n\tposition:relative;\n\tborder:1px solid #cbcccd;\n\tborder-radius:2px;\n\tbackground:#ffffff;\n\tbox-shadow:inset 0 1px 2px #eeeeee;\n\tflex-wrap:wrap;\n\talign-items:center;\n\twidth:unset;\n}\n\n\t.ff_v4290__InputMultiSelect__wrapper__2ay > .ff_v4290__InputMultiSelect__selectedTag__9LT{\n\t\tmargin:4px 0 4px 8px;\n\t}\n\n\t.ff_v4290__InputMultiSelect__wrapper__2ay > .ff_v4290__InputMultiSelect__selectedTag__9LT .cui4-tag__content{\n\t\t\tcolor:#26292c;\n\t\t\tdisplay:flex;\n\t\t\talign-items:center;\n\t\t}\n\n\t.ff_v4290__InputMultiSelect__wrapper__2ay > .ff_v4290__InputMultiSelect__selectedTag__9LT ~ .ff_v4290__InputMultiSelect__selectedTag__9LT{\n\t\tmargin-left:4px;\n\t}\n\n\t.ff_v4290__InputMultiSelect__wrapper__2ay:focus-within{\n\t\tborder-color:#317ae2;\n\t}\n\n\t.ff_v4290__InputMultiSelect__wrapper__2ay.ff_v4290__InputMultiSelect__errorWrapper__15O{\n\t\tborder:1px solid #f94839;\n\t}\n\n\t.ff_v4290__InputMultiSelect__disabledInputWrapper__TGK{\n\tbackground-color:#f7f7f7;\n}\n\n\t.ff_v4290__InputMultiSelect__inputIcon__3-i{\n\tmargin-left:8px;\n}\n\n\t.ff_v4290__InputMultiSelect__input__ZAT{\n\tmin-width:150px;\n\tflex:1;\n}\n\n\t.ff_v4290__InputMultiSelect__input__ZAT input[type='text']{\n\t\tborder:none;\n\t\tbox-shadow:none;\n\t\tmin-width:150px;\n\t\tflex:1;\n\t\tbackground:transparent;\n\t}\n\n\t.ff_v4290__InputMultiSelect__input__ZAT input[type='text']:focus{\n\t\t\toutline:none;\n\t\t\tborder:none;\n\t\t\tbox-shadow:none;\n\t\t}\n\n\t.ff_v4290__InputMultiSelect__tagWarning__3Zy{\n\tmargin:0 2px 0 4px;\n}\n\n\t.ff_v4290__InputMultiSelect__newBadge__3ZK, .ff_v4290__InputMultiSelect__loadingSpinner__2KZ{\n\tposition:absolute;\n\tright:6px;\n\ttop:calc(50% - 8px);\n}\n\n\t.ff_v4290__InputMultiSelect__popover__jfH{\n\tz-index:6001;\n}\n";
var styles$g = {
  "wrapper": "ff_v4290__InputMultiSelect__wrapper__2ay",
  "selectedTag": "ff_v4290__InputMultiSelect__selectedTag__9LT",
  "errorWrapper": "ff_v4290__InputMultiSelect__errorWrapper__15O",
  "disabledInputWrapper": "ff_v4290__InputMultiSelect__disabledInputWrapper__TGK",
  "inputIcon": "ff_v4290__InputMultiSelect__inputIcon__3-i",
  "input": "ff_v4290__InputMultiSelect__input__ZAT",
  "tagWarning": "ff_v4290__InputMultiSelect__tagWarning__3Zy",
  "newBadge": "ff_v4290__InputMultiSelect__newBadge__3ZK",
  "loadingSpinner": "ff_v4290__InputMultiSelect__loadingSpinner__2KZ",
  "popover": "ff_v4290__InputMultiSelect__popover__jfH"
};
styleInject(css_248z$g);

var ClearIcon = function ClearIcon(_ref) {
  var isLoading = _ref.isLoading,
      allowClear = _ref.allowClear,
      selectedItems = _ref.selectedItems,
      setSelectedItems = _ref.setSelectedItems,
      onComponentChange = _ref.onComponentChange,
      clearInput = _ref.clearInput;

  if (!(!isLoading && allowClear && selectedItems && selectedItems.length)) {
    return null;
  }

  return /*#__PURE__*/React.createElement(Icon, {
    size: "s",
    icon: "cross",
    className: "cui4-input__clear",
    onClick: function onClick() {
      setSelectedItems([]);
      onComponentChange([]);
      clearInput();
    }
  });
};

var _excluded$7 = ["ref", "value", "onKeyDown"],
    _excluded2 = ["allowClear", "className", "icon", "onBlur"];

function ownKeys$j(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$j(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$j(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$j(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
/**
 * A component used in MultipleContacts fields.
 * Similar to InputSelect component, displays the values returned from getSuggestions function as Select options.
 * When selecting an item, adds it to the input as a Tag element.
 * Typically performs a request to /search endpoint, but can also be used as a generic Autocomplete field.
 *
 * @template T - Type of the suggestion
 * @param {InputMultiSelectProps<T>} props - Props for InputMultiSelectProps
 * @returns {React.ReactElement<DownshiftProps<T>, string>} Downshift component
 */

function InputMultiSelect(_ref) {
  var _ref$getSuggestions = _ref.getSuggestions,
      getSuggestions = _ref$getSuggestions === void 0 ? function (inputValue) {
    return promise.resolve([]);
  } : _ref$getSuggestions,
      _ref$getSuggestionVal = _ref.getSuggestionValue,
      getSuggestionValue = _ref$getSuggestionVal === void 0 ? function (suggestion) {
    return suggestion;
  } : _ref$getSuggestionVal,
      _ref$suggestionValueK = _ref.suggestionValueKey,
      suggestionValueKey = _ref$suggestionValueK === void 0 ? 'name' : _ref$suggestionValueK,
      className = _ref.className,
      portalTo = _ref.portalTo,
      _ref$placement = _ref.placement,
      placement = _ref$placement === void 0 ? 'bottom-start' : _ref$placement,
      suggestionIcon = _ref.suggestionIcon,
      renderSuggestions = _ref.renderSuggestions,
      renderSelectedItem = _ref.renderSelectedItem,
      _ref$getSuggestionIco = _ref.getSuggestionIcon,
      getSuggestionIcon = _ref$getSuggestionIco === void 0 ? function (_) {
    return suggestionIcon || '';
  } : _ref$getSuggestionIco,
      error = _ref.error,
      value = _ref.value,
      warning = _ref.warning,
      disabled = _ref.disabled,
      _ref$dropdownTrigger = _ref.dropdownTrigger,
      dropdownTrigger = _ref$dropdownTrigger === void 0 ? 0 : _ref$dropdownTrigger,
      _ref$onComponentChang = _ref.onComponentChange,
      onComponentChange = _ref$onComponentChang === void 0 ? function () {
    return null;
  } : _ref$onComponentChang,
      _ref$searchDelay = _ref.searchDelay,
      searchDelay = _ref$searchDelay === void 0 ? 500 : _ref$searchDelay,
      placeholder = _ref.placeholder,
      _ref$inputProps = _ref.inputProps,
      inputProps = _ref$inputProps === void 0 ? {} : _ref$inputProps,
      _ref$dropmenuProps = _ref.dropmenuProps,
      dropmenuProps = _ref$dropmenuProps === void 0 ? {} : _ref$dropmenuProps,
      _ref$tagProps = _ref.tagProps,
      tagProps = _ref$tagProps === void 0 ? {} : _ref$tagProps,
      _ref$downshiftProps = _ref.downshiftProps,
      downshiftProps = _ref$downshiftProps === void 0 ? {} : _ref$downshiftProps,
      allowNewItems = _ref.allowNewItems,
      maxSelectedItems = _ref.maxSelectedItems;
  var inputRef = useRef(null);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      isLoading = _useState2[0],
      setIsLoading = _useState2[1];

  var _useState3 = useState(null),
      _useState4 = _slicedToArray(_useState3, 2),
      suggestions = _useState4[0],
      setSuggestions = _useState4[1];

  var _useState5 = useState(value || []),
      _useState6 = _slicedToArray(_useState5, 2),
      selectedItems = _useState6[0],
      setSelectedItems = _useState6[1];

  useEffect(function () {
    setSelectedItems(value || []);
  }, [value]);

  var onInputValueChange = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputValue, _ref2) {
      var selectedItem, results, uniqueResults;
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              selectedItem = _ref2.selectedItem;

              if (!(!inputValue || dropdownTrigger > inputValue.length || isLoading || selectedItem && getSuggestionValue(selectedItem) === inputValue)) {
                _context.next = 4;
                break;
              }

              setSuggestions(null);
              return _context.abrupt("return");

            case 4:
              setIsLoading(true);
              _context.prev = 5;
              _context.next = 8;
              return getSuggestions(inputValue);

            case 8:
              results = _context.sent;
              uniqueResults = differenceWith(results, selectedItems, isEqual);
              setIsLoading(false);
              setSuggestions(uniqueResults);
              _context.next = 17;
              break;

            case 14:
              _context.prev = 14;
              _context.t0 = _context["catch"](5);
              setIsLoading(false);

            case 17:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[5, 14]]);
    }));

    return function onInputValueChange(_x, _x2) {
      return _ref3.apply(this, arguments);
    };
  }();

  var removeItem = function removeItem(index) {
    var filteredItems = filter(selectedItems).call(selectedItems, function (item, itemIndex) {
      return itemIndex !== index;
    });

    setSelectedItems(filteredItems);
    onComponentChange(filteredItems);
  };

  var itemToString = function itemToString(item) {
    if (!item) {
      return '';
    }

    return getSuggestionValue(item);
  };

  var onSelect = function onSelect(selectedItem, _ref4) {
    var _context2;

    var setState = _ref4.setState;

    if (!selectedItem) {
      return;
    }

    var itemAlreadySelected = find$4(selectedItems, function (item) {
      return isEqual(item, selectedItem);
    });

    var items = concat(_context2 = []).call(_context2, _toConsumableArray(selectedItems), [selectedItem]);

    if (!itemAlreadySelected) {
      setSelectedItems(items);
    }

    if (items.length) {
      onComponentChange(items);
    }

    setState({
      inputValue: ''
    });
    setSuggestions(null);
  };

  var renderSelectedItems = function renderSelectedItems() {
    return map(selectedItems).call(selectedItems, function (item, index) {
      var _context4;

      if (renderSelectedItem) {
        var _context3;

        return /*#__PURE__*/React.createElement("div", {
          className: styles$g.selectedTag,
          key: concat(_context3 = "".concat(item)).call(_context3, index)
        }, renderSelectedItem({
          item: item,
          index: index,
          isLoading: isLoading
        }, {
          removeItem: removeItem
        }));
      }

      return /*#__PURE__*/React.createElement(Tag, _objectSpread$j({
        dismissable: !disabled,
        key: concat(_context4 = "".concat(item)).call(_context4, index),
        onDismiss: function onDismiss() {
          return removeItem(index);
        },
        className: styles$g.selectedTag
      }, tagProps), getSuggestionValue(item), warning && /*#__PURE__*/React.createElement(Tooltip, {
        placement: "top",
        content: /*#__PURE__*/React.createElement("span", null, warning)
      }, /*#__PURE__*/React.createElement(Icon, {
        size: "s",
        icon: "warning-outline",
        color: "yellow",
        className: styles$g.tagWarning
      })), item.is_new && /*#__PURE__*/React.createElement(Badge, {
        color: "blue"
      }, translator.gettext('new')));
    });
  };

  var addNewItem = function addNewItem(newValue) {
    var _context5, _ref5;

    var newItems = concat(_context5 = []).call(_context5, _toConsumableArray(selectedItems), [(_ref5 = {}, _defineProperty(_ref5, suggestionValueKey, newValue), _defineProperty(_ref5, "is_new", true), _ref5)]);

    onComponentChange(newItems);
    setSelectedItems(newItems);
  };

  var renderDefaultSuggestions = function renderDefaultSuggestions(getItemProps, highlightedIndex) {
    var _context6;

    return map(_context6 = suggestions || []).call(_context6, function (item, index) {
      var _context7;

      return /*#__PURE__*/React.createElement("div", _objectSpread$j(_objectSpread$j({}, getItemProps({
        item: item,
        index: index
      })), {}, {
        key: concat(_context7 = "".concat(item)).call(_context7, index)
      }), /*#__PURE__*/React.createElement(Option, {
        highlighted: highlightedIndex === index,
        className: classNames(styles$g.suggestion)
      }, suggestionIcon && /*#__PURE__*/React.createElement(Icon, {
        icon: getSuggestionIcon(item),
        size: "s",
        color: "black-64",
        className: styles$g.suggestionIcon
      }), getSuggestionValue(item)));
    });
  };

  var renderInput = function renderInput(_ref6) {
    var getInputProps = _ref6.getInputProps,
        setState = _ref6.setState,
        clearSelection = _ref6.clearSelection;

    var _getInputProps = getInputProps();
        _getInputProps.ref;
        var inputValue = _getInputProps.value,
        _onKeyDown = _getInputProps.onKeyDown,
        restDownshiftInputProps = _objectWithoutProperties(_getInputProps, _excluded$7);

    var allowClear = inputProps.allowClear,
        inputClassName = inputProps.className,
        icon = inputProps.icon,
        _onBlur = inputProps.onBlur,
        restCuiInputProps = _objectWithoutProperties(inputProps, _excluded2);

    var isDisabled = isNumber(maxSelectedItems) && selectedItems.length >= maxSelectedItems || disabled;

    var clearInput = function clearInput() {
      clearSelection();
      setState({
        inputValue: ''
      });
    };

    return /*#__PURE__*/React.createElement("div", {
      className: classNames(className, 'cui4-input__box')
    }, /*#__PURE__*/React.createElement("div", {
      className: classNames('cui4-input', styles$g.input, inputClassName)
    }, /*#__PURE__*/React.createElement("div", {
      className: classNames(styles$g.wrapper, isDisabled && styles$g.disabledInputWrapper, error && styles$g.errorWrapper),
      ref: inputRef
    }, !!icon && /*#__PURE__*/React.createElement(Icon, {
      icon: icon,
      size: "s",
      className: styles$g.inputIcon
    }), renderSelectedItems(), /*#__PURE__*/React.createElement(Input, _objectSpread$j(_objectSpread$j(_objectSpread$j({
      className: classNames(inputClassName, styles$g.input),
      style: {
        paddingRight: allowClear ? '26px' : '12px'
      },
      placeholder: placeholder,
      value: inputValue,
      disabled: isDisabled
    }, restCuiInputProps), restDownshiftInputProps), {}, {
      onKeyDown: function onKeyDown(event) {
        _onKeyDown(event);

        if (event.key === 'Enter' && allowNewItems && !(suggestions !== null && suggestions !== void 0 && suggestions.length) && inputValue) {
          addNewItem(inputValue);
          clearInput();
        }
      },
      onBlur: function onBlur(event) {
        if (_onBlur) {
          _onBlur(event);
        }

        if (allowNewItems && inputValue) {
          addNewItem(inputValue);
        }

        clearInput();
      }
    }))), /*#__PURE__*/React.createElement(ClearIcon, {
      isLoading: isLoading,
      allowClear: allowClear,
      selectedItems: selectedItems,
      setSelectedItems: setSelectedItems,
      onComponentChange: onComponentChange,
      clearInput: clearInput
    }), isLoading && /*#__PURE__*/React.createElement(Spinner, {
      className: styles$g.loadingSpinner,
      size: "s"
    })));
  };

  var renderDropMenu = function renderDropMenu(_ref7, children) {
    var isOpen = _ref7.isOpen,
        highlightedIndex = _ref7.highlightedIndex,
        getItemProps = _ref7.getItemProps,
        setHighlightedIndex = _ref7.setHighlightedIndex,
        inputValue = _ref7.inputValue;
    var width = inputRef.current ? inputRef.current.clientWidth : 'auto';
    var renderDropmenuSuggestions = renderSuggestions ? renderSuggestions(suggestions || []) : renderDefaultSuggestions;
    var isVisible = isOpen && !!inputValue && inputValue.length >= dropdownTrigger && !!suggestions;
    return /*#__PURE__*/React.createElement(Dropmenu, _objectSpread$j({
      content: /*#__PURE__*/React.createElement("div", {
        style: {
          width: width
        }
      }, isOpen && renderDropmenuSuggestions(getItemProps, highlightedIndex, setHighlightedIndex, inputValue || '')),
      popoverProps: {
        className: styles$g.popover,
        portalTo: portalTo,
        placement: placement,
        spacing: 'none',
        visible: isVisible
      }
    }, dropmenuProps), children);
  };

  var stateReducer = function stateReducer(_, changes) {
    switch (changes.type) {
      case Downshift.stateChangeTypes.mouseUp:
      case Downshift.stateChangeTypes.keyDownEscape:
        return _objectSpread$j(_objectSpread$j({}, changes), {}, {
          inputValue: ''
        });

      default:
        return changes;
    }
  };

  return /*#__PURE__*/React.createElement(Downshift, _objectSpread$j({
    onInputValueChange: useCallback(debounce(onInputValueChange, searchDelay), []),
    stateReducer: stateReducer,
    itemToString: itemToString,
    onSelect: onSelect,
    defaultHighlightedIndex: 0
  }, downshiftProps), function (state) {
    return /*#__PURE__*/React.createElement("div", null, renderDropMenu(state, renderInput(state)));
  });
}

var css_248z$f = ".ff_v4290__MultipleContacts__squeezedInput__3ot input{\n\tmax-height:30px;\n}\n";
var styles$f = {
  "squeezedInput": "ff_v4290__MultipleContacts__squeezedInput__3ot"
};
styleInject(css_248z$f);

var _excluded$6 = ["onComponentChange", "allowClear", "allowNewItems", "getSuggestions"];

function ownKeys$i(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$i(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$i(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$i(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var MultipleContacts = function MultipleContacts(_ref) {
  var onComponentChange = _ref.onComponentChange,
      _ref$allowClear = _ref.allowClear,
      allowClear = _ref$allowClear === void 0 ? false : _ref$allowClear,
      _ref$allowNewItems = _ref.allowNewItems,
      allowNewItems = _ref$allowNewItems === void 0 ? false : _ref$allowNewItems;
      _ref.getSuggestions;
      var restProps = _objectWithoutProperties(_ref, _excluded$6);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var renderContactSuggestions = function renderContactSuggestions(persons) {
    return function (getItemProps, highlightedIndex, setHighlightedIndex, inputValue) {
      return /*#__PURE__*/React.createElement(EntitySuggestions, {
        inputValue: inputValue,
        contacts: persons,
        highlightedIndex: highlightedIndex,
        setHighlightedIndex: setHighlightedIndex,
        getItemProps: getItemProps,
        type: "person",
        allowNewItem: allowNewItems,
        texts: {
          tooltip: translator.gettext('Show organization details'),
          addNew: translator.gettext("Add '%s' as new contact", inputValue)
        }
      });
    };
  };

  var validate = function validate(event) {
    handleValidation({
      formValue: event,
      validate: getValidation
    });
  };

  var getSuggestionValue = function getSuggestionValue(person) {
    if (person.is_hidden) {
      return translator.gettext('(hidden)');
    }

    return person.name;
  };

  return /*#__PURE__*/React.createElement(InputMultiSelect, _objectSpread$i({
    getSuggestionValue: getSuggestionValue,
    suggestionValueKey: "name",
    getSuggestions: getPersons,
    renderSuggestions: renderContactSuggestions,
    dropdownTrigger: 2,
    inputProps: {
      onBlur: validate,
      icon: 'person',
      allowClear: allowClear,
      className: styles$f.squeezedInput
    },
    onComponentChange: onComponentChange,
    allowNewItems: allowNewItems
  }, restProps));
};

var $$3 = _export;

var $includes = arrayIncludes$1.includes;
// https://tc39.es/ecma262/#sec-array.prototype.includes


$$3({
  target: 'Array',
  proto: true
}, {
  includes: function includes(el
  /* , fromIndex = 0 */
  ) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
}); // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables

var entryVirtual$4 = entryVirtual$e;

var includes$3 = entryVirtual$4('Array').includes;

var $$2 = _export;

var notARegExp = notARegexp;

var requireObjectCoercible$2 = requireObjectCoercible$8;

var correctIsRegExpLogic = correctIsRegexpLogic; // `String.prototype.includes` method
// https://tc39.es/ecma262/#sec-string.prototype.includes


$$2({
  target: 'String',
  proto: true,
  forced: !correctIsRegExpLogic('includes')
}, {
  includes: function includes(searchString
  /* , position = 0 */
  ) {
    return !!~String(requireObjectCoercible$2(this)).indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);
  }
});

var entryVirtual$3 = entryVirtual$e;

var includes$2 = entryVirtual$3('String').includes;

var arrayIncludes = includes$3;

var stringIncludes = includes$2;

var ArrayPrototype$2 = Array.prototype;
var StringPrototype$1 = String.prototype;

var includes$1 = function (it) {
  var own = it.includes;
  if (it === ArrayPrototype$2 || it instanceof Array && own === ArrayPrototype$2.includes) return arrayIncludes;

  if (typeof it === 'string' || it === StringPrototype$1 || it instanceof String && own === StringPrototype$1.includes) {
    return stringIncludes;
  }

  return own;
};

var parent$3 = includes$1;

var includes = parent$3;

var css_248z$e = ".ff_v4290__MultipleOptions__container__M1Q{\n\twidth:100%;\n}\n\n.ff_v4290__MultipleOptions__tag__3yR{\n\tmargin-left:5px;\n\tmargin-top:5px;\n}\n\n.ff_v4290__MultipleOptions__row__26w, .ff_v4290__MultipleOptions__readWrapper__11P{\n\tdisplay:flex;\n\tflex-wrap:wrap;\n}\n\n.ff_v4290__MultipleOptions__readWrapper__11P li{\n\t\tmargin-right:4px;\n\t\tmargin-bottom:4px;\n\t}\n";
var styles$e = {
  "container": "ff_v4290__MultipleOptions__container__M1Q",
  "tag": "ff_v4290__MultipleOptions__tag__3yR",
  "row": "ff_v4290__MultipleOptions__row__26w",
  "readWrapper": "ff_v4290__MultipleOptions__readWrapper__11P"
};
styleInject(css_248z$e);

function getInitValues(value) {
  if (isString(value)) {
    return value.split(',');
  }

  if (isArray$6(value) && isObject$d(value[0])) {
    return map(value).call(value, function (_ref) {
      var id = _ref.id;
      return String(id);
    });
  }

  if (isArray$6(value)) {
    return map(value).call(value, function (val) {
      return String(val);
    });
  }

  return value;
}

var getSelectedOptions = function getSelectedOptions(values, options) {
  if (isArray$6(values) && options) {
    return filter$3(options, function (option) {
      return includes(values).call(values, String(option.id));
    }) || [];
  }

  return [];
};

var MultipleOptionsRead = function MultipleOptionsRead(_ref) {
  var value = _ref.value,
      options = _ref.options,
      fieldType = _ref.fieldType,
      fieldKey = _ref.fieldKey;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      fields = _parseContext.fields;

  var _useState = useState(function () {
    return initOptions(fields, options, fieldType, fieldKey);
  }),
      _useState2 = _slicedToArray(_useState, 1),
      optionsState = _useState2[0];

  if (!value) {
    return null;
  }

  var selectedOptions = getSelectedOptions(getInitValues(value), optionsState);

  var selectedTags = map(selectedOptions).call(selectedOptions, function (tag, index) {
    return /*#__PURE__*/React.createElement("li", {
      key: index,
      className: styles$e.choiceItem
    }, /*#__PURE__*/React.createElement(Tag, null, tag.label));
  });

  return /*#__PURE__*/React.createElement("ul", {
    className: styles$e.readWrapper
  }, selectedTags);
};

function ownKeys$h(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$h(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$h(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$h(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var MultipleOptions = function MultipleOptions(_ref) {
  var onComponentChange = _ref.onComponentChange,
      _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      selectProps = _ref.selectProps,
      _ref$placeholder = _ref.placeholder,
      placeholder = _ref$placeholder === void 0 ? '  ' : _ref$placeholder,
      defaultValue = _ref.defaultValue,
      _ref$value = _ref.value,
      value = _ref$value === void 0 ? defaultValue : _ref$value,
      options = _ref.options,
      _ref$filter = filter(_ref),
      filterProp = _ref$filter === void 0 ? options.length >= 5 : _ref$filter,
      fieldType = _ref.fieldType,
      fieldKey = _ref.fieldKey,
      error = _ref.error,
      portalTo = _ref.portalTo;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      fields = _parseContext.fields;

  var _useState = useState(function () {
    return initOptions(fields, options, fieldType, fieldKey);
  }),
      _useState2 = _slicedToArray(_useState, 1),
      optionsState = _useState2[0];

  var initTags = function initTags() {
    if (value && optionsState) {
      var values = getInitValues(value);
      var initValues = filter$3(optionsState, function (option) {
        return includes(values).call(values, String(option.id));
      });
      return initValues || [];
    }

    return [];
  };

  var _useState3 = useState(initTags),
      _useState4 = _slicedToArray(_useState3, 2),
      tagsState = _useState4[0],
      setTags = _useState4[1];

  useEffect(function () {
    setTags(initTags());
  }, [value]);

  var handleChange = function handleChange(tags) {
    setTags(tags);

    if (onComponentChange) {
      onComponentChange(tags);
    }
  };

  var onSuggestionSelected = function onSuggestionSelected(data) {
    var selectedValue = filter(optionsState).call(optionsState, function (option) {
      return data && includes(data).call(data, option.id);
    });

    if (onComponentChange) {
      onComponentChange(selectedValue);
    }
  };

  var autocompleteRenderInput = function autocompleteRenderInput(_ref2) {
    var _context;

    _ref2.addTag;

    var selectedIds = map(tagsState).call(tagsState, function (tag) {
      return tag.id;
    });

    var onSelectChange = function onSelectChange(data) {
      return onSuggestionSelected(data);
    };

    var className = concat(_context = "".concat(styles$e.container, " ")).call(_context, error ? errorStyles.select : '');

    return /*#__PURE__*/React.createElement(Select, _objectSpread$h(_objectSpread$h({
      disabled: disabled,
      popperProps: popperProps,
      portalTo: portalTo,
      className: className,
      allowClear: true,
      placeholder: placeholder,
      filter: filterProp,
      multiple: true,
      onChange: onSelectChange
    }, getValue$3({
      value: value,
      defaultValue: defaultValue,
      callback: function callback() {
        return selectedIds;
      }
    })), selectProps), map(optionsState).call(optionsState, function (el) {
      return /*#__PURE__*/React.createElement(Select.Option, {
        key: el.id,
        value: el.id
      }, el.label);
    }));
  };

  var renderLayout = function renderLayout(tagComponents, inputComponent) {
    return /*#__PURE__*/React.createElement("div", {
      tabIndex: 1
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$e.row
    }, inputComponent));
  };

  var renderTag = function renderTag(renderProps) {
    var tag = renderProps.tag,
        key = renderProps.key,
        onRemove = renderProps.onRemove,
        getTagDisplayValue = renderProps.getTagDisplayValue;

    var onDismiss = function onDismiss() {
      return onRemove(key);
    };

    return /*#__PURE__*/React.createElement(Tag, {
      key: key,
      disabled: disabled,
      className: styles$e.tag,
      dismissable: true,
      onDismiss: onDismiss
    }, getTagDisplayValue(tag.label));
  };

  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TagsInput, {
    value: tagsState,
    renderInput: autocompleteRenderInput,
    onChange: handleChange,
    renderLayout: renderLayout,
    renderTag: renderTag,
    disabled: disabled
  }), /*#__PURE__*/React.createElement(Error$1, {
    message: error
  }));
};

var NumberRead = function NumberRead(_ref) {
  var value = _ref.value;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      formatter = _parseContext.formatter;

  if (isNil(value)) {
    return null;
  }

  var numberValue = formatter.formatNumber(value);
  return /*#__PURE__*/React.createElement(React.Fragment, null, numberValue);
};

function ownKeys$g(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$g(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$g(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$g(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var NumberComponent = function NumberComponent(_ref) {
  var value = _ref.value,
      defaultValue = _ref.defaultValue,
      disabled = _ref.disabled,
      autofocus = _ref.autofocus,
      onComponentChange = _ref.onComponentChange,
      error = _ref.error,
      inputProps = _ref.inputProps,
      placeholder = _ref.placeholder,
      onValidation = _ref.onValidation;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      formatter = _parseContext.formatter;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var _useValidation = useValidation(translator),
      getNumberValidation = _useValidation.getNumberValidation,
      handleValidation = _useValidation.handleValidation;

  var onChange = function onChange(event) {
    onComponentChange(event.currentTarget.value);
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getNumberValidation,
      monetary: false,
      formatter: formatter
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  return /*#__PURE__*/React.createElement(Input, _objectSpread$g(_objectSpread$g({}, getValue$3({
    value: value,
    defaultValue: defaultValue
  })), {}, {
    autoFocus: autofocus,
    type: "text",
    message: error || validationError,
    color: error || validationError ? 'red' : undefined,
    onBlur: validate,
    onMouseOut: validate,
    onChange: onChange,
    disabled: disabled,
    placeholder: placeholder
  }, inputProps));
};

var OrganizationRead = function OrganizationRead(_ref) {
  var value = _ref.value,
      openLinksInNewTab = _ref.openLinksInNewTab;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  if (!value) {
    return null;
  }

  if (value.is_hidden) {
    return /*#__PURE__*/React.createElement("span", null, "(", translator.gettext('hidden'), ")");
  }

  return /*#__PURE__*/React.createElement(Link, {
    openLinksInNewTab: openLinksInNewTab,
    href: "/organization/".concat(value.id)
  }, value.name);
};

var getOrganizations = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(orgValue) {
    var _context;

    var organizations;
    return _regeneratorRuntime.wrap(function _callee$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return find(DataTypes.org, orgValue);

          case 2:
            organizations = _context2.sent;
            return _context2.abrupt("return", organizations === null || organizations === void 0 ? void 0 : map(_context = organizations.items).call(_context, function (_ref2) {
              var organization = _ref2.item;
              return {
                id: organization.id,
                name: organization.name,
                details: organization.address
              };
            }));

          case 4:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee);
  }));

  return function getOrganizations(_x) {
    return _ref.apply(this, arguments);
  };
}();

var _excluded$5 = ["disabled", "value", "error", "showNewLabel", "allowNewItem", "onBlur", "onValidation"];

function ownKeys$f(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$f(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$f(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$f(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Organization = function Organization(_ref) {
  var _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      value = _ref.value,
      error = _ref.error,
      _ref$showNewLabel = _ref.showNewLabel,
      showNewLabel = _ref$showNewLabel === void 0 ? false : _ref$showNewLabel,
      allowNewItem = _ref.allowNewItem,
      _ref$onBlur = _ref.onBlur,
      _onBlur = _ref$onBlur === void 0 ? noop : _ref$onBlur,
      onValidation = _ref.onValidation,
      restProps = _objectWithoutProperties(_ref, _excluded$5);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var renderOrgSuggestions = function renderOrgSuggestions(organizations) {
    return function (getItemProps, highlightedIndex, setHighlightedIndex, inputValue) {
      return /*#__PURE__*/React.createElement(EntitySuggestions, {
        inputValue: inputValue,
        contacts: organizations,
        highlightedIndex: highlightedIndex,
        setHighlightedIndex: setHighlightedIndex,
        getItemProps: getItemProps,
        type: "organization",
        allowNewItem: allowNewItem,
        texts: {
          tooltip: translator.gettext('Show organization details'),
          addNew: translator.gettext("Add '%s' as new organization", inputValue)
        }
      });
    };
  };

  var getSuggestionValue = function getSuggestionValue(suggestion) {
    if (typeof suggestion === 'string') {
      return suggestion;
    }

    return suggestion.name;
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var getIsOrgNew = function getIsOrgNew(orgValue) {
    if (isObject$d(orgValue)) {
      return !orgValue.id;
    }

    if (isString(orgValue)) {
      return true;
    }

    return false;
  };

  var getSuggestions = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchValue) {
      var organizations;
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return getOrganizations(searchValue);

            case 2:
              organizations = _context.sent;

              if (allowNewItem) {
                organizations.push(ADD_NEW_DUMMY_ITEM);
              }

              return _context.abrupt("return", organizations);

            case 5:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function getSuggestions(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/React.createElement(InputSelect, _objectSpread$f({
    inputProps: {
      onBlur: function onBlur(event) {
        event.persist();
        defer$1(function () {
          validate(event);

          _onBlur(event);
        });
      },
      icon: 'organization',
      message: error || validationError
    },
    getSuggestionValue: getSuggestionValue,
    getSuggestions: getSuggestions,
    renderSuggestions: renderOrgSuggestions,
    isNewValue: isString,
    dropdownTrigger: 2,
    allowNewItem: true,
    showNewLabel: showNewLabel || getIsOrgNew(value),
    value: value,
    disabled: disabled
  }, restProps));
};

var PercentageRead = function PercentageRead(_ref) {
  var value = _ref.value;

  if (!value) {
    return null;
  }

  return /*#__PURE__*/React.createElement(React.Fragment, null, "".concat(value || '', "%"));
};

var css_248z$d = ".ff_v4290__Percentage__percentage__1V0 input::-webkit-outer-spin-button, .ff_v4290__Percentage__percentage__1V0 input::-webkit-inner-spin-button{\n\t\t-webkit-appearance:none;\n\t\tmargin:0;\n\t}\n";
var styles$d = {
  "percentage": "ff_v4290__Percentage__percentage__1V0"
};
styleInject(css_248z$d);

function ownKeys$e(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$e(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$e(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$e(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var PercentageComponent = function PercentageComponent(_ref) {
  var value = _ref.value,
      defaultValue = _ref.defaultValue,
      disabled = _ref.disabled,
      onComponentChange = _ref.onComponentChange,
      inputProps = _ref.inputProps,
      error = _ref.error,
      placeholder = _ref.placeholder,
      onValidation = _ref.onValidation;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getPercentageValidation = _useValidation.getPercentageValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var onChange = function onChange(event) {
    if (onComponentChange) {
      onComponentChange(event.currentTarget.value);
    }
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getPercentageValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  return /*#__PURE__*/React.createElement("div", {
    className: classNames('ff_editMode', styles$d.percentage)
  }, /*#__PURE__*/React.createElement(Input, _objectSpread$e(_objectSpread$e({}, getValue$3({
    value: value,
    defaultValue: defaultValue,
    callback: toString$3
  })), {}, {
    message: error || validationError,
    disabled: disabled,
    color: error || validationError ? 'red' : undefined,
    type: "number",
    onChange: onChange,
    onBlur: validate,
    onMouseOut: validate,
    placeholder: placeholder
  }, inputProps)));
};

var PersonRead = function PersonRead(_ref) {
  var value = _ref.value,
      openLinksInNewTab = _ref.openLinksInNewTab;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  if (!value) {
    return null;
  }

  if (value.is_hidden) {
    return /*#__PURE__*/React.createElement("span", null, "(", translator.gettext('hidden'), ")");
  }

  return /*#__PURE__*/React.createElement(Link, {
    openLinksInNewTab: openLinksInNewTab,
    href: "/person/".concat(value.id)
  }, value.name);
};

var _excluded$4 = ["error", "value", "onComponentChange", "showNewLabel", "allowNewItem", "onBlur", "onValidation"];

function ownKeys$d(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$d(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$d(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$d(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Person = function Person(_ref) {
  var error = _ref.error,
      value = _ref.value,
      onComponentChange = _ref.onComponentChange,
      _ref$showNewLabel = _ref.showNewLabel,
      showNewLabel = _ref$showNewLabel === void 0 ? false : _ref$showNewLabel,
      allowNewItem = _ref.allowNewItem,
      _ref$onBlur = _ref.onBlur,
      _onBlur = _ref$onBlur === void 0 ? noop : _ref$onBlur,
      onValidation = _ref.onValidation,
      restProps = _objectWithoutProperties(_ref, _excluded$4);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var renderPersonSuggestions = function renderPersonSuggestions(persons) {
    return function (getItemProps, highlightedIndex, setHighlightedIndex, inputValue) {
      return /*#__PURE__*/React.createElement(EntitySuggestions, {
        inputValue: inputValue,
        contacts: persons,
        highlightedIndex: highlightedIndex,
        setHighlightedIndex: setHighlightedIndex,
        getItemProps: getItemProps,
        type: "person",
        allowNewItem: allowNewItem,
        texts: {
          tooltip: translator.gettext('Show contact details'),
          addNew: translator.pgettext('Text for adding new person button"', "Add '%s' as new contact", inputValue)
        }
      });
    };
  };

  var getSuggestionValue = function getSuggestionValue(entity) {
    if (typeof entity === 'string') {
      return entity;
    }

    if (entity.is_hidden) {
      return translator.gettext('(hidden)');
    }

    return entity.name;
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var getIsPersonNew = function getIsPersonNew(personValue) {
    if (isObject$d(personValue)) {
      return !personValue.id;
    }

    if (isString(personValue)) {
      return true;
    }

    return false;
  };

  var getSuggestions = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchValue) {
      var persons;
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return getPersons(searchValue);

            case 2:
              persons = _context.sent;

              if (allowNewItem) {
                persons.push(ADD_NEW_DUMMY_ITEM);
              }

              return _context.abrupt("return", persons);

            case 5:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function getSuggestions(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/React.createElement(InputSelect, _objectSpread$d({
    inputProps: {
      onBlur: function onBlur(event) {
        event.persist();
        defer$1(function () {
          validate(event);

          _onBlur(event);
        });
      },
      icon: 'person',
      message: error || validationError
    },
    getSuggestionValue: getSuggestionValue,
    getSuggestions: getSuggestions,
    renderSuggestions: renderPersonSuggestions,
    isNewValue: isString,
    dropdownTrigger: 2,
    allowNewItem: true,
    onComponentChange: onComponentChange,
    showNewLabel: showNewLabel || getIsPersonNew(value),
    value: value
  }, restProps));
};

var PhoneRead = function PhoneRead(_ref) {
  var value = _ref.value,
      settings = _ref.settings,
      caller = _ref.caller;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      _parseContext$locale = _parseContext.locale,
      locale = _parseContext$locale === void 0 ? '' : _parseContext$locale,
      phoneSettings = _parseContext.phoneSettings;

  if (!value) {
    return null;
  }

  var valueObj = typeof value === 'string' ? {
    value: value,
    label: null
  } : value;
  var format = settings && settings.format_phone_numbers_enabled;

  if (caller) {
    return /*#__PURE__*/React.createElement(Caller, {
      value: valueObj,
      settings: settings,
      format: format,
      locale: locale
    });
  }

  return /*#__PURE__*/React.createElement(Link, {
    href: createPhoneLink(valueObj.value, settings, phoneSettings)
  }, formatPhoneNumber(valueObj.value, locale, format));
};

function ownKeys$c(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$c(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$c(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$c(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Phone = function Phone(_ref) {
  var defaultValue = _ref.defaultValue,
      value = _ref.value,
      _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      onComponentChange = _ref.onComponentChange,
      inputProps = _ref.inputProps,
      error = _ref.error,
      placeholder = _ref.placeholder,
      onValidation = _ref.onValidation;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var onChange = function onChange(event) {
    if (onComponentChange) {
      onComponentChange(event.currentTarget.value);
    }
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  return /*#__PURE__*/React.createElement(Input, _objectSpread$c(_objectSpread$c({
    className: "ff_editMode"
  }, getValue$3({
    value: value,
    defaultValue: defaultValue
  })), {}, {
    onBlur: validate,
    onMouseOut: validate,
    message: error || validationError,
    color: error || validationError ? 'red' : undefined,
    disabled: disabled,
    onChange: onChange,
    placeholder: placeholder
  }, inputProps));
};

var css_248z$c = ".ff_v4290__Pipelines__select__3hr{\n\twidth:100%;\n}\n";
var styles$c = {
  "select": "ff_v4290__Pipelines__select__3hr"
};
styleInject(css_248z$c);

var Pipelines = function Pipelines(_ref) {
  var onComponentChange = _ref.onComponentChange,
      selectedId = _ref.selectedId;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      pipelines = _parseContext.pipelines;

  var onChange = function onChange(pipelineId) {
    onComponentChange(pipelineId);
  };

  return /*#__PURE__*/React.createElement(Select, {
    value: selectedId,
    onChange: onChange,
    className: styles$c.select,
    "data-test": "pipeline_id"
  }, pipelines === null || pipelines === void 0 ? void 0 : map(pipelines).call(pipelines, function (pipeline) {
    return /*#__PURE__*/React.createElement(Select.Option, {
      key: pipeline.id,
      value: pipeline.id,
      "data-test": "pipeline-option-".concat(pipeline.id)
    }, pipeline.name);
  }));
};

var css_248z$b = ".ff_v4290__PipelinesAndStages__label__3h1{\n\tmargin-bottom:4px;\n\tcolor:#747678;\n}\n.ff_v4290__PipelinesAndStages__noStagesMessage__3Vr{\n\twidth:100%;\n\theight:20px;\n\tpadding:4px;\n\tpadding-left:0;\n}\n.ff_v4290__PipelinesAndStages__noStagesErrorMessage__3CH{\n\tborder:1px solid #f94839;\n\tcolor:#f94839;\n\tpadding-left:4px;\n\tmargin-bottom:4px;\n}\n";
var styles$b = {
  "label": "ff_v4290__PipelinesAndStages__label__3h1",
  "noStagesMessage": "ff_v4290__PipelinesAndStages__noStagesMessage__3Vr",
  "noStagesErrorMessage": "ff_v4290__PipelinesAndStages__noStagesErrorMessage__3CH"
};
styleInject(css_248z$b);

var getFilteredStages = function getFilteredStages(stages, pipelineId) {
  return (stages === null || stages === void 0 ? void 0 : filter(stages).call(stages, function (stage) {
    return stage.pipeline_id === pipelineId;
  })) || [];
};

var PipelinesAndStages = function PipelinesAndStages(_ref) {
  var _context;

  var value = _ref.value,
      error = _ref.error,
      onComponentChange = _ref.onComponentChange;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      stages = _parseContext.stages,
      pipelines = _parseContext.pipelines;

  var _useState = useState({
    pipelineId: (value === null || value === void 0 ? void 0 : value.pipeline_id) || pipelines && pipelines[0].id || 0,
    stageId: (value === null || value === void 0 ? void 0 : value.stage_id) || stages && stages[0].id || 0
  }),
      _useState2 = _slicedToArray(_useState, 2),
      localState = _useState2[0],
      setLocalState = _useState2[1];

  var onChange = function onChange(pipelineId, stageId) {
    if (onComponentChange) {
      onComponentChange({
        pipeline_id: {
          key: 'pipeline_id',
          value: pipelineId,
          type: 'pipeline_id'
        },
        stage_id: {
          key: 'stage_id',
          value: stageId,
          type: 'stage_id'
        }
      });
    }
  };

  var onPipelineUpdate = function onPipelineUpdate(pipelineId) {
    var filteredStages = getFilteredStages(stages || [], pipelineId);
    var stageId = filteredStages.length > 0 ? filteredStages[0].id : 0;
    setLocalState({
      stageId: stageId,
      pipelineId: pipelineId
    });
    onChange(pipelineId, stageId);
  };

  var onStageUpdate = function onStageUpdate(stageId) {
    return function () {
      setLocalState({
        stageId: stageId,
        pipelineId: localState.pipelineId
      });
      onChange(localState.pipelineId, stageId);
    };
  };

  var stagesForPipeline = getFilteredStages(stages, localState.pipelineId);

  var errorClass = concat(_context = "".concat(styles$b.noStagesMessage, " ")).call(_context, error ? styles$b.noStagesErrorMessage : '');

  return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(Pipelines, {
    onComponentChange: onPipelineUpdate,
    selectedId: localState.pipelineId
  }), /*#__PURE__*/React.createElement(Spacing, {
    top: "s"
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$b.label
  }, translator.gettext('Pipeline stage')), stagesForPipeline.length > 0 ? /*#__PURE__*/React.createElement(StageSelector, {
    dealStageId: localState.stageId
  }, map(stagesForPipeline).call(stagesForPipeline, function (stage) {
    return (
      /*#__PURE__*/
      // @ts-expect-error TODO: check CUI requirements as `dealStageId` is required
      React.createElement(StageSelector.Stage, {
        key: stage.id,
        id: stage.id,
        tooltip: stage.name,
        onClick: onStageUpdate(stage.id)
      })
    );
  })) : /*#__PURE__*/React.createElement("div", {
    className: errorClass
  }, translator.gettext('This pipeline has no stages.')), error && /*#__PURE__*/React.createElement(Error$1, {
    message: error
  })));
};

var css_248z$a = ".ff_v4290__RadioGroup__wrapper__1pr{\n\tborder:none;\n}\n\n\t.ff_v4290__RadioGroup__wrapper__1pr legend{\n\t\tfont:400 15px/20px 'Source Sans Pro',sans-serif;\n\t\tpadding:0;\n\t\tmargin:0 0 4px;\n\t\tcolor:#26292c;\n\t}\n\n\t.ff_v4290__RadioGroup__wrapper__1pr label{\n\t\tmargin-right:8px;\n\t}\n";
var styles$a = {
  "wrapper": "ff_v4290__RadioGroup__wrapper__1pr"
};
styleInject(css_248z$a);

var RadioGroup = function RadioGroup(_ref) {
  var _context;

  var options = _ref.options,
      onComponentChange = _ref.onComponentChange,
      name = _ref.name,
      className = _ref.className,
      checkedValue = _ref.value,
      error = _ref.error,
      disabled = _ref.disabled,
      legend = _ref.legend;

  if (!options) {
    return null;
  }

  return /*#__PURE__*/React.createElement("fieldset", {
    className: concat(_context = "".concat(styles$a.wrapper, " ")).call(_context, className || '')
  }, legend && /*#__PURE__*/React.createElement("legend", null, legend), map(options).call(options, function (_ref2) {
    var label = _ref2.label,
        singleDisabledRadio = _ref2.disabled,
        value = _ref2.value;
    return /*#__PURE__*/React.createElement(Radio, {
      key: value,
      name: name,
      value: value,
      checked: value === checkedValue,
      disabled: disabled || singleDisabledRadio,
      onChange: onComponentChange
    }, label);
  }), /*#__PURE__*/React.createElement(Error$1, {
    message: error
  }));
};

var entryVirtual$2 = entryVirtual$e;

var values$2 = entryVirtual$2('Array').values;

var parent$2 = values$2;

var values$1 = parent$2;

var values = values$1;

var classof = classof$6;

var ArrayPrototype$1 = Array.prototype;
var DOMIterables = {
  DOMTokenList: true,
  NodeList: true
};

var values_1 = function (it) {
  var own = it.values;
  return it === ArrayPrototype$1 || it instanceof Array && own === ArrayPrototype$1.values // eslint-disable-next-line no-prototype-builtins -- safe
  || DOMIterables.hasOwnProperty(classof(it)) ? values : own;
};

var css_248z$9 = ".ff_v4290__CheckboxGroup__wrapper__cK0{\n\tborder:none;\n}\n\n\t.ff_v4290__CheckboxGroup__wrapper__cK0 legend{\n\t\tfont:400 15px/20px 'Source Sans Pro',sans-serif;\n\t\tpadding:0;\n\t\tmargin:0 0 4px;\n\t\tcolor:#26292c;\n\t}\n\n\t.ff_v4290__CheckboxGroup__wrapper__cK0 label{\n\t\tmargin-right:8px;\n\t}\n";
var styles$9 = {
  "wrapper": "ff_v4290__CheckboxGroup__wrapper__cK0"
};
styleInject(css_248z$9);

function CheckboxGroup(_ref) {
  var _context2;

  var options = _ref.options,
      onComponentChange = _ref.onComponentChange,
      className = _ref.className,
      error = _ref.error,
      _ref$values = values_1(_ref),
      values = _ref$values === void 0 ? [] : _ref$values,
      disabled = _ref.disabled,
      legend = _ref.legend;

  var onChange = function onChange(e) {
    var _context;

    var value = e.target.value;
    var newValues = includes(values).call(values, value) ? filter(values).call(values, function (v) {
      return v !== value;
    }) : concat(_context = []).call(_context, _toConsumableArray(values), [value]);
    onComponentChange(newValues);
  };

  if (!options) {
    return null;
  }

  return /*#__PURE__*/React.createElement("fieldset", {
    className: concat(_context2 = "".concat(styles$9.wrapper, " ")).call(_context2, className || '')
  }, legend && /*#__PURE__*/React.createElement("legend", null, legend), map(options).call(options, function (_ref2) {
    var label = _ref2.label,
        singleDisabledCheckbox = _ref2.disabled,
        value = _ref2.value,
        type = _ref2.type;
    return /*#__PURE__*/React.createElement(Checkbox, {
      key: label,
      disabled: disabled || singleDisabledCheckbox,
      value: value,
      checked: includes(values).call(values, value),
      type: type,
      onChange: onChange
    }, label);
  }), /*#__PURE__*/React.createElement(Error$1, {
    message: error
  }));
}

function isWordsAboveLimit(options, labelLetterLimit) {
  var isAboveLimit = false;
  var letterCounter = 0;

  for (var index in options) {
    if (options.hasOwnProperty(index)) {
      letterCounter += options[index].label.length;

      if (letterCounter > labelLetterLimit) {
        isAboveLimit = true;
        break;
      }
    }
  }

  return isAboveLimit;
}
var initValue = function initValue(value) {
  if (_typeof(value) === 'object') {
    return value;
  } else if (value) {
    if (!isNil(value) && !isNaN(+value)) {
      value = Number(value);
    }

    return {
      id: value
    };
  }
};
var getOptionsFromChildren = function getOptionsFromChildren(children) {
  var _context;

  return map(_context = React.Children).call(_context, children, function (child) {
    var _child$props = child.props,
        childrenComponent = _child$props.children,
        id = _child$props.id;
    return {
      id: id,
      label: childrenComponent
    };
  }) || [];
};
var getOptions = function getOptions(options, children) {
  var hasOptionsFromProps = !!options.length;

  if (hasOptionsFromProps) {
    return options;
  }

  if (children) {
    return getOptionsFromChildren(children);
  }

  return [];
};

var SingleOptionRead = function SingleOptionRead(_ref) {
  var value = _ref.value,
      options = _ref.options,
      fieldType = _ref.fieldType,
      fieldKey = _ref.fieldKey;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      fields = _parseContext.fields;

  var _useState = useState(function () {
    return initOptions(fields, options, fieldType, fieldKey);
  }),
      _useState2 = _slicedToArray(_useState, 1),
      optionsState = _useState2[0];

  var newValue = initValue(value);

  if (!newValue) {
    return null;
  }

  if (!(optionsState !== null && optionsState !== void 0 && optionsState.length)) {
    return /*#__PURE__*/React.createElement(React.Fragment, null, newValue.label);
  }

  var selectedOption = find$1(optionsState).call(optionsState, function (option) {
    return option.id === Number(newValue.id);
  });

  return /*#__PURE__*/React.createElement(React.Fragment, null, selectedOption && selectedOption.label);
};

var css_248z$8 = ".ff_v4290__SingleOption__wrapper__2z1{\n\twidth:100%;\n}\n.ff_v4290__SingleOption__error__2-J{\n\tborder:1px solid #f94839;\n\tborder-right:none;\n\tbox-shadow:none !important;\n}\n.ff_v4290__SingleOption__error__2-J:last-of-type{\n\t\tborder-right:1px solid #f94839;\n\t}\n.ff_v4290__SingleOption__error__2-J > span{\n\t\tbox-shadow:none;\n\t}\n.ff_v4290__SingleOption__button__2Uw span{\n\t\tpadding:0;\n\t\tcolor:rgba(38,41,44,.64);\n\t}\n.ff_v4290__SingleOption__button__2Uw span:last-child{\n\t\tpadding-right:0;\n\t}\n.ff_v4290__SingleOption__button__2Uw span:first-child{\n\t\tpadding-left:0;\n\t}\n";
var styles$8 = {
  "wrapper": "ff_v4290__SingleOption__wrapper__2z1",
  "error": "ff_v4290__SingleOption__error__2-J",
  "button": "ff_v4290__SingleOption__button__2Uw"
};
styleInject(css_248z$8);

function ownKeys$b(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$b(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$b(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$b(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var SingleOption = function SingleOption(_ref) {
  var value = _ref.value,
      _ref$options = _ref.options,
      options = _ref$options === void 0 ? [] : _ref$options,
      children = _ref.children,
      onComponentChange = _ref.onComponentChange,
      buttonGroupProps = _ref.buttonGroupProps,
      _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      portalTo = _ref.portalTo,
      _ref$threshold = _ref.threshold,
      threshold = _ref$threshold === void 0 ? 5 : _ref$threshold,
      _ref$placeholder = _ref.placeholder,
      placeholder = _ref$placeholder === void 0 ? ' ' : _ref$placeholder,
      _ref$labelLetterLimit = _ref.labelLetterLimit,
      labelLetterLimit = _ref$labelLetterLimit === void 0 ? 25 : _ref$labelLetterLimit,
      _ref$filter = filter(_ref),
      filter$1 = _ref$filter === void 0 ? false : _ref$filter,
      selectProps = _ref.selectProps,
      fieldType = _ref.fieldType,
      fieldKey = _ref.fieldKey,
      error = _ref.error,
      _ref$allowEmpty = _ref.allowEmpty,
      allowEmpty = _ref$allowEmpty === void 0 ? true : _ref$allowEmpty;

  var initialOption = {
    label: '(None)',
    id: 0
  };

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      fields = _parseContext.fields;

  var _useState = useState(initValue(value) || null),
      _useState2 = _slicedToArray(_useState, 2),
      valueState = _useState2[0],
      setValueState = _useState2[1];

  var _useState3 = useState(function () {
    return initOptions(fields, options, fieldType, fieldKey);
  }),
      _useState4 = _slicedToArray(_useState3, 2),
      optionsState = _useState4[0],
      setOptionsState = _useState4[1];

  var setOptions = function setOptions(singleOptions) {
    var _context;

    setOptionsState(allowEmpty ? concat(_context = [initialOption]).call(_context, _toConsumableArray(singleOptions)) : singleOptions);
  };

  useEffect(function () {
    setOptions(getOptions(options, children));
  }, []);
  useEffect(function () {
    setValueState(initValue(value) || null);
  }, [value]);

  var onChange = function onChange(item) {
    setValueState({
      id: item
    });
    onComponentChange(item);
  };

  var onButtonClick = function onButtonClick(item) {
    return function () {
      setValueState(item);
      onComponentChange(item.id);
    };
  };

  var renderButtonGroup = function renderButtonGroup() {
    var buttons = map(optionsState).call(optionsState, function (item, index) {
      var _context2;

      var id = item.id,
          label = item.label;
      var itemId = id || 0;
      var isActive = itemId === (valueState && valueState.id);

      var className = concat(_context2 = "".concat(styles$8.button, " ")).call(_context2, error ? styles$8.error : '');

      return /*#__PURE__*/React.createElement(Button, {
        key: index,
        active: isActive,
        onClick: onButtonClick(item),
        disabled: disabled,
        className: className
      }, label);
    });

    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(ButtonGroup, _objectSpread$b({}, buttonGroupProps), buttons), /*#__PURE__*/React.createElement(Error$1, {
      message: error
    }));
  };

  var renderSelectMenu = function renderSelectMenu() {
    var _context3;

    var selectOptions = map(optionsState).call(optionsState, function (item, index) {
      var id = item.id,
          label = item.label;
      return /*#__PURE__*/React.createElement(Select.Option, {
        key: index,
        value: id
      }, label);
    });

    var className = concat(_context3 = "".concat(styles$8.wrapper, " ")).call(_context3, error ? errorStyles.select : '');

    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Select, _objectSpread$b({
      filter: filter$1 || optionsState.length >= 5,
      filterPlaceholder: translator.gettext('Search'),
      popperProps: popperProps,
      portalTo: portalTo,
      onChange: onChange,
      placeholder: placeholder,
      className: className,
      disabled: disabled,
      value: (valueState === null || valueState === void 0 ? void 0 : valueState.id) || ''
    }, selectProps), selectOptions), /*#__PURE__*/React.createElement(Error$1, {
      message: error
    }));
  };

  var isButtonGroup = optionsState.length < threshold && !isWordsAboveLimit(optionsState, labelLetterLimit);

  if (isButtonGroup) {
    return renderButtonGroup();
  }

  return renderSelectMenu();
};

var TextAreaLineBreaker = function TextAreaLineBreaker(props) {
  var _props$value;

  var htmlBreakElement = /*#__PURE__*/React.createElement("br", null);
  var lines = (_props$value = props.value) === null || _props$value === void 0 ? void 0 : _props$value.split(/\r?\n/);
  var spanStyle = {
    display: 'block'
  };

  var handleLineBreak = map(lines).call(lines, function (line, index) {
    return /*#__PURE__*/React.createElement(Linkify, {
      key: index,
      properties: {
        target: '_blank'
      }
    }, /*#__PURE__*/React.createElement("span", {
      style: index === 1 ? spanStyle : undefined
    }, line, index < lines.length - 1 ? htmlBreakElement : null));
  });

  return /*#__PURE__*/React.createElement(React.Fragment, null, handleLineBreak);
};

var TextAreaRead = function TextAreaRead(_ref) {
  var value = _ref.value;

  if (!value) {
    return null;
  }

  return /*#__PURE__*/React.createElement(Linkify, {
    properties: {
      target: '_blank'
    }
  }, /*#__PURE__*/React.createElement(TextAreaLineBreaker, {
    value: value
  }));
};

function ownKeys$a(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$a(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$a(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$a(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var TextAreaComponent = function TextAreaComponent(_ref) {
  var defaultValue = _ref.defaultValue,
      value = _ref.value,
      _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      className = _ref.className,
      _ref$autofocus = _ref.autofocus,
      autofocus = _ref$autofocus === void 0 ? false : _ref$autofocus,
      onComponentChange = _ref.onComponentChange,
      error = _ref.error,
      placeholder = _ref.placeholder,
      textAreaProps = _ref.textAreaProps,
      onValidation = _ref.onValidation;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getTextAreaValidation = _useValidation.getTextAreaValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var onChange = function onChange(event) {
    if (onComponentChange) {
      onComponentChange(event.currentTarget.value);
    }
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getTextAreaValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var callback = function callback(val) {
    if (!val) {
      return '';
    }

    return val;
  };

  return /*#__PURE__*/React.createElement(Textarea, _objectSpread$a(_objectSpread$a({}, getValue$3({
    value: value,
    defaultValue: defaultValue,
    callback: callback
  })), {}, {
    autoFocus: autofocus,
    className: className,
    message: error || validationError,
    disabled: disabled,
    color: error || validationError ? 'red' : undefined,
    onBlur: validate,
    onMouseOut: validate,
    onChange: onChange,
    placeholder: placeholder
  }, textAreaProps));
};

var TextFieldRead = function TextFieldRead(_ref) {
  var value = _ref.value,
      _ref$linkify = _ref.linkify,
      linkify = _ref$linkify === void 0 ? true : _ref$linkify,
      onClick = _ref.onClick;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getEmailValidation = _useValidation.getEmailValidation;

  if (!value) {
    return null;
  }

  if (!linkify) {
    return value;
  } // if getEmailValidation returns undefined, then email is valid
  // otherwise it returns object with error message


  var isEmail = typeof getEmailValidation({
    value: value,
    translator: translator
  }) === 'undefined';

  if (isEmail) {
    return /*#__PURE__*/React.createElement(Link, {
      onClick: onClick,
      href: "mailto:".concat(value),
      value: value
    }, value);
  }

  return /*#__PURE__*/React.createElement(Linkify, {
    properties: {
      target: '_blank',
      rel: 'noopener noreferrer'
    }
  }, value);
};

function ownKeys$9(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$9(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$9(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$9(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var TextField = function TextField(_ref) {
  var value = _ref.value,
      autofocus = _ref.autofocus,
      actionIcon = _ref.actionIcon,
      disabled = _ref.disabled,
      placeholder = _ref.placeholder,
      onComponentChange = _ref.onComponentChange,
      inputProps = _ref.inputProps,
      defaultValue = _ref.defaultValue,
      error = _ref.error,
      onValidation = _ref.onValidation;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var onChange = function onChange(event) {
    var eventValue = event.currentTarget.value;

    if (onComponentChange) {
      onComponentChange(eventValue);
    }
  };

  var validate = function validate(event) {
    handleValidation({
      formValue: event,
      validate: getValidation
    });
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var parsedValue = isNull(value) ? '' : value;
  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Input, _objectSpread$9(_objectSpread$9({
    autoFocus: autofocus,
    className: "ff_editMode",
    type: "text"
  }, getValue$3({
    value: parsedValue,
    defaultValue: defaultValue
  })), {}, {
    onBlur: validate,
    onMouseOut: validate,
    onChange: onChange,
    message: error || validationError,
    color: error || validationError ? 'red' : undefined,
    disabled: disabled,
    placeholder: placeholder
  }, inputProps)), actionIcon);
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ISO_24H_TIME_FORMAT = 'HH:mm';

var TimeFormatter = /*#__PURE__*/function () {
  // format: string;
  function TimeFormatter(locale) {
    _classCallCheck(this, TimeFormatter);

    this.format = localeMomentFormat(locale, 'LT') || ISO_24H_TIME_FORMAT;
  }

  _createClass(TimeFormatter, [{
    key: "getFormat",
    value: function getFormat() {
      return this.format;
    }
  }, {
    key: "formatTime",
    value: function formatTime(selectedTime) {
      if (selectedTime) {
        var _this$formatMomentTim;

        return (_this$formatMomentTim = this.formatMomentTime(selectedTime)) === null || _this$formatMomentTim === void 0 ? void 0 : _this$formatMomentTim.format(this.format);
      }

      return null;
    }
  }, {
    key: "formatMomentTime",
    value: function formatMomentTime(selectedTime) {
      if (selectedTime) {
        return moment$1(selectedTime, this.format);
      }

      return null;
    }
  }]);

  return TimeFormatter;
}();

var TimePickerRead = function TimePickerRead(_ref) {
  var value = _ref.value;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale;

  if (!value) {
    return null;
  }

  var timeFormatter = new TimeFormatter(locale);
  return /*#__PURE__*/React.createElement(React.Fragment, null, timeFormatter.formatTime(value));
};

var css_248z$7 = ".ff_v4290__TimePicker__popper__hlr[data-placement^='bottom']{\n\t\tmargin-top:0;\n\t}\n\t.ff_v4290__TimePicker__popper__hlr[data-placement]{\n\t\tz-index:6001;\n\t}\n\t.ff_v4290__TimePicker__errorWrapper__1Tv{\n\tborder:1px solid;\n\tborder-color:#f94839 !important;\n}\n\t.ff_v4290__TimePicker__errorMsg__K-k{\n\tcolor:#f94839;\n\tmargin-top:4px;\n\tfont-size:13px;\n}\n\t.ff_v4290__TimePicker__input__9pn .react-datepicker-wrapper, .ff_v4290__TimePicker__input__9pn .react-datepicker__input-container{\n\t\t\twidth:100%;\n\t\t}\n\t.ff_v4290__TimePicker__input__9pn .react-datepicker-wrapper input:disabled, .ff_v4290__TimePicker__input__9pn .react-datepicker__input-container input:disabled{\n\t\t\t\tbackground-color:#f7f7f7;\n\t\t\t}\n\t.ff_v4290__TimePicker__input__9pn .react-datepicker__close-icon::after{\n\t\t\t\tcolor:#747678;\n\t\t\t\tbackground-color:transparent;\n\t\t\t\tfont-size:23px;\n\t\t\t\theight:auto;\n\t\t\t\twidth:auto;\n\t\t\t\ttop:3px;\n\t\t\t\tright:2px;\n\t\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker\\--time-only{\n\t\t\tborder:0 !important;\n\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__header{\n\t\t\theight:69px;\n\t\t\tbackground-color:#ffffff;\n\t\t\tborder:0;\n\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__header\\--time{\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__header\\--time-box{\n\t\t\t\t\twidth:100px;\n\t\t\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__triangle{\n\t\t\tdisplay:none;\n\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__time{\n\t\t\twidth:100px !important;\n\t\t\tborder-radius:0;\n\t\t\tborder:1px solid #b9babb;\n\t\t\tbox-shadow:0 5px 15px -5px #747678;\n\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__time-container{\n\t\t\t\tborder:0;\n\t\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__time-box{\n\t\t\t\tborder-radius:0;\n\t\t\t\twidth:100px !important;\n\t\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__time-list-item{\n\t\t\t\theight:auto !important;\n\t\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__time-list-item\\--selected{\n\t\t\t\t\tbackground-color:#317ae2 !important;\n\t\t\t\t}\n\t.ff_v4290__TimePicker__timepicker__98G .react-datepicker__time-list-item:hover{\n\t\t\t\t\tbackground-color:#317ae2 !important;\n\t\t\t\t\tcolor:#ffffff;\n\t\t\t\t}\n";
var styles$7 = {
  "popper": "ff_v4290__TimePicker__popper__hlr",
  "errorWrapper": "ff_v4290__TimePicker__errorWrapper__1Tv",
  "errorMsg": "ff_v4290__TimePicker__errorMsg__K-k",
  "input": "ff_v4290__TimePicker__input__9pn",
  "timepicker": "ff_v4290__TimePicker__timepicker__98G"
};
styleInject(css_248z$7);

var _excluded$3 = ["value", "portalTo", "onComponentChange", "onRawChange", "timeFormat", "startOpen", "timeIntervals", "error", "className", "placeholder", "allowClear"];

function ownKeys$8(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$8(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$8(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$8(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var TimePicker = function TimePicker(_ref) {
  var value = _ref.value,
      portalTo = _ref.portalTo,
      onComponentChange = _ref.onComponentChange,
      onRawChange = _ref.onRawChange,
      timeFormat = _ref.timeFormat,
      _ref$startOpen = _ref.startOpen,
      startOpen = _ref$startOpen === void 0 ? false : _ref$startOpen,
      _ref$timeIntervals = _ref.timeIntervals,
      timeIntervals = _ref$timeIntervals === void 0 ? 15 : _ref$timeIntervals,
      error = _ref.error,
      className = _ref.className,
      placeholder = _ref.placeholder,
      _ref$allowClear = _ref.allowClear,
      allowClear = _ref$allowClear === void 0 ? true : _ref$allowClear,
      rest = _objectWithoutProperties(_ref, _excluded$3);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale;

  var _useState = useState(),
      _useState2 = _slicedToArray(_useState, 2),
      startTime = _useState2[0],
      setTime = _useState2[1];

  var timeFormatter = new TimeFormatter(locale);
  var format = timeFormat || localeMomentFormat(locale, 'LT');

  var onSelectChange = function onSelectChange(selectedTime) {
    setTime(selectedTime);
    onRawChange === null || onRawChange === void 0 ? void 0 : onRawChange(selectedTime);
    onComponentChange(timeFormatter.formatTime(selectedTime));
  };

  useEffect(function () {
    setTime(timeFormatter.formatMomentTime(value));
  }, [value]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames(styles$7.input, className)
  }, /*#__PURE__*/React.createElement(Calendar, _objectSpread$8(_objectSpread$8({
    selected: startTime,
    popperClassName: classNames(styles$7.timepicker, styles$7.popper),
    onChange: onSelectChange,
    showTimeSelect: true,
    showTimeSelectOnly: true,
    timeIntervals: timeIntervals,
    dateFormat: format,
    timeFormat: format,
    startOpen: startOpen,
    className: classNames(error && styles$7.errorWrapper),
    placeholderText: placeholder || format,
    isClearable: allowClear
  }, renderPopperAttribute(portalTo)), rest)), /*#__PURE__*/React.createElement(Error$1, {
    message: typeof error === 'string' ? error : undefined
  }));
};

var getTimeReadValue = function getTimeReadValue(startTime, endTime) {
  var _context;

  var defaultValueIndicator = '...';
  return concat(_context = "".concat(startTime ? startTime : defaultValueIndicator, " - ")).call(_context, endTime ? endTime : defaultValueIndicator);
};

var TimeRangeRead = function TimeRangeRead(_ref) {
  var value = _ref.value;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale;

  if (!value) {
    return null;
  }

  var startTime = value.startTime,
      endTime = value.endTime;
  var timeFormatter = new TimeFormatter(locale);
  var formattedStartTime = timeFormatter.formatTime(startTime);
  var formattedEndTime = timeFormatter.formatTime(endTime);
  return /*#__PURE__*/React.createElement(React.Fragment, null, getTimeReadValue(formattedStartTime, formattedEndTime));
};

var _excluded$2 = ["placeholderTextStart", "placeholderTextEnd", "startOpen", "timeFormat", "value", "onComponentChange", "startTime", "endTime", "error", "className", "allowClear"];

function ownKeys$7(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$7(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$7(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$7(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var TimeRange = function TimeRange(_ref) {
  var placeholderTextStart = _ref.placeholderTextStart,
      placeholderTextEnd = _ref.placeholderTextEnd,
      _ref$startOpen = _ref.startOpen,
      startOpen = _ref$startOpen === void 0 ? false : _ref$startOpen,
      timeFormat = _ref.timeFormat,
      value = _ref.value,
      onComponentChange = _ref.onComponentChange;
      _ref.startTime;
      _ref.endTime;
      var error = _ref.error,
      className = _ref.className,
      allowClear = _ref.allowClear,
      rest = _objectWithoutProperties(_ref, _excluded$2);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      locale = _parseContext.locale;

  var _useState = useState(),
      _useState2 = _slicedToArray(_useState, 2),
      startTimeState = _useState2[0],
      setStartTime = _useState2[1];

  var _useState3 = useState(),
      _useState4 = _slicedToArray(_useState3, 2),
      endTimeState = _useState4[0],
      setEndTime = _useState4[1];

  var timeFormatter = new TimeFormatter(locale);
  useEffect(function () {
    setStartTime(timeFormatter.formatTime(value === null || value === void 0 ? void 0 : value.startTime));
    setEndTime(timeFormatter.formatTime(value === null || value === void 0 ? void 0 : value.endTime));
  }, [value]);

  var handleChangeStart = function handleChangeStart(newStartTime) {
    setStartTime(timeFormatter.formatTime(newStartTime));

    if (onComponentChange) {
      onComponentChange({
        startTime: newStartTime,
        endTime: endTimeState
      });
    }
  };

  var handleChangeEnd = function handleChangeEnd(newEndDate) {
    setEndTime(timeFormatter.formatTime(newEndDate));

    if (onComponentChange) {
      onComponentChange({
        startTime: startTimeState,
        endTime: newEndDate
      });
    }
  };

  return /*#__PURE__*/React.createElement("div", {
    className: classNames(className)
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$q.wrapper
  }, /*#__PURE__*/React.createElement(TimePicker, _objectSpread$7({
    selectsStart: true,
    placeholder: placeholderTextStart,
    startOpen: startOpen,
    timeFormat: timeFormat,
    value: startTimeState,
    onComponentChange: handleChangeStart,
    error: !!error,
    allowClear: allowClear
  }, omit(rest, ['onComponentChange']))), /*#__PURE__*/React.createElement("div", {
    className: styles$q.separator
  }, "-"), /*#__PURE__*/React.createElement(TimePicker, _objectSpread$7({
    selectsEnd: true,
    placeholder: placeholderTextEnd,
    timeFormat: timeFormat,
    value: endTimeState,
    disabled: !startTimeState,
    onComponentChange: handleChangeEnd,
    error: !!error,
    allowClear: allowClear
  }, omit(rest, ['onComponentChange'])))), /*#__PURE__*/React.createElement(Error$1, {
    message: error
  }));
};

var DefaultPhoneRead = function DefaultPhoneRead(_ref) {
  var value = _ref.value;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      formatter = _parseContext.formatter,
      currencies = _parseContext.currencies;

  if (!value) {
    return null;
  }

  var arrayValue = isArray$6(value) ? value : [value];
  return /*#__PURE__*/React.createElement("div", null, map(arrayValue).call(arrayValue, function (price, i) {
    var label = price.label,
        _price$value = price.value,
        labelValue = _price$value === void 0 ? '' : _price$value;
    var selected = find$4(currencies, {
      code: label
    });
    var code = currencies ? currencies[0].code : 'EUR';

    if (selected) {
      code = selected.code;
    }

    var formattedValue = formatter.format(labelValue, code);
    return /*#__PURE__*/React.createElement("div", {
      key: i,
      "data-testid": "read-label"
    }, formattedValue);
  }));
};

var disableCurrencies = function disableCurrencies() {
  var optionsProp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var valueProp = arguments.length > 1 ? arguments[1] : undefined;
  return map(optionsProp).call(optionsProp, function (currency) {
    currency.disabled = false;
    valueProp.forEach(function (option) {
      if ((option === null || option === void 0 ? void 0 : option.label) === currency.value) {
        currency.disabled = true;
      }
    });
    return currency;
  });
};

var _excluded$1 = ["onComponentChange", "single", "value"];

function ownKeys$6(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$6(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var UnitPrices = function UnitPrices(_ref) {
  var onComponentChange = _ref.onComponentChange,
      _ref$single = _ref.single,
      single = _ref$single === void 0 ? false : _ref$single,
      value = _ref.value,
      restProps = _objectWithoutProperties(_ref, _excluded$1);

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      _parseContext$currenc = _parseContext.currencies,
      currencies = _parseContext$currenc === void 0 ? [] : _parseContext$currenc,
      formatter = _parseContext.formatter,
      defaultCurrency = _parseContext.defaultCurrency;

  var _useValidation = useValidation(translator),
      getNumberValidation = _useValidation.getNumberValidation;

  var _useState = useState(value ? isArray$6(value) ? value : [value] : [{
    value: '',
    label: defaultCurrency
  }]),
      _useState2 = _slicedToArray(_useState, 1),
      valueState = _useState2[0];

  var initOptions = function initOptions() {
    return disableCurrencies(getMonetaryOptions(currencies), valueState);
  };

  var _useState3 = useState(initOptions()),
      _useState4 = _slicedToArray(_useState3, 2),
      options = _useState4[0],
      setOptions = _useState4[1];

  var disableAdd = options.every(function (option) {
    return option.disabled;
  });

  var validate = function validate(_ref2) {
    var propValue = _ref2.value,
        custom = _ref2.custom;
    return getNumberValidation({
      value: propValue,
      custom: custom,
      formatter: formatter,
      monetary: true,
      translator: translator
    });
  };

  var onChange = function onChange(propValue) {
    setOptions(disableCurrencies(options, propValue));

    var prices = map(propValue).call(propValue, function (price) {
      return {
        price: price.value,
        currency: price.label
      };
    });

    onComponentChange(prices);
  };

  return /*#__PURE__*/React.createElement(InputSelectAddMore, _objectSpread$6(_objectSpread$6({
    single: single,
    value: valueState,
    onComponentChange: onChange,
    validate: validate,
    disableAdd: disableAdd
  }, restProps), {}, {
    options: options
  }));
};

var UserRead = function UserRead(_ref) {
  var value = _ref.value,
      _ref$openLinksInNewTa = _ref.openLinksInNewTab,
      openLinksInNewTab = _ref$openLinksInNewTa === void 0 ? false : _ref$openLinksInNewTa;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      users = _parseContext.users;

  if (!value || !users) {
    return null;
  }

  var userValue = findUserById(value, users);

  if (!userValue) {
    return null;
  }

  if (userValue.is_hidden) {
    return /*#__PURE__*/React.createElement("span", null, "(", translator.gettext('hidden'), ")");
  }

  return /*#__PURE__*/React.createElement(Link, {
    openLinksInNewTab: openLinksInNewTab,
    href: "/users/details/".concat(userValue.id)
  }, userValue.name);
};

var css_248z$6 = ".ff_v4290__User__user__1u1{\n\twidth:100%;\n}\n\n.ff_v4290__User__selectPopup__11D{\n\tz-index:6001;\n}\n";
var styles$6 = {
  "user": "ff_v4290__User__user__1u1",
  "selectPopup": "ff_v4290__User__selectPopup__11D"
};
styleInject(css_248z$6);

var getUser = function getUser(user) {
  var _user$attributes, _user$attributes2, _user$attributes3;

  return {
    id: user.id || ((_user$attributes = user.attributes) === null || _user$attributes === void 0 ? void 0 : _user$attributes.id),
    name: user.name || ((_user$attributes2 = user.attributes) === null || _user$attributes2 === void 0 ? void 0 : _user$attributes2.name),
    isYou: user.is_you || ((_user$attributes3 = user.attributes) === null || _user$attributes3 === void 0 ? void 0 : _user$attributes3.is_you)
  };
};
var getIsUserOwner = function getIsUserOwner(isOwner, usersCollection) {
  var _usersCollection$find;

  if (!isOwner) {
    return false;
  }

  return usersCollection === null || usersCollection === void 0 ? void 0 : (_usersCollection$find = find$1(usersCollection).call(usersCollection, function (user) {
    return getUser(user).isYou;
  })) === null || _usersCollection$find === void 0 ? void 0 : _usersCollection$find.id;
};
var getDefaultHighlightedIndex = function getDefaultHighlightedIndex(children, usersCollection, value, isUserOwner) {
  var initialValue = value || isUserOwner;

  if (!initialValue) {
    return 0;
  }

  if (children) {
    return findIndex(React.Children.toArray(children), function (child) {
      return child.props.value === initialValue;
    });
  }

  if (usersCollection) {
    return findIndex(usersCollection, function (user) {
      return user.id === initialValue;
    });
  }

  return 0;
};

function ownKeys$5(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$5(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var User = function User(_ref) {
  var _context;

  var _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      portalTo = _ref.portalTo,
      _ref$filter = filter(_ref),
      filter$1 = _ref$filter === void 0 ? true : _ref$filter,
      _ref$placeholder = _ref.placeholder,
      placeholder = _ref$placeholder === void 0 ? ' ' : _ref$placeholder,
      onComponentChange = _ref.onComponentChange,
      children = _ref.children,
      _ref$isOwner = _ref.isOwner,
      isOwner = _ref$isOwner === void 0 ? false : _ref$isOwner,
      _ref$allowClear = _ref.allowClear,
      allowClear = _ref$allowClear === void 0 ? true : _ref$allowClear,
      defaultValue = _ref.defaultValue,
      value = _ref.value,
      selectProps = _ref.selectProps,
      users = _ref.users,
      error = _ref.error;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator,
      usersFromContext = _parseContext.users;

  var usersCollection = users || usersFromContext;

  var onChange = function onChange(id) {
    var user = id ? findUserById(id, usersCollection || []) : null;
    onComponentChange(user);
  };

  var isUserOwner = useMemo(function () {
    return getIsUserOwner(isOwner, usersCollection);
  }, [usersCollection]);

  var renderUsers = function renderUsers() {
    if (children) {
      return children;
    }

    if (!usersCollection) {
      return null;
    }

    return map(usersCollection).call(usersCollection, function (user) {
      var userData = getUser(user);
      return /*#__PURE__*/React.createElement(Select.Option, {
        key: user.id,
        value: user.id,
        itemToString: stringifyUserName(userData.name)
      }, /*#__PURE__*/React.createElement("div", null, userData.name, " ", userData.isYou ? translator.gettext('(You)') : null));
    });
  };

  var className = concat(_context = "".concat(styles$6.user, " ")).call(_context, error ? errorStyles.select : '');

  var userValue = getValue$3({
    value: isObject$d(value) ? value.id : value,
    defaultValue: isObject$d(defaultValue) ? defaultValue.id : defaultValue,
    callback: function callback(val) {
      return val || isUserOwner;
    },
    defaultReturn: {
      defaultValue: isUserOwner || ''
    }
  });
  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Select, _objectSpread$5(_objectSpread$5({}, userValue), {}, {
    popperProps: popperProps,
    portalTo: portalTo,
    // @ts-expect-error TODO: Validate CUI types
    onChange: onChange,
    disabled: disabled,
    allowClear: allowClear,
    placeholder: placeholder,
    popupClassName: styles$6.selectPopup,
    filter: filter$1,
    className: className,
    downShiftProps: {
      defaultHighlightedIndex: getDefaultHighlightedIndex(children, usersCollection, (userValue === null || userValue === void 0 ? void 0 : userValue.value) || (userValue === null || userValue === void 0 ? void 0 : userValue.defaultValue), isUserOwner)
    }
  }, selectProps), renderUsers()), /*#__PURE__*/React.createElement(Error$1, {
    message: error
  }));
};

var getRoles = function getRoles(advancedPermissions, translator) {
  if (advancedPermissions) {
    return {
      1: {
        title: translator.gettext('Owner only'),
        squares: 1,
        subTitle: translator.gettext('Only the owner, admins and users in the parent groups can see and edit the details')
      },
      3: {
        title: translator.gettext("Owner's visibility group"),
        squares: 2,
        subTitle: translator.gettext('Users in the same visibility group, admins and users in the parent groups can see and edit the details')
      },
      5: {
        title: translator.gettext("Owner's group, and sub-groups"),
        squares: 3,
        subTitle: translator.gettext('Users in the same visibility group, sub-groups, admins and users in the parent groups can see and edit details')
      },
      7: {
        title: translator.gettext('Entire company'),
        squares: 4,
        subTitle: translator.gettext('All users in the company can see and edit the details')
      }
    };
  }

  return {
    1: {
      title: translator.gettext('Owner & followers'),
      squares: 2,
      subTitle: translator.gettext('Only the owner & followers can see and edit the details')
    },
    3: {
      title: translator.gettext('Entire company'),
      squares: 4,
      subTitle: translator.gettext('All users in the company can see and edit the details')
    }
  };
};

var VisibilitySwitchRead = function VisibilitySwitchRead(_ref) {
  var value = _ref.value,
      _ref$advancedPermissi = _ref.advancedPermissions,
      advancedPermissions = _ref$advancedPermissi === void 0 ? false : _ref$advancedPermissi;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  if (!value) {
    return null;
  }

  var roles = getRoles(advancedPermissions, translator);
  var role = roles[value] ? roles[value].title : '';
  return /*#__PURE__*/React.createElement(React.Fragment, null, role);
};

var css_248z$5 = ".ff_v4290__VisibilityIcon__title__2UT{\n\tfont-weight:bold;\n}\n.ff_v4290__VisibilityIcon__svg__3nk{\n\twidth:14px;\n\tmin-width:14px;\n\theight:14px;\n\tmin-height:14px;\n}\n.ff_v4290__VisibilityIcon__fill__3Fd{\n\tfill:rgb(47, 108, 197);\n}\n.ff_v4290__VisibilityIcon__empty__32_{\n\tfill:rgba(38, 41, 44, .24);\n}\n";
var styles$5 = {
  "title": "ff_v4290__VisibilityIcon__title__2UT",
  "svg": "ff_v4290__VisibilityIcon__svg__3nk",
  "fill": "ff_v4290__VisibilityIcon__fill__3Fd",
  "empty": "ff_v4290__VisibilityIcon__empty__32_"
};
styleInject(css_248z$5);

var toObject = toObject$a;

var toAbsoluteIndex = toAbsoluteIndex$4;

var toLength$1 = toLength$c; // `Array.prototype.fill` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.fill


var arrayFill = function fill(value
/* , start = 0, end = @length */
) {
  var O = toObject(this);
  var length = toLength$1(O.length);
  var argumentsLength = arguments.length;
  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);
  var end = argumentsLength > 2 ? arguments[2] : undefined;
  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);

  while (endPos > index) O[index++] = value;

  return O;
};

var $$1 = _export;

var fill$3 = arrayFill;
// https://tc39.es/ecma262/#sec-array.prototype.fill


$$1({
  target: 'Array',
  proto: true
}, {
  fill: fill$3
}); // https://tc39.es/ecma262/#sec-array.prototype-@@unscopables

var entryVirtual$1 = entryVirtual$e;

var fill$2 = entryVirtual$1('Array').fill;

var fill$1 = fill$2;

var ArrayPrototype = Array.prototype;

var fill_1 = function (it) {
  var own = it.fill;
  return it === ArrayPrototype || it instanceof Array && own === ArrayPrototype.fill ? fill$1 : own;
};

var parent$1 = fill_1;

var fill = parent$1;

var iconClassName = function iconClassName(fill$1) {
  if (fill$1 > 0) {
    return "".concat(fill(styles$5), " vg__icon--fill");
  }

  return "".concat(styles$5.empty, " vg__icon--empty");
};

var VisibilityIcon = function VisibilityIcon(_ref) {
  var className = _ref.className,
      _ref$filledSquare = _ref.filledSquare,
      filledSquare = _ref$filledSquare === void 0 ? 0 : _ref$filledSquare,
      _ref$w = _ref.w,
      w = _ref$w === void 0 ? 2 : _ref$w,
      _ref$h = _ref.h,
      h = _ref$h === void 0 ? 2 : _ref$h;
  var rectangles = [];
  var squareSize = 8;
  var fill = filledSquare;

  for (var i = 0; i < w; i = i + 1) {
    for (var j = 0; j < h; j = j + 1) {
      rectangles.push( /*#__PURE__*/React.createElement("rect", {
        key: rectangles.length,
        width: "6",
        height: "6",
        id: "Rectangle",
        y: i * squareSize,
        x: j * squareSize,
        className: iconClassName(fill)
      }));
      fill = fill - 1;
    }
  }

  return /*#__PURE__*/React.createElement("svg", {
    className: classNames(className, styles$5.svg)
  }, /*#__PURE__*/React.createElement("g", {
    id: "vg_icons"
  }, rectangles));
};

var css_248z$4 = ".ff_v4290__VisibilityOptions__title__3IN:hover{\n\t\tcolor:#ffffff;\n\t}\n.ff_v4290__VisibilityOptions__selected__1xF{\n\tfont-weight:600;\n}\n.ff_v4290__VisibilityOptions__subTitle__1Nw{\n\tfont-size:13px;\n\tcolor:#747678;\n}\n.ff_v4290__VisibilityOptions__option__1Z4{\n\tcursor:pointer;\n\tdisplay:flex;\n}\n.ff_v4290__VisibilityOptions__option__1Z4:hover .ff_v4290__VisibilityOptions__title__3IN, .ff_v4290__VisibilityOptions__option__1Z4:hover .ff_v4290__VisibilityOptions__subTitle__1Nw{\n\t\t\tcolor:#ffffff;\n\t\t}\n.ff_v4290__VisibilityOptions__option__1Z4:hover .vg__icon--fill{\n\t\t\tfill:rgb(255, 255, 255) !important;\n\t\t}\n.ff_v4290__VisibilityOptions__option__1Z4:hover .vg__icon--empty{\n\t\t\tfill:rgba(38, 41, 44, .32);\n\t\t}\n.ff_v4290__VisibilityOptions__textWrap__2s8{\n\tdisplay:flex;\n\tflex-direction:column;\n\tpadding-left:12px;\n\ttext-align:left;\n}\n.ff_v4290__VisibilityOptions__icon__2PQ{\n\tdisplay:flex;\n\tpadding-top:4px;\n}\n";
var styles$4 = {
  "title": "ff_v4290__VisibilityOptions__title__3IN",
  "selected": "ff_v4290__VisibilityOptions__selected__1xF",
  "subTitle": "ff_v4290__VisibilityOptions__subTitle__1Nw",
  "option": "ff_v4290__VisibilityOptions__option__1Z4",
  "textWrap": "ff_v4290__VisibilityOptions__textWrap__2s8",
  "icon": "ff_v4290__VisibilityOptions__icon__2PQ"
};
styleInject(css_248z$4);

var VisibilityOptions = function VisibilityOptions(_ref) {
  var _context;

  var roles = _ref.roles,
      selectedVisibility = _ref.selectedVisibility,
      handleChange = _ref.handleChange,
      children = _ref.children;

  var onClickHandler = function onClickHandler(role) {
    return function () {
      return handleChange(Number(role));
    };
  };

  return /*#__PURE__*/React.createElement("div", null, map(_context = keys$1(roles)).call(_context, function (role) {
    var _classNames;

    var isSelected = selectedVisibility === Number(role);
    return /*#__PURE__*/React.createElement(Option, {
      key: role,
      className: styles$4.option,
      onClick: onClickHandler(role),
      selected: isSelected
    }, children && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
      className: styles$4.icon
    }, /*#__PURE__*/React.cloneElement(children, {
      filledSquare: roles[Number(role)].squares
    })), /*#__PURE__*/React.createElement("div", {
      className: "".concat(styles$4.textWrap, " cui4-text")
    }, /*#__PURE__*/React.createElement("div", {
      className: classNames((_classNames = {}, _defineProperty(_classNames, styles$4.title, true), _defineProperty(_classNames, styles$4.selected, isSelected), _classNames))
    }, roles[Number(role)].title), /*#__PURE__*/React.createElement("span", {
      className: "".concat(styles$4.subTitle, " vs__subtext")
    }, roles[Number(role)].subTitle))));
  }));
};

var css_248z$3 = ".ff_v4290__VisibilitySwitch__select__2r7{\n\twidth:100%;\n\talign-items:center;\n\tpadding-left:10px;\n}\n.ff_v4290__VisibilitySwitch__select__2r7 span{\n\t\ttext-align:left;\n\t\tfont-weight:400;\n\t}\n.ff_v4290__VisibilitySwitch__icon__1TH{\n\tpadding-right:8px;\n}\n";
var styles$3 = {
  "select": "ff_v4290__VisibilitySwitch__select__2r7",
  "icon": "ff_v4290__VisibilitySwitch__icon__1TH"
};
styleInject(css_248z$3);

function ownKeys$4(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$4(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var VisibilitySwitchComponent = function VisibilitySwitchComponent(_ref) {
  var _ref$advancedPermissi = _ref.advancedPermissions,
      advancedPermissions = _ref$advancedPermissi === void 0 ? false : _ref$advancedPermissi,
      _ref$disabled = _ref.disabled,
      disabled = _ref$disabled === void 0 ? false : _ref$disabled,
      _ref$portalTo = _ref.portalTo,
      portalTo = _ref$portalTo === void 0 ? function () {
    return window.document.body;
  } : _ref$portalTo,
      _ref$popperProps = _ref.popperProps,
      popperProps = _ref$popperProps === void 0 ? {} : _ref$popperProps,
      _ref$value = _ref.value,
      value = _ref$value === void 0 ? 1 : _ref$value,
      onComponentChange = _ref.onComponentChange,
      _ref$placement = _ref.placement,
      placement = _ref$placement === void 0 ? 'bottom' : _ref$placement,
      className = _ref.className,
      _ref$style = _ref.style,
      style = _ref$style === void 0 ? {} : _ref$style,
      children = _ref.children;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useState = useState(value),
      _useState2 = _slicedToArray(_useState, 2),
      selectedVisibilityState = _useState2[0],
      setSelectedVisibility = _useState2[1];

  useEffect(function () {
    setSelectedVisibility(value);
  }, [value]);

  var handleVisibilityChange = function handleVisibilityChange(selectedVisibility) {
    setSelectedVisibility(selectedVisibility);
    onComponentChange(selectedVisibility);
  };

  var roles = getRoles(advancedPermissions, translator);
  var currentRole = roles[selectedVisibilityState] || roles[1];
  return /*#__PURE__*/React.createElement(Dropmenu, {
    className: className,
    closeOnClick: true,
    style: _objectSpread$4({
      width: 350
    }, style),
    popoverProps: {
      placement: placement,
      portalTo: portalTo,
      popperProps: popperProps
    },
    content: /*#__PURE__*/React.createElement(VisibilityOptions, {
      roles: roles,
      selectedVisibility: selectedVisibilityState,
      handleChange: handleVisibilityChange,
      advancedPermissions: advancedPermissions
    }, /*#__PURE__*/React.createElement(VisibilityIcon, {
      className: styles$3.icon
    }))
  }, isFunction(children) ? children(currentRole) : children || /*#__PURE__*/React.createElement(Button, {
    className: styles$3.select,
    disabled: disabled
  }, /*#__PURE__*/React.createElement(VisibilityIcon, {
    className: styles$3.icon,
    filledSquare: currentRole.squares
  }), currentRole.title, /*#__PURE__*/React.createElement(Icon, {
    size: "s",
    icon: "triangle-down"
  })));
};
var VisibilitySwitch = VisibilitySwitchComponent;
VisibilitySwitch.Icon = VisibilityIcon;

var css_248z$2 = ".ff_v4290__ActionFooter__footerWrapper__2mX{\n\tmargin-top:8px;\n\talign-self:flex-end;\n}\n\n\t.ff_v4290__ActionFooter__footerWrapper__2mX .ff_v4290__ActionFooter__saveButton__2Ix{\n\t\tmargin-left:4px;\n\t}\n";
var styles$2 = {
  "footerWrapper": "ff_v4290__ActionFooter__footerWrapper__2mX",
  "saveButton": "ff_v4290__ActionFooter__saveButton__2Ix"
};
styleInject(css_248z$2);

/**
 * Provides a simple component with "Cancel" and "Save" buttons.
 *
 * @param {ActionFooterProps} props - Props for ActionFooter
 * @returns {React.ReactElement<ActionFooterProps>} ActionFooter component
 */

var ActionFooter = function ActionFooter(_ref) {
  var isLoading = _ref.isLoading,
      onSave = _ref.onSave,
      onCancel = _ref.onCancel,
      saveDisabled = _ref.saveDisabled;

  var _useContext = useContext(FormFieldsContext),
      translator = _useContext.translator;

  return /*#__PURE__*/React.createElement("footer", {
    className: "".concat(styles$2.footerWrapper, " ff_footer")
  }, /*#__PURE__*/React.createElement(Button, {
    size: "s",
    onClick: onCancel,
    disabled: isLoading
  }, translator.gettext('Cancel')), /*#__PURE__*/React.createElement(Button, {
    className: styles$2.saveButton,
    size: "s",
    color: "green",
    onClick: onSave,
    loading: isLoading,
    disabled: saveDisabled
  }, translator.gettext('Save')));
};

var css_248z$1 = ".ff_v4290__ComponentState__wrapperAdd__1hg .ff_v4290__ComponentState__addValue__1BG{\n\tfont:600 15px/20px 'Source Sans Pro', sans-serif;\n\tcolor:#317ae2;\n\ttext-decoration:none;\n}\n.ff_v4290__ComponentState__wrapperEdit__2hf{\n\tposition:relative;\n\tdisplay:flex;\n\talign-items:center;\n\twidth:100%;\n\tjustify-content:space-between;\n}\n.ff_v4290__ComponentState__wrapperEdit__2hf .ff_v4290__ComponentState__edit__30n{\n\t\tvisibility:hidden;\n\t}\n.ff_v4290__ComponentState__wrapperEdit__2hf .ff_v4290__ComponentState__cuiText__2C2{\n\t\twidth:100%;\n\t}\n.ff_v4290__ComponentState__wrapperEdit__2hf .ff_v4290__ComponentState__addValue__1BG{\n\t\tvisibility:hidden;\n\t\twidth:100%;\n\t\tdisplay:inline-block;\n\t}\n.ff_v4290__ComponentState__wrapperEdit__2hf .ff_v4290__ComponentState__valueText__13q{\n\t\tword-break:break-word;\n\t}\n.ff_v4290__ComponentState__wrapperEdit__2hf .ff_v4290__ComponentState__showValue__W4L{\n\t\twidth:100%;\n\t\tmargin-right:8px;\n\t}\n.ff_v4290__ComponentState__wrapperEdit__2hf:hover .ff_v4290__ComponentState__edit__30n{\n\t\t\tvisibility:visible;\n\t\t}\n.ff_v4290__ComponentState__wrapperEdit__2hf:hover .ff_v4290__ComponentState__icon__e8A{\n\t\t\tvisibility:hidden;\n\t\t}\n.ff_v4290__ComponentState__wrapperAdd__1hg{\n\tdisplay:flex;\n\talign-items:baseline;\n}\n.ff_v4290__ComponentState__wrapperAdd__1hg .ff_v4290__ComponentState__addValue__1BG{\n\t\tvisibility:hidden;\n\t\tcursor:pointer;\n\t}\n.ff_v4290__ComponentState__wrapperAdd__1hg .ff_v4290__ComponentState__placeholder__5aG{\n\t\tposition:absolute;\n\t\tcolor:#b9babb;\n\t}\n.ff_v4290__ComponentState__wrapperAdd__1hg:hover .ff_v4290__ComponentState__addValue__1BG{\n\t\t\tvisibility:visible;\n\t\t}\n.ff_v4290__ComponentState__wrapperAdd__1hg:hover .ff_v4290__ComponentState__placeholder__5aG{\n\t\t\tvisibility:hidden;\n\t\t}\n.ff_v4290__ComponentState__wrapperAdd__1hg:hover .ff_v4290__ComponentState__showValue__W4L{\n\t\t\tdisplay:none;\n\t\t}\n";
var styles$1 = {
  "wrapperEdit": "ff_v4290__ComponentState__wrapperEdit__2hf",
  "edit": "ff_v4290__ComponentState__edit__30n",
  "cuiText": "ff_v4290__ComponentState__cuiText__2C2",
  "addValue": "ff_v4290__ComponentState__addValue__1BG",
  "valueText": "ff_v4290__ComponentState__valueText__13q",
  "showValue": "ff_v4290__ComponentState__showValue__W4L",
  "icon": "ff_v4290__ComponentState__icon__e8A",
  "wrapperAdd": "ff_v4290__ComponentState__wrapperAdd__1hg",
  "placeholder": "ff_v4290__ComponentState__placeholder__5aG"
};
styleInject(css_248z$1);

var AddButton = function AddButton(_ref) {
  var onClick = _ref.onClick,
      placeholder = _ref.placeholder;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  return /*#__PURE__*/React.createElement("div", {
    className: styles$1.wrapperAdd
  }, /*#__PURE__*/React.createElement(Text, {
    className: styles$1.cuiText
  }, placeholder && /*#__PURE__*/React.createElement("span", {
    className: "".concat(styles$1.placeholder, " ff__placeholder")
  }, placeholder), /*#__PURE__*/React.createElement("span", {
    className: "".concat(styles$1.addValue, " ff__addValue"),
    onClick: onClick
  }, "+  ".concat(translator.gettext('Add value')))));
};
var WithEditButton = function WithEditButton(props) {
  return /*#__PURE__*/React.createElement("div", {
    className: "".concat(styles$1.wrapperEdit, " ff__edit")
  }, /*#__PURE__*/React.createElement(Text, {
    className: styles$1.showValue
  }, /*#__PURE__*/React.createElement("span", {
    className: styles$1.valueText
  }, props.children)), /*#__PURE__*/React.createElement("div", {
    className: styles$1.edit
  }, /*#__PURE__*/React.createElement(Button, {
    size: "s",
    onClick: props.onClick
  }, /*#__PURE__*/React.createElement(Icon, {
    icon: "pencil",
    size: "s"
  }))));
};

var isEnumFieldValueNone = function isEnumFieldValueNone(fieldValue) {
  return fieldValue === 0;
};

var format = function format(value, formatter, currency) {
  if (formatter) {
    if (currency) {
      return formatter.format(value, currency);
    }

    return formatter.formatNumber(toString$3(value));
  }

  return value;
}; // tslint:disable-next-line: cyclomatic-complexity
// eslint-disable-next-line complexity


function useDataMapping(fieldKey, value, fieldType, formatter) {
  var _returnValue11, _returnValue12;

  if (value === null) {
    return _defineProperty({}, fieldKey, value);
  }

  var returnValue;

  switch (fieldType) {
    case 'set':
      returnValue = _defineProperty({}, fieldKey, map(value).call(value, function (val) {
        return (val === null || val === void 0 ? void 0 : val.id) || val;
      }));
      break;

    case 'monetary':
      if (fieldKey === 'value') {
        returnValue = {
          value: format(value.value, formatter, value.label),
          currency: value.label
        };
      } else {
        var _returnValue2;

        returnValue = (_returnValue2 = {}, _defineProperty(_returnValue2, fieldKey, format(value.value, formatter, value.label)), _defineProperty(_returnValue2, "".concat(fieldKey, "_currency"), value.label), _returnValue2);
      }

      break;

    case 'user':
    case 'person':
    case 'organization':
    case 'org_id':
    case 'person_id':
    case 'owner_id':
    case 'owner':
    case 'deal':
      returnValue = _defineProperty({}, fieldKey, value.id || value);
      break;

    case 'address':
      if (value.description) {
        var _value$geocoded, _returnValue4;

        returnValue = (_returnValue4 = {}, _defineProperty(_returnValue4, fieldKey, value.description), _defineProperty(_returnValue4, "".concat(fieldKey, "_geocoded"), (_value$geocoded = value.geocoded) === null || _value$geocoded === void 0 ? void 0 : _value$geocoded[0]), _returnValue4);
      } else {
        returnValue = _defineProperty({}, fieldKey, value);
      }

      break;

    case 'default_phone':
    case 'email':
      returnValue = _defineProperty({}, fieldKey, value.reduce(function (arr, email, i) {
        arr.push({
          label: email.label,
          value: email.value,
          primary: i === 0
        });
        return arr;
      }, []));
      break;

    case 'enum':
      if (fieldKey === 'label') {
        returnValue = _defineProperty({}, fieldKey, value.id);
        break;
      } else if (isEnumFieldValueNone(value)) {
        returnValue = _defineProperty({}, fieldKey, '');
        break;
      } else {
        returnValue = _defineProperty({}, fieldKey, value);
      }

      break;

    case 'label':
      returnValue = _defineProperty({}, fieldKey, value.id);
      break;

    case 'timerange':
      returnValue = (_returnValue11 = {}, _defineProperty(_returnValue11, fieldKey, value.startTime), _defineProperty(_returnValue11, "".concat(fieldKey, "_until"), value.endTime), _returnValue11);
      break;

    case 'daterange':
      returnValue = (_returnValue12 = {}, _defineProperty(_returnValue12, fieldKey, value.startDate), _defineProperty(_returnValue12, "".concat(fieldKey, "_until"), value.endDate), _returnValue12);
      break;

    case 'multiple_contacts':
      returnValue = _defineProperty({}, fieldKey, value.reduce(function (arr, contact, i) {
        arr.push(contact.id);
        return arr;
      }, []));
      break;

    case 'int':
    case 'double':
      returnValue = _defineProperty({}, fieldKey, format(value, formatter));
      break;

    case 'varchar_auto':
      if (isObject$d(value)) {
        returnValue = _defineProperty({}, fieldKey, value[fieldKey]);
      } else {
        returnValue = _defineProperty({}, fieldKey, value);
      }

      break;

    default:
      returnValue = _defineProperty({}, fieldKey, value);
      break;
  }

  return returnValue;
}

function ownKeys$3(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }

var Owner = function Owner(props) {
  return /*#__PURE__*/React.createElement(User, _objectSpread$3({
    isOwner: true
  }, props));
};

var CategorySelectRead = function CategorySelectRead(_ref) {
  var value = _ref.value;
  return /*#__PURE__*/React.createElement(React.Fragment, null, value ? value.label : '');
};

var CategoryDialog = function CategoryDialog(_ref) {
  var action = _ref.action;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      visible = _useState2[0],
      setVisible = _useState2[1];

  var openDialog = function openDialog() {
    return setVisible(true);
  };

  var closeDialog = function closeDialog() {
    return setVisible(false);
  };

  var onConfirm = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return action();

            case 2:
              closeDialog();

            case 3:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function onConfirm() {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {
    key: "category-delete",
    color: "ghost-alternative",
    onClick: openDialog
  }, /*#__PURE__*/React.createElement(Icon, {
    icon: "trash"
  })), /*#__PURE__*/React.createElement(Dialog, {
    title: translator.gettext('Are you sure?'),
    actions: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {
      onClick: closeDialog
    }, " ", translator.gettext('Cancel')), /*#__PURE__*/React.createElement(Button, {
      onClick: onConfirm,
      color: "red"
    }, translator.gettext('Confirm'))),
    visible: visible,
    closeOnEsc: true,
    onClose: closeDialog
  }, translator.gettext("You're about to delete a Product category. This action cannot be undone.")));
};

var css_248z = ".ff_v4290__Category__wrapper__2Wj{\n\twidth:100%;\n}\n.ff_v4290__Category__editButton__21Z{\n\tdisplay:none;\n\tposition:absolute;\n\ttop:4px;\n\tright:12px;\n\tz-index:1;\n}\n.ff_v4290__Category__option__3D7{\n\tdisplay:flex;\n\tjustify-content:space-between;\n}\n.ff_v4290__Category__option__3D7:hover .ff_v4290__Category__editButton__21Z{\n\t\t\tdisplay:flex;\n\t\t}\n.ff_v4290__Category__section__eOG{\n\tdisplay:flex;\n\talign-items:center;\n\tjustify-content:space-between;\n\tflex:1;\n}\n.ff_v4290__Category__saveButton__3FH{\n\tmargin-left:8px;\n}\n";
var styles = {
  "wrapper": "ff_v4290__Category__wrapper__2Wj",
  "editButton": "ff_v4290__Category__editButton__21Z",
  "option": "ff_v4290__Category__option__3D7",
  "section": "ff_v4290__Category__section__eOG",
  "saveButton": "ff_v4290__Category__saveButton__3FH"
};
styleInject(css_248z);

var categoryOptions = function categoryOptions(_ref) {
  var options = _ref.options,
      canCreateCategories = _ref.canCreateCategories,
      filter$1 = filter(_ref),
      value = _ref.value,
      onClickEdit = _ref.onClickEdit,
      translator = _ref.translator;

  var isFilterTextCategoryUnique = function isFilterTextCategoryUnique() {
    return !find$1(options).call(options, function (option) {
      return option.label === filter$1;
    });
  };

  var isSelectedOptionNew = function isSelectedOptionNew(option) {
    return option.isNew && option.id === value;
  };

  return /*#__PURE__*/React.createElement(React.Fragment, null, map(options).call(options, function (option) {
    return /*#__PURE__*/React.createElement(Select.Option, {
      className: styles.option,
      value: option.id,
      key: option.id,
      itemToString: function itemToString() {
        return option.label;
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: styles.section
    }, /*#__PURE__*/React.createElement("span", null, option.label), isSelectedOptionNew(option) && /*#__PURE__*/React.createElement(Pill, {
      color: "blue",
      size: "s"
    }, translator.gettext('new'))), canCreateCategories && /*#__PURE__*/React.createElement(Button, {
      size: "s",
      onClick: function onClick(e) {
        return onClickEdit(e, option);
      },
      className: styles.editButton
    }, /*#__PURE__*/React.createElement(Icon, {
      icon: "pencil",
      size: "s"
    })));
  }), canCreateCategories && filter$1.length > 0 && isFilterTextCategoryUnique() && /*#__PURE__*/React.createElement(Select.Option, {
    value: 'new_category',
    itemToString: function itemToString() {
      return filter$1;
    }
  }, translator.gettext('+ Add "%s" as a new category', filter$1)));
};

function ownKeys$2(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Category = function Category(_ref) {
  var onComponentChange = _ref.onComponentChange,
      valueProp = _ref.value,
      _ref$canCreateCategor = _ref.canCreateCategories,
      canCreateCategories = _ref$canCreateCategor === void 0 ? true : _ref$canCreateCategor,
      optionsProp = _ref.options,
      onModalChange = _ref.onModalChange,
      fieldId = _ref.fieldId;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useState = useState(''),
      _useState2 = _slicedToArray(_useState, 2),
      filter$1 = _useState2[0],
      setFilter = _useState2[1];

  var _useState3 = useState(null),
      _useState4 = _slicedToArray(_useState3, 2),
      modal = _useState4[0],
      setModal = _useState4[1];

  var _useState5 = useState(optionsProp || []),
      _useState6 = _slicedToArray(_useState5, 2),
      options = _useState6[0],
      setOptions = _useState6[1];

  var _useState7 = useState(valueProp),
      _useState8 = _slicedToArray(_useState7, 2),
      value = _useState8[0],
      setValue = _useState8[1];

  var focusCategoryInput = /*#__PURE__*/React.createRef();
  useEffect(function () {
    if (!optionsProp) {
      _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {
        var result;
        return _regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return getCategoryOptions(fieldId);

              case 2:
                result = _context.sent;
                setOptions(result);

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }))();
    }
  }, [optionsProp]);

  var closeModal = function closeModal() {
    return setModal(null);
  };

  var openModal = function openModal(option) {
    return setModal(option);
  };

  var onClickEdit = function onClickEdit(event, option) {
    event.preventDefault();
    openModal(option);
  };

  var onModalInputChange = function onModalInputChange(event) {
    var option = {
      id: modal === null || modal === void 0 ? void 0 : modal.id,
      label: event.currentTarget.value
    };
    setModal(option);

    if (onModalChange) {
      onModalChange(option);
    }
  };

  var onSelect = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {
      var _context2, newOptions, sortedById, newOption, option, _newOptions;

      return _regeneratorRuntime.wrap(function _callee2$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              if (!(id === 'new_category')) {
                _context3.next = 13;
                break;
              }

              _context3.next = 3;
              return updateCategory(fieldId, concat(_context2 = []).call(_context2, _toConsumableArray(options), [{
                label: filter$1
              }]));

            case 3:
              newOptions = _context3.sent;
              sortedById = sortBy(newOptions, 'id');
              newOption = sortedById[sortedById.length - 1];

              find$1(newOptions).call(newOptions, function (option, i) {
                if (option.id === newOption.id) {
                  newOptions[i] = _objectSpread$2(_objectSpread$2({}, newOptions[i]), {}, {
                    isNew: true
                  });
                  return true;
                }

                return false;
              });

              setOptions(newOptions);
              setValue(newOption.id);
              setFilter('');

              if (onComponentChange) {
                onComponentChange(newOptions[newOptions.length - 1]);
              }

              _context3.next = 18;
              break;

            case 13:
              option = find$1(options).call(options, function (item) {
                return item.id === id;
              });
              _newOptions = map(options).call(options, function (option) {
                if (option.isNew) {
                  delete option.isNew;
                }

                return option;
              });
              setOptions(_newOptions);
              setValue(id);

              if (onComponentChange) {
                onComponentChange(option);
              }

            case 18:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee2);
    }));

    return function onSelect(_x) {
      return _ref3.apply(this, arguments);
    };
  }();

  var onCategoryLabelEdit = /*#__PURE__*/function () {
    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {
      var newOptions;
      return _regeneratorRuntime.wrap(function _callee3$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              newOptions = map(options).call(options, function (option) {
                if ((modal === null || modal === void 0 ? void 0 : modal.id) === option.id) {
                  option.label = (modal === null || modal === void 0 ? void 0 : modal.label) || '';
                }

                return option;
              });
              _context4.next = 3;
              return updateCategory(fieldId, options);

            case 3:
              setOptions(newOptions);
              closeModal();

            case 5:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee3);
    }));

    return function onCategoryLabelEdit() {
      return _ref4.apply(this, arguments);
    };
  }();

  var confirmCategoryDelete = /*#__PURE__*/function () {
    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {
      var newOptions;
      return _regeneratorRuntime.wrap(function _callee4$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              newOptions = filter(options).call(options, function (option) {
                return option.id !== (modal === null || modal === void 0 ? void 0 : modal.id);
              });
              _context5.next = 3;
              return updateCategory(fieldId, options);

            case 3:
              setOptions(newOptions);
              closeModal();

            case 5:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee4);
    }));

    return function confirmCategoryDelete() {
      return _ref5.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Select, {
    filter: true,
    popperProps: popperProps,
    placeholder: translator.gettext('Select category'),
    onChange: onSelect,
    onFilterChange: setFilter,
    allowClear: true,
    className: styles.wrapper,
    value: value,
    resetFilterOnValueChange: true
  }, categoryOptions({
    options: options,
    canCreateCategories: canCreateCategories,
    onClickEdit: onClickEdit,
    filter: filter$1,
    value: value,
    translator: translator
  })), /*#__PURE__*/React.createElement(Modal, {
    visible: !!modal,
    header: translator.gettext('Edit category'),
    onClose: function onClose() {
      closeModal();
    },
    onTransitionEnd: function onTransitionEnd() {
      if (modal && focusCategoryInput.current) {
        focusCategoryInput.current.focus();
      }
    },
    footer: [/*#__PURE__*/React.createElement(CategoryDialog, {
      key: 'category-dialog',
      action: confirmCategoryDelete
    }), /*#__PURE__*/React.createElement("div", {
      key: 'category-save'
    }, /*#__PURE__*/React.createElement(Button, {
      onClick: closeModal
    }, translator.gettext('Cancel')), /*#__PURE__*/React.createElement(Button, {
      color: "green",
      onClick: onCategoryLabelEdit,
      className: styles.saveButton
    }, translator.gettext('Save changes')))]
  }, /*#__PURE__*/React.createElement(Input, {
    inputRef: focusCategoryInput,
    value: modal === null || modal === void 0 ? void 0 : modal.label,
    onChange: onModalInputChange
  })));
};

var DurationRead = function DurationRead(_ref) {
  var value = _ref.value;
  return /*#__PURE__*/React.createElement(React.Fragment, null, value || '');
};

var toInteger = toInteger$6;

var requireObjectCoercible$1 = requireObjectCoercible$8; // `String.prototype.repeat` method implementation
// https://tc39.es/ecma262/#sec-string.prototype.repeat


var stringRepeat = function repeat(count) {
  var str = String(requireObjectCoercible$1(this));
  var result = '';
  var n = toInteger(count);
  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');

  for (; n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;

  return result;
};

// https://github.com/tc39/proposal-string-pad-start-end
var toLength = toLength$c;

var repeat = stringRepeat;

var requireObjectCoercible = requireObjectCoercible$8;

var ceil = Math.ceil; // `String.prototype.{ padStart, padEnd }` methods implementation

var createMethod = function (IS_END) {
  return function ($this, maxLength, fillString) {
    var S = String(requireObjectCoercible($this));
    var stringLength = S.length;
    var fillStr = fillString === undefined ? ' ' : String(fillString);
    var intMaxLength = toLength(maxLength);
    var fillLen, stringFiller;
    if (intMaxLength <= stringLength || fillStr == '') return S;
    fillLen = intMaxLength - stringLength;
    stringFiller = repeat.call(fillStr, ceil(fillLen / fillStr.length));
    if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);
    return IS_END ? S + stringFiller : stringFiller + S;
  };
};

var stringPad = {
  // `String.prototype.padStart` method
  // https://tc39.es/ecma262/#sec-string.prototype.padstart
  start: createMethod(false),
  // `String.prototype.padEnd` method
  // https://tc39.es/ecma262/#sec-string.prototype.padend
  end: createMethod(true)
};

// https://github.com/zloirock/core-js/issues/280
var userAgent = engineUserAgent; // eslint-disable-next-line unicorn/no-unsafe-regex -- safe


var stringPadWebkitBug = /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent);

var $ = _export;

var $padStart = stringPad.start;

var WEBKIT_BUG = stringPadWebkitBug; // `String.prototype.padStart` method
// https://tc39.es/ecma262/#sec-string.prototype.padstart


$({
  target: 'String',
  proto: true,
  forced: WEBKIT_BUG
}, {
  padStart: function padStart(maxLength
  /* , fillString = ' ' */
  ) {
    return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);
  }
});

var entryVirtual = entryVirtual$e;

var padStart$2 = entryVirtual('String').padStart;

var padStart$1 = padStart$2;

var StringPrototype = String.prototype;

var padStart_1 = function (it) {
  var own = it.padStart;
  return typeof it === 'string' || it === StringPrototype || it instanceof String && own === StringPrototype.padStart ? padStart$1 : own;
};

var parent = padStart_1;

var padStart = parent;

var getDurations = function getDurations() {
  var durations = [];

  for (var i = 0; i <= 23; i++) {
    var _context;

    var hour = padStart(_context = String(i)).call(_context, 2, '0');

    if (i !== 0) {
      durations.push("".concat(hour, ":00"));
    }

    durations.push("".concat(hour, ":15"));
    durations.push("".concat(hour, ":30"));
    durations.push("".concat(hour, ":45"));
  }

  return durations;
};

var _excluded = ["value", "placeholder", "error", "onValidation"];

function ownKeys$1(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var Duration = function Duration(_ref) {
  var value = _ref.value,
      _ref$placeholder = _ref.placeholder,
      placeholder = _ref$placeholder === void 0 ? '' : _ref$placeholder,
      error = _ref.error,
      onValidation = _ref.onValidation,
      restProps = _objectWithoutProperties(_ref, _excluded);

  var suggestions = getDurations();

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      isOpen = _useState2[0],
      setIsOpen = _useState2[1];

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getDurationValidation = _useValidation.getDurationValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState3 = useState(''),
      _useState4 = _slicedToArray(_useState3, 2),
      validationError = _useState4[0],
      setValidationError = _useState4[1];

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getDurationValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  var getSuggestions = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {
      var result;
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              result = filter(suggestions).call(suggestions, function (suggestion) {
                return includes(suggestion).call(suggestion, value);
              });
              setIsOpen(!!result.length);
              return _context.abrupt("return", result.length ? result : null);

            case 3:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function getSuggestions(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  return /*#__PURE__*/React.createElement(InputSelect, _objectSpread$1({
    value: value,
    getSuggestions: getSuggestions,
    alwaysGetSuggestions: true,
    initialSuggestions: suggestions,
    placeholder: placeholder,
    downshiftProps: {
      isOpen: isOpen
    },
    inputProps: {
      onClick: function onClick() {
        setIsOpen(!isOpen);
      },
      onBlur: function onBlur(event) {
        setIsOpen(false);
        validate(event);
      },
      message: error || validationError
    },
    allowNewItem: true,
    disableNewLabel: true
  }, restProps));
};

var TextAndOptionsFieldRead = function TextAndOptionsFieldRead(_ref) {
  var value = _ref.value;
  return value ? /*#__PURE__*/React.createElement(React.Fragment, null, value) : null;
};

function ownKeys(object, enumerableOnly) { var keys = keys$1(object); if (getOwnPropertySymbols) { var symbols = getOwnPropertySymbols(object); if (enumerableOnly) { symbols = filter(symbols).call(symbols, function (sym) { return getOwnPropertyDescriptor$1(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (getOwnPropertyDescriptors) { Object.defineProperties(target, getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, getOwnPropertyDescriptor$1(source, key)); }); } } return target; }
var TextAndOptionsField = function TextAndOptionsField(_ref) {
  var value = _ref.value,
      _ref$autofocus = _ref.autofocus,
      autofocus = _ref$autofocus === void 0 ? true : _ref$autofocus,
      actionIcon = _ref.actionIcon,
      disabled = _ref.disabled,
      onComponentChange = _ref.onComponentChange,
      inputProps = _ref.inputProps,
      error = _ref.error,
      onValidation = _ref.onValidation,
      freeform = _ref.freeform,
      _ref$options = _ref.options,
      options = _ref$options === void 0 ? [] : _ref$options,
      selectProps = _ref.selectProps,
      freeformOptionText = _ref.freeformOptionText,
      _ref$selectPlaceholde = _ref.selectPlaceholder,
      selectPlaceholder = _ref$selectPlaceholde === void 0 ? ' ' : _ref$selectPlaceholde,
      _ref$inputPlaceholder = _ref.inputPlaceholder,
      inputPlaceholder = _ref$inputPlaceholder === void 0 ? ' ' : _ref$inputPlaceholder;
  var hasOptions = (options === null || options === void 0 ? void 0 : options.length) !== 0;

  var _parseContext = parseContext(useContext(FormFieldsContext)),
      translator = _parseContext.translator;

  var _useValidation = useValidation(translator),
      getValidation = _useValidation.getValidation,
      handleValidation = _useValidation.handleValidation;

  var _useState = useState(),
      _useState2 = _slicedToArray(_useState, 2),
      validationError = _useState2[0],
      setValidationError = _useState2[1];

  var _useState3 = useState(false),
      _useState4 = _slicedToArray(_useState3, 2),
      inputVisible = _useState4[0],
      setInputVisible = _useState4[1];

  var _useState5 = useState(options),
      _useState6 = _slicedToArray(_useState5, 2),
      optionsState = _useState6[0],
      setOptionsState = _useState6[1];

  var getValue = function getValue(someValue) {
    return (someValue === null || someValue === void 0 ? void 0 : someValue.id) || null;
  };

  var _useState7 = useState(getValue(value)),
      _useState8 = _slicedToArray(_useState7, 2),
      selected = _useState8[0],
      setSelected = _useState8[1];

  var freeformOption = {
    label: freeformOptionText || '...',
    id: 10000
  };
  useEffect(function () {
    setInputVisible(!hasOptions);

    if (hasOptions && freeform) {
      var _context;

      setOptionsState(concat(_context = []).call(_context, _toConsumableArray(options), [freeformOption]));
    }
  }, []);

  var onInputChange = function onInputChange(event) {
    onComponentChange === null || onComponentChange === void 0 ? void 0 : onComponentChange(event.currentTarget.value);
  };

  var onSelectChange = function onSelectChange(selectId) {
    var selectedOption = optionsState === null || optionsState === void 0 ? void 0 : find$1(optionsState).call(optionsState, function (option) {
      return option.id === selectId;
    });
    setSelected(getValue(selectedOption));
    setInputVisible(selectId === freeformOption.id ? true : false);
    onComponentChange === null || onComponentChange === void 0 ? void 0 : onComponentChange(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.label);
  };

  var validate = function validate(event) {
    var errorMessage = handleValidation({
      formValue: event,
      validate: getValidation
    });
    setValidationError(errorMessage);
    onValidation && onValidation(!errorMessage);
  };

  return /*#__PURE__*/React.createElement(React.Fragment, null, hasOptions && /*#__PURE__*/React.createElement(Select, _objectSpread({
    value: selected,
    onChange: onSelectChange,
    placeholder: selectPlaceholder,
    style: {
      display: 'flex'
    },
    disabled: disabled
  }, selectProps), map(optionsState).call(optionsState, function (option, _index) {
    return /*#__PURE__*/React.createElement(Select.Option, {
      key: option.id,
      value: option.id
    }, option.label);
  })), inputVisible && /*#__PURE__*/React.createElement(Spacing, {
    top: "xs"
  }, /*#__PURE__*/React.createElement(Input, _objectSpread({
    autoFocus: autofocus,
    type: "text",
    onBlur: validate,
    onMouseOut: validate,
    onChange: onInputChange,
    placeholder: inputPlaceholder,
    message: error || validationError,
    color: error || validationError ? 'red' : undefined
  }, inputProps))), actionIcon);
};

var WHITE_LIST = {
  id: 'varchar',
  name: 'varchar',
  phone: 'default_phone',
  email: 'email',
  add_time: 'date',
  update_time: 'date',
  org_id: 'organization',
  owner_id: 'owner',
  deal_id: 'int',
  deal: 'deal',
  person_id: 'person',
  user_id: 'user',
  open_deals_count: 'double',
  visible_to: 'visible_to',
  due_date: 'date',
  due_time: 'time',
  duration: 'duration',
  note: 'text',
  currency: 'varchar',
  created_by_user_id: 'user',
  creator_user_id: 'user',
  next_activity_date: 'date',
  last_activity_date: 'date',
  won_deals_count: 'int',
  lost_deals_count: 'int',
  closed_deals_count: 'int',
  activities_count: 'int',
  done_activities_count: 'int',
  undone_activities_count: 'int',
  email_messages_count: 'int',
  last_incoming_mail_time: 'date',
  last_outcoming_mail_time: 'date',
  last_notification_time: 'date',
  won_time: 'date',
  close_time: 'date',
  lost_time: 'date',
  lost_reason: 'varchar_options',
  label: 'label',
  im: 'im',
  postal_address: 'address',
  postal_address_subpremise: 'varchar',
  postal_address_street_number: 'varchar',
  postal_address_route: 'varchar',
  postal_address_sublocality: 'varchar',
  postal_address_locality: 'varchar',
  postal_address_admin_area_level_1: 'varchar',
  postal_address_admin_area_level_2: 'varchar',
  postal_address_country: 'varchar',
  postal_address_formatted_address: 'varchar',
  postal_address_lat: 'varchar',
  postal_address_long: 'varchar',
  subject: 'varchar',
  type: 'enum',
  done: 'enum',
  marked_as_done_time: 'date',
  weighted_value: 'monetary',
  weighted_value_currency: 'varchar',
  value: 'monetary',
  probability: 'percentage',
  pipeline_id: 'double',
  stage_id: 'stage_id',
  status: 'status',
  stage_change_time: 'date',
  expected_close_date: 'date',
  sender: 'varchar',
  // shared: 'boolean',
  // attachments: 'boolean',
  received: 'date',
  content: 'text',
  pinned_to_deal_flag: 'enum',
  pinned_to_organization_flag: 'enum',
  pinned_to_person_flag: 'enum',
  people_count: 'double',
  code: 'varchar',
  selectable: 'enum',
  price: 'double',
  unit: 'varchar',
  tax: 'double',
  last_login: 'date',
  created: 'date',
  modified: 'date',
  default_currency: 'varchar',
  locale: 'varchar',
  timezone_name: 'varchar',
  role_id: 'int',
  picture_id: 'int',
  category: 'category',
  unit_prices: 'unit_prices',
  pipelines_and_stages: 'pipelines_and_stages'
};
var mapping = {
  varchar_auto: {
    edit: Autocomplete,
    read: AutocompleteRead
  },
  int: {
    edit: NumberComponent,
    read: NumberRead
  },
  double: {
    edit: NumberComponent,
    read: NumberRead
  },
  text: {
    edit: TextAreaComponent,
    read: TextAreaRead
  },
  varchar: {
    edit: TextField,
    read: TextFieldRead
  },
  monetary: {
    edit: MonetaryComponent,
    read: MonetaryRead
  },
  date: {
    edit: DatePicker,
    read: DatePickerRead
  },
  person: {
    edit: Person,
    read: PersonRead
  },
  multiple_contacts: {
    edit: MultipleContacts,
    read: MultipleContactsRead
  },
  organization: {
    edit: Organization,
    read: OrganizationRead
  },
  user: {
    edit: User,
    read: UserRead
  },
  owner: {
    edit: Owner,
    read: UserRead
  },
  phone: {
    edit: Phone,
    read: PhoneRead
  },
  default_phone: {
    edit: DefaultPhone,
    read: DefaultPhoneRead$1
  },
  time: {
    edit: TimePicker,
    read: TimePickerRead
  },
  timerange: {
    edit: TimeRange,
    read: TimeRangeRead
  },
  daterange: {
    edit: DateRange,
    read: DateRangeRead
  },
  address: {
    edit: Address,
    read: AddressRead
  },
  postal_address: {
    edit: Address,
    read: AddressRead
  },
  label: {
    edit: Label,
    read: LabelRead
  },
  im: {
    edit: InstantMessage,
    read: InstantMessageRead
  },
  percentage: {
    edit: PercentageComponent,
    read: PercentageRead
  },
  probability: {
    edit: PercentageComponent,
    read: PercentageRead
  },
  email: {
    edit: Email,
    read: EmailRead
  },
  set: {
    edit: MultipleOptions,
    read: MultipleOptionsRead
  },
  enum: {
    edit: SingleOption,
    read: SingleOptionRead
  },
  visible_to: {
    edit: SingleOption,
    read: SingleOptionRead
  },
  status: {
    edit: SingleOption,
    read: SingleOptionRead
  },
  stage_id: {
    edit: SingleOption,
    read: TextFieldRead
  },
  pipeline_id: {
    edit: SingleOption,
    read: TextFieldRead
  },
  pipelines_and_stages: {
    edit: PipelinesAndStages,
    read: {}
  },
  weighted_value: {
    edit: TextField,
    read: TextFieldRead
  },
  varchar_options: {
    edit: TextAndOptionsField,
    read: TextAndOptionsFieldRead
  },
  deal: {
    edit: Deal,
    read: DealRead
  },
  visibility: {
    edit: VisibilitySwitch,
    read: VisibilitySwitchRead
  },
  unit_prices: {
    edit: UnitPrices,
    read: DefaultPhoneRead
  },
  category: {
    edit: Category,
    read: CategorySelectRead
  },
  duration: {
    edit: Duration,
    read: DurationRead
  }
};

var mapFieldType = function mapFieldType(key, type) {
  if (WHITE_LIST[key]) {
    return WHITE_LIST[key];
  }

  return type;
};

var getContacts = function getContacts(value) {
  if (!value) {
    return [];
  }

  if (isArray$6(value)) {
    return value.reduce(function (accumulator, current) {
      if (current.value !== '') {
        accumulator.push(current);
      }

      return accumulator;
    }, []);
  } else {
    return {
      value: value.value,
      label: value.label,
      primary: value.primary
    };
  }
};

var getContact = function getContact(value, field) {
  return {
    is_hidden: field.is_hidden,
    id: value,
    name: field.name
  };
};

var getEnum = function getEnum(value, options) {
  if (!Array.isArray(options)) {
    return;
  }

  var selected = find$1(options).call(options, function (option) {
    return String(option.id) === String(value);
  });

  return selected;
};

var getMonetary = function getMonetary(values, key) {
  if (isNil(values[key])) {
    return;
  }

  if (key === 'value') {
    return {
      value: values[key],
      label: values.currency
    };
  }

  return {
    value: values[key],
    label: values["".concat(key, "_currency")]
  };
};

var getDateRange = function getDateRange(value, key) {
  return {
    startDate: value[key],
    endDate: value["".concat(key, "_until")]
  };
};

var getTimeRange = function getTimeRange(value, key) {
  return {
    startTime: value[key],
    endTime: value["".concat(key, "_until")]
  };
};

var getOriginalValue = function getOriginalValue(value) {
  return value;
}; // eslint-disable-next-line complexity


var getSQLmapping = function getSQLmapping(_ref) {
  var field = _ref.field,
      values = values_1(_ref);

  var key = field.key;
  var type = mapFieldType(key, field.field_type);

  switch (type) {
    case 'monetary':
    case 'weighted_value':
      return getMonetary(values, key);

    case 'person':
    case 'organization':
      return getContact(values[key], field);

    case 'email':
    case 'default_phone':
    case 'im':
      return getContacts(values[key]);

    case 'enum':
    case 'label':
      return getEnum(values[key], field.options);

    case 'daterange':
      return getDateRange(values, key);

    case 'timerange':
      return getTimeRange(values, key);

    default:
      /** List of fileds that mapped as just simple value return */
      // user
      // address
      // varchar_auto
      // set
      // int
      // percentage
      // customfield phone
      // text
      // varchar
      // time
      // date
      // owner_id
      return getOriginalValue(values[key]);
  }
};

var getComponent = function getComponent(type, key) {
  var Element = mapping[WHITE_LIST[key] || type];
  return {
    Component: Element.edit,
    ComponentRead: Element.read
  };
};

export { ActionFooter, AddButton, Address, AddressRead, Autocomplete, AutocompleteRead, Category, CategorySelectRead as CategoryRead, CheckboxGroup, DatePicker, DatePickerRead, DateRange, DateRangeRead, Deal, DealRead, DefaultPhone, DefaultPhoneRead$1 as DefaultPhoneRead, Duration, DurationRead, Email, EmailRead, EntitySuggestions, FormFieldsContext, InputMultiSelect, InputSelect, InstantMessage, InstantMessageRead, Label, LabelRead, Link, MonetaryComponent as Monetary, MonetaryRead, MultipleContacts, MultipleContactsRead, MultipleOptions, MultipleOptionsRead, NumberRead, NumberComponent as Numeric, Organization, OrganizationRead, PercentageComponent as Percentage, PercentageRead, Person, PersonRead, Phone, PhoneRead, PipelinesAndStages, RadioGroup, SingleOption, SingleOptionRead, TextAndOptionsField, TextAndOptionsFieldRead, TextAreaComponent as TextArea, TextAreaRead, TextField, TextFieldRead, TimePicker, TimePickerRead, TimeRange, TimeRangeRead, UnitPrices, DefaultPhoneRead as UnitPricesRead, User, UserRead, VisibilitySwitch, VisibilitySwitchRead, WithEditButton, getComponent, getFFContextData, isEmpty as getFormValueIsEmpty, getSQLmapping, mapFieldType, useDataMapping };
//# sourceMappingURL=index.esm.js.map
