import React from 'react';
import { createFragmentContainer, graphql } from '@pipedrive/relay';

import { CustomField } from '../CustomField';

import type { CustomFieldPerson_data } from './__generated__/CustomFieldPerson_data.graphql';

type Props = {
	readonly data: CustomFieldPerson_data;
};

const CustomFieldPersonWithoutData: React.FC<Props> = ({ data }) => (
	<CustomField
		icon="person"
		type="person"
		value={data.person?.name}
		data={data}
		isDisabled={true}
		onUpdate={() => Promise.resolve(false)}
	/>
);

export const CustomFieldPerson = createFragmentContainer(CustomFieldPersonWithoutData, {
	data: graphql`
		fragment CustomFieldPerson_data on CustomFieldPerson {
			...CustomField_data
			name
			person {
				name
			}
		}
	`,
});
