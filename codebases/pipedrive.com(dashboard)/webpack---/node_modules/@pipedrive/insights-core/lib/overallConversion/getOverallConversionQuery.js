"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const queryBuilderUtils_1 = require("../queryBuilderUtils");
const constants_1 = require("../constants");
const getOverallConversionQuery = (groupByFilter, args, chartType) => {
    const fields = ['conversion', 'sumConversion', 'count', 'sum', 'status', 'currency', 'isOtherSegment'];
    const shouldAddGroupByFieldToQuery = chartType !== constants_1.ChartType.SCORECARD;
    if (shouldAddGroupByFieldToQuery) {
        fields.push(groupByFilter);
    }
    const reportQuery = {
        field: constants_1.QueryReportTypeField.CONVERSION_OVERALL,
        args,
        fields: {
            data: queryBuilderUtils_1.prepareForQueryBuilder(fields),
            meta: queryBuilderUtils_1.prepareForQueryBuilder(constants_1.METADATA_FIELDS),
        },
    };
    return reportQuery;
};
exports.default = getOverallConversionQuery;
