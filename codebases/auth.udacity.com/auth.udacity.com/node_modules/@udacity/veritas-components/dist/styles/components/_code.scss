// ============================================================
// components: code, codeblock
// ============================================================

$map: $code-map;

$vds-code-border: 1px solid $vds-color-slate-lighter;

pre,
code,
.#{$namespace}-codeblock,
.#{$namespace}-code {
  @include font-family(code);
  @include border-radius(secondary);
  background: $vds-color-slate-lightest;
  border: $vds-code-border;
  direction: ltr; // set explicitly for RTL
  margin: 0;
}

// code
// ============================================================
code,
.#{$namespace}-code {
  @include type-style(code, $map);
  display: inline-block; // set explicitly to inherit line-height of parent
  padding: 0 rem(4);

  p & {
    font-size: $vds-text-font-size;
    line-height: rem(24);
  }

  .#{$namespace}-text--sm & {
    font-size: $vds-text-font-size-sm;
    line-height: rem(16);
  }

  .#{$namespace}-text--xs & {
    font-size: $vds-text-font-size-xs;
    line-height: rem(16);
  }
}

// codeblock
// ============================================================
pre,
.#{$namespace}-codeblock {
  @include type-style(codeblock, $map);
  overflow: auto;
  padding: rem(16);
  tab-size: 2;

  > code {
    background: transparent;
    border: 0;
    border-radius: 0;
    display: inline;
    line-height: inherit;
    padding: 0;
    white-space: pre;
  }
}

// line numbers for codeblock
.#{$namespace}-codeblock--numbered {
  counter-reset: line;

  > code {
    counter-increment: line;
    display: block;

    &:before {
      @include spacing(inline, 2x);
      border-right: $vds-code-border;
      color: color(slate, lighter);
      content: counter(line);
      display: inline-block;
      padding-right: $vds-spacing-1x;
      text-align: right;
      -webkit-user-select: none;
      width: rem(28);
    }
  }
}
