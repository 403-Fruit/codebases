// ============================================================
// components: switch
// ============================================================

// sass-lint:disable nesting-depth force-pseudo-nesting

$vds-switch-height: rem(24);
$vds-switch-width: rem(40);
$vds-switch-offset-size: rem(2);
$vds-switch-toggle-size: rem(18);
$vds-switch-toggle-offset-size: rem(3);

.#{$namespace}-switch {
  @include spacing(stack, 2x);
  display: flex;
  position: relative;
  -webkit-touch-callout: none;
  user-select: none;

  &:last-of-type {
    @include spacing(stack, none);
  }

  &--hidden {
    display: block;
  }

  // switch container
  // ============================================================
  &__toggle {
    background-color: color(silver, light);
    border-radius: $vds-switch-height;
    height: $vds-switch-height;
    left: 0;
    pointer-events: none;
    position: absolute;
    top: $vds-switch-offset-size;
    transition: $vds-transition-all;
    width: $vds-switch-width;

    // switch toggle
    // ============================================================
    &::before {
      @include border-radius(circle);
      @include box-shadow(1);
      background-color: color(white);
      content: "";
      height: $vds-switch-toggle-size;
      left: $vds-switch-toggle-offset-size;
      position: absolute;
      top: $vds-switch-toggle-offset-size;
      transition: $vds-transition-all;
      width: $vds-switch-toggle-size;
    }
  }

  &__input {
    // hide default checkbox
    cursor: pointer;
    height: $vds-switch-height;
    opacity: 0;
    position: relative;
    top: $vds-switch-toggle-offset-size;
    width: $vds-switch-width + $vds-spacing-2x;

    // hidden label
    .#{$namespace}-switch--hidden & {
      width: $vds-switch-width;
    }

    // active state
    &:active {
      ~ .#{$namespace}-switch__toggle {
        &::before {
          transform: scale(1.1);
        }
      }
    }

    // checked state
    &:checked {
      ~ .#{$namespace}-switch__toggle {
        background-color: $vds-form-background-color-selected;

        &::before {
          left: $vds-switch-toggle-size + rem(1);
        }
      }
    }

    // disabled state
    &:disabled {
      cursor: not-allowed;

      ~ .#{$namespace}-switch__toggle {
        @include box-shadow(0);
        opacity: $vds-form-opacity-disabled;

        &::before {
          transform: scale(1);
        }
      }

      ~ .#{$namespace}-switch__label {
        cursor: not-allowed;
        opacity: $vds-form-opacity-disabled;
      }
    }

    // focus state
    &:focus {
      ~ .#{$namespace}-switch__toggle {
        box-shadow: $vds-form-box-shadow-focus;
      }
    }

    // hover state
    &:hover:not(:focus):not(:disabled) {
      ~ .#{$namespace}-switch__toggle {
        @include box-shadow(2);
      }
    }
  }

  &__label {
    align-items: center;
    cursor: pointer;
    display: inline-block;
    flex: 1;
  }
}

// RTL support
// ============================================================
@include rtl {
  .#{$namespace}-switch__toggle {
    right: 0;
    transform: rotateY(180deg);
  }
}
