// ============================================================
// components: radio
// ============================================================

// sass-lint:disable nesting-depth force-pseudo-nesting

$radio-icon: "::after";
$radio-container: "::before";
$vds-radio-icon-size: rem(8);

.#{$namespace}-radio {
  @include spacing(stack, 2x);
  display: flex;
  position: relative;
  -webkit-touch-callout: none;
  user-select: none;

  &:last-of-type {
    @include spacing(stack, none);
  }

  &--hidden {
    display: block;
  }

  // inline radio group
  // ============================================================
  .#{$namespace}-radio-group--inline & {
    @include spacing(inline, 4x);
    @include spacing-remove-last-child(inline);
    display: inline-block;
    @include breakpoint(sm) {
      @include spacing(stack, none);
      @include spacing-remove-last-child(stack);
    }

    &__input {
      height: auto;
    }
  }

  .#{$namespace}-radio-group--inline &--hidden {
    @include spacing(inline, 3x);
    @include spacing-remove-last-child(inline);
  }

  &__label {
    cursor: pointer;
    display: inline-block;
    flex: 1;

    // custom radio container
    // ============================================================
    &#{$radio-container} {
      @include border-radius(circle);
      @include size($vds-checkbox-radio-size);
      background-color: $vds-form-background-color;
      border: $vds-form-border;
      content: "";
      left: 0;
      position: absolute;
      top: $vds-checkbox-radio-offset-size;
      transition: $vds-transition-all;
    }

    // custom radio icon (inner circle ðŸ”˜)
    // ============================================================
    &#{$radio-icon} {
      @include border-radius(circle);
      @include size($vds-radio-icon-size);
      background-color: $vds-form-background-color;
      content: "";
      left: $vds-radio-icon-size;
      position: absolute;
      top: $vds-radio-icon-size + $vds-checkbox-radio-offset-size;
      transition: $vds-transition-all;
    }

    // hover state
    &:hover {
      &#{$radio-container} {
        @include box-shadow(2);
      }

      &#{$radio-icon} {
        background-color: $vds-form-color-hover;
      }
    }
  }

  &__input {
    // hide default radio
    height: $vds-checkbox-radio-size;
    opacity: 0;
    position: relative;
    width: $vds-form-spacing-label;

    // hidden label
    .#{$namespace}-radio--hidden & {
      width: $vds-checkbox-radio-size;
    }

    // active state
    &:active ~ label#{$radio-icon} {
      transform: scale(2);
    }

    // focus state
    &:focus ~ label#{$radio-container} {
      box-shadow: $vds-form-box-shadow-focus;
    }

    // checked state
    &:checked {
      ~ label#{$radio-container} {
        background-color: $vds-form-background-color-selected;
        border: 0;
      }

      ~ label#{$radio-icon} {
        background-color: $vds-form-background-color;
        transform: scale(1);
      }
    }

    // disabled state
    &:disabled {
      ~ label {
        cursor: not-allowed;
        opacity: $vds-form-opacity-disabled;

        &#{$radio-container} {
          @include box-shadow(0);
        }
      }

      ~ label#{$radio-icon} {
        background-color: $vds-form-background-color;
        opacity: 1;
        transform: none;
      }
    }
  }
}

// radio group
// ============================================================
.#{$namespace}-radio-group {
  @include spacing(stack, 2x);
  @include spacing-remove-last-child(stack);

  &__title {
    @include type-style(heading-h4);
    @include spacing(stack, 2x);
    display: block;
  }
}

// RTL support
// ============================================================
@include rtl {
  .#{$namespace}-radio {
    &__label {
      &#{$radio-container} {
        right: 0;
      }

      &#{$radio-icon} {
        right: $vds-radio-icon-size;
      }
    }
  }

  .#{$namespace}-radio-group--inline {
    .#{$namespace}-radio {
      margin-left: $vds-spacing-4x;
      margin-right: 0;

      &:last-child {
        margin-left: 0;
      }

      &--hidden {
        margin-left: $vds-spacing-3x;
        margin-right: 0;
      }
    }
  }
}
