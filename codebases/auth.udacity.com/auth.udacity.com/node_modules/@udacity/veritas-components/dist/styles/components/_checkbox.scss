// ============================================================
// components: checkbox
// ============================================================

// sass-lint:disable nesting-depth force-pseudo-nesting

$checkmark-icon: $namespace + "-icon";
$checkmark-container: "::before";
$vds-checkbox-radio-size: rem(24);
$vds-checkbox-radio-offset-size: rem(2);

.#{$namespace}-checkbox {
  @include spacing(stack, 2x);
  display: flex;
  position: relative;
  -webkit-touch-callout: none;
  user-select: none;

  &:last-of-type {
    @include spacing(stack, none);
  }

  &--hidden {
    display: block;
  }

  // custom checkmark icon
  // ============================================================
  .#{$checkmark-icon} {
    left: 0;
    opacity: 0;
    pointer-events: none;
    position: absolute;
    top: $vds-checkbox-radio-offset-size;
    transform: scale(0.8);
    transition: $vds-transition-all;
  }

  &__label {
    cursor: pointer;
    display: inline-block;
    flex: 1;

    // custom checkbox container
    // ============================================================
    &#{$checkmark-container} {
      @include border-radius(secondary);
      @include size($vds-checkbox-radio-size);
      background-color: $vds-form-background-color;
      border: $vds-form-border;
      content: "";
      left: 0;
      position: absolute;
      top: $vds-checkbox-radio-offset-size;
      transition: $vds-transition-all;
    }

    // hover state
    &:hover {
      &#{$checkmark-container} {
        @include box-shadow(2);
      }

      ~ .#{$checkmark-icon} {
        color: $vds-form-color-hover;
        opacity: 1;
      }
    }
  }

  &__input {
    // hide default checkbox
    height: $vds-checkbox-radio-size;
    opacity: 0;
    position: relative;
    width: $vds-form-spacing-label;

    // hidden label
    .#{$namespace}-checkbox--hidden & {
      width: $vds-checkbox-radio-size;
    }

    // active state
    &:active ~ .#{$checkmark-icon} {
      transform: scale(1.2);
    }

    // focus state
    &:focus ~ label#{$checkmark-container} {
      box-shadow: $vds-form-box-shadow-focus;
    }

    // checked state
    &:checked {
      ~ label#{$checkmark-container} {
        background-color: $vds-form-background-color-selected;
        border: 0;
      }

      ~ .#{$checkmark-icon} {
        color: $vds-form-background-color;
        opacity: 1;
        transform: scale(1);
      }
    }

    // disabled state
    &:disabled {
      ~ label {
        cursor: not-allowed;
        opacity: $vds-form-opacity-disabled;

        &#{$checkmark-container} {
          @include box-shadow(0);
        }
      }

      ~ .#{$checkmark-icon} {
        color: $vds-form-background-color;
        opacity: 1;
        transform: none;
      }
    }
  }
}

// checkbox group
// ============================================================
.#{$namespace}-checkbox-group {
  @include spacing(stack, 2x);
  @include spacing-remove-last-child(stack);

  &__title {
    @include type-style(heading-h4);
    @include spacing(stack, 2x);
    display: block;
  }
}

// RTL support
// ============================================================
// sass-lint:disable-block force-attribute-nesting no-qualifying-elements
@include rtl {
  .#{$namespace}-checkbox {
    &__label {
      &#{$checkmark-container} {
        right: 0;
      }
    }

    .#{$checkmark-icon} {
      right: 0;
    }
  }
}
